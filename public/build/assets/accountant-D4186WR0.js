import{r as _,j as e,H as k,L as f,a as A}from"./app-AYk_vs9E.js";import{A as L}from"./app-layout-D8Tf8JSL.js";import{B as d}from"./button-DttS-hSO.js";import{C as N,a as B,d as g}from"./card-DfQq8xjq.js";import{I as U}from"./input-KN5y_tmq.js";import{u as F}from"./use-tenant-router-yHxY6vf2.js";import{S as b,a as y,b as v,c as w,d as o}from"./select-BgZzs72h.js";import{D as I,a as P,b as R,c as S}from"./dropdown-menu-C44z3VEl.js";import{A as E}from"./asset-status-badge-8xZWk8AO.js";import{C as V}from"./calculator-D5L7ZwlB.js";import{A as M}from"./arrow-left-BlrAGO7T.js";import{S as z}from"./search-BnOgmATY.js";import{D as H}from"./download-CsEn6l0J.js";import{F as O}from"./file-spreadsheet-Bx38IkCa.js";import{F as T}from"./file-json-CRsiCaSX.js";/* empty css            */import"./breadcrumb-B0lOsGUr.js";import"./utils-DawFQoOT.js";import"./sheet-BQ7ZHeJH.js";import"./index-D2xyTu0-.js";import"./index-C6YWzjxw.js";import"./index-DVPqwmDN.js";import"./index-BS1oCJ0R.js";import"./index-DH27nmtP.js";import"./index-DB97fau_.js";import"./index-JB8FLK9q.js";import"./x-C_zQvMCL.js";import"./createLucideIcon-B8-QgQ2g.js";import"./index-KBPR2gxA.js";import"./index-D-MPqe8D.js";import"./index-g_lpINMr.js";import"./file-text-DJz8nwxt.js";import"./users-DqaIzH7r.js";import"./package-famJlHsI.js";import"./wallet-1YY19SXz.js";import"./chevron-down-DjDlq31K.js";import"./skeleton-C1cSm2kL.js";import"./use-effective-tenant-it7FmrhR.js";import"./check-o4IyhQhV.js";import"./trash-2-CBlWZpKk.js";import"./en-US-DSSwd-Ay.js";import"./endOfMonth-BNqLjwTF.js";import"./user-C3DA-HUB.js";import"./dollar-sign-CtwrfOoy.js";import"./credit-card-BBEokihX.js";import"./mail-DQFl-2hO.js";import"./shield-SUW6F_AQ.js";import"./circle-alert-DSmqB_aB.js";import"./building-2-ClZdYFLS.js";import"./chevron-right-BFzkFd6A.js";import"./sonner-B0HlpBLA.js";import"./index-BSCeWBGl.js";import"./index-DpFxWXhO.js";import"./index-G_7kvJMb.js";import"./index-kZDZBK9R.js";import"./badge-CZj20M3O.js";function n(a,i){return a==null?"—":new Intl.NumberFormat(void 0,{style:"currency",currency:i||"USD"}).format(a)}function $(a){return a?new Date(a).toLocaleDateString():"—"}function J(a,i,t){const l=new URLSearchParams;return l.set("format",i),t.search&&l.set("search",t.search),t.category&&l.set("category",t.category),t.status&&l.set("status",t.status),`${a}?${l.toString()}`}function Ke({assets:a,categories:i,filters:t,statusOptions:l,categorySummary:u}){const c=F(),p=_.useRef(null),C=[{title:"Assets",href:c.route("assets.index")},{title:"Depreciation & P&L",href:c.route("assets.accountant")}],D=c.route("assets.accountant.export"),m=(s={})=>{var h,j;const r=(j=(h=p.current)==null?void 0:h.value)==null?void 0:j.trim();A.get(c.route("assets.accountant"),{search:r||void 0,category:t.category||void 0,status:t.status||void 0,...s})},x=s=>{const r=J(D,s,t);window.open(r,"_blank","noopener,noreferrer")};return e.jsxs(L,{breadcrumbs:C,children:[e.jsx(k,{title:"Depreciation & P&L"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-11 w-11 shrink-0 items-center justify-center rounded-xl bg-primary/10",children:e.jsx(V,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Depreciation & P&L"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Book value, accumulated depreciation, and export for accounting."})]})]}),e.jsx(d,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(f,{href:c.route("assets.index"),children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Back to assets"]})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("form",{className:"flex flex-wrap items-center gap-2",onSubmit:s=>{s.preventDefault(),m()},children:[e.jsx(U,{ref:p,name:"search",placeholder:"Search...",defaultValue:t.search,className:"h-10 w-[180px] sm:w-[200px]"}),e.jsxs(b,{value:t.category??"all",onValueChange:s=>m({category:s==="all"?void 0:s}),children:[e.jsx(y,{className:"h-10 w-[160px]",children:e.jsx(v,{placeholder:"Category"})}),e.jsxs(w,{children:[e.jsx(o,{value:"all",children:"All categories"}),i.map(s=>e.jsx(o,{value:String(s.id),children:s.name},s.id))]})]}),e.jsxs(b,{value:t.status??"all",onValueChange:s=>m({status:s==="all"?void 0:s}),children:[e.jsx(y,{className:"h-10 w-[160px]",children:e.jsx(v,{placeholder:"Status"})}),e.jsxs(w,{children:[e.jsx(o,{value:"all",children:"All statuses"}),Object.entries(l).map(([s,r])=>e.jsx(o,{value:s,children:r},s))]})]}),e.jsx(d,{type:"submit",variant:"secondary",size:"sm",className:"h-10 px-3",children:e.jsx(z,{className:"h-4 w-4"})})]}),e.jsxs(I,{children:[e.jsx(P,{asChild:!0,children:e.jsxs(d,{variant:"outline",size:"sm",className:"h-10",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Export"]})}),e.jsxs(R,{align:"end",className:"w-48",children:[e.jsxs(S,{onClick:()=>x("csv"),children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"CSV"]}),e.jsxs(S,{onClick:()=>x("json"),children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"JSON"]})]})]})]}),Object.keys(u).length>0&&e.jsxs(N,{children:[e.jsx(B,{children:e.jsx("h2",{className:"text-lg font-medium",children:"Summary by category"})}),e.jsx(g,{children:e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:Object.entries(u).map(([s,r])=>e.jsxs("div",{className:"rounded-lg border bg-muted/30 p-4",children:[e.jsx("p",{className:"font-medium",children:s}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:[r.count," asset",r.count===1?"":"s"]}),e.jsxs("p",{className:"mt-1 text-sm",children:["Book value: ",e.jsx("span",{className:"tabular-nums font-medium",children:n(r.total_book_value,"USD")})]}),e.jsxs("p",{className:"text-sm",children:["Accum. depreciation: ",e.jsx("span",{className:"tabular-nums",children:n(r.total_accumulated_depreciation,"USD")})]})]},s))})})]}),e.jsx(N,{children:e.jsx(g,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-muted/50",children:[e.jsx("th",{className:"text-left p-3 font-medium",children:"Name"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Category"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Purchase date"}),e.jsx("th",{className:"text-right p-3 font-medium",children:"Purchase price"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Currency"}),e.jsx("th",{className:"text-center p-3 font-medium",children:"Useful life"}),e.jsx("th",{className:"text-right p-3 font-medium",children:"Accum. depreciation"}),e.jsx("th",{className:"text-right p-3 font-medium",children:"Book value"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Status"})]})}),e.jsx("tbody",{children:a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"p-8 text-center text-muted-foreground",children:"No assets match the current filters."})}):a.map(s=>{var r;return e.jsxs("tr",{className:"border-b hover:bg-muted/30",children:[e.jsxs("td",{className:"p-3",children:[e.jsx(f,{href:c.route("assets.show",{asset:s.uuid}),className:"text-primary hover:underline font-medium",children:s.name}),e.jsx("span",{className:"text-muted-foreground block text-xs",children:s.asset_tag})]}),e.jsx("td",{className:"p-3",children:((r=s.category)==null?void 0:r.name)??"—"}),e.jsx("td",{className:"p-3",children:$(s.purchase_date)}),e.jsx("td",{className:"p-3 text-right tabular-nums",children:n(s.purchase_price,s.currency)}),e.jsx("td",{className:"p-3",children:s.currency}),e.jsx("td",{className:"p-3 text-center",children:s.useful_life_years!=null?`${s.useful_life_years} yr`:"—"}),e.jsx("td",{className:"p-3 text-right tabular-nums",children:n(s.accumulated_depreciation,s.currency)}),e.jsx("td",{className:"p-3 text-right tabular-nums font-medium",children:n(s.book_value,s.currency)}),e.jsx("td",{className:"p-3",children:e.jsx(E,{status:s.status,label:l[s.status]})})]},s.id)})})]})})})})]})]})}export{Ke as default};
