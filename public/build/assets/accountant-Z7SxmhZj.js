import{r as _,j as e,H as k,L as f,a as A}from"./app--rPLb1Wa.js";import{A as L}from"./app-layout-Dnm4xl_Y.js";import{B as d}from"./button-t6oEvNNW.js";import{C as N,a as B,c as g}from"./card-CKITB03R.js";import{I as U}from"./input-7hAbn_4K.js";import{u as F}from"./use-tenant-router-CdkPTyQ-.js";import{S as b,a as y,b as v,c as w,d as o}from"./select-ezPgkrJs.js";import{D as I,a as P,b as R,c as S}from"./dropdown-menu-tGwdyT5s.js";import{A as E}from"./asset-status-badge-BhKk4jMI.js";import{C as V}from"./calculator-P0k5NjtV.js";import{A as M}from"./arrow-left-Dbh3fK9n.js";import{S as z}from"./search-BVAKO67k.js";import{D as H}from"./download-BhP8u6Xb.js";import{F as O}from"./file-spreadsheet-C97JxiBG.js";import{F as T}from"./file-json-BgkkBOkO.js";/* empty css            */import"./breadcrumb-D_vSgZGN.js";import"./utils-DawFQoOT.js";import"./sheet-CrDhwUie.js";import"./index-CMqQocSw.js";import"./index-DdBBGQ2H.js";import"./index-BizbyHS1.js";import"./index-OBDDV7SX.js";import"./index-CiYhb_ol.js";import"./index-9nGA-rDe.js";import"./index-DBn22uq1.js";import"./x-5C1CNzet.js";import"./createLucideIcon-Dn2ECoQ0.js";import"./index-BNkycKvd.js";import"./index-B-ffABjE.js";import"./index-Y54OWJqv.js";import"./chevron-down-3TE5sHwq.js";import"./skeleton-nucNN7DL.js";import"./use-effective-tenant-BheL7R1D.js";import"./check-B7WA0u7K.js";import"./trash-2-CM4e-Rdn.js";import"./en-US-DSSwd-Ay.js";import"./endOfMonth-BNqLjwTF.js";import"./user-CAE3BrTq.js";import"./file-text-BV3sSqH6.js";import"./dollar-sign-iov7TVxI.js";import"./credit-card-D0dMZS3_.js";import"./mail-C4499bmE.js";import"./shield-DsM99oQg.js";import"./circle-alert-Bw4CcRkw.js";import"./package-DpMKRVkn.js";import"./users-DAp9UJ3w.js";import"./wallet-Idy0EFA4.js";import"./building-2-CZ3Ztb_0.js";import"./chevron-right-aR-LqB9c.js";import"./sonner-BeKZnWl-.js";import"./index-Dtar63yJ.js";import"./index-D1BNpUEz.js";import"./index-vfTxt5y-.js";import"./index-DKlkJ5f8.js";import"./badge-BytQ6YWm.js";function n(a,i){return a==null?"—":new Intl.NumberFormat(void 0,{style:"currency",currency:i||"USD"}).format(a)}function $(a){return a?new Date(a).toLocaleDateString():"—"}function J(a,i,t){const l=new URLSearchParams;return l.set("format",i),t.search&&l.set("search",t.search),t.category&&l.set("category",t.category),t.status&&l.set("status",t.status),`${a}?${l.toString()}`}function Ke({assets:a,categories:i,filters:t,statusOptions:l,categorySummary:u}){const c=F(),p=_.useRef(null),C=[{title:"Assets",href:c.route("assets.index")},{title:"Depreciation & P&L",href:c.route("assets.accountant")}],D=c.route("assets.accountant.export"),m=(s={})=>{var h,j;const r=(j=(h=p.current)==null?void 0:h.value)==null?void 0:j.trim();A.get(c.route("assets.accountant"),{search:r||void 0,category:t.category||void 0,status:t.status||void 0,...s})},x=s=>{const r=J(D,s,t);window.open(r,"_blank","noopener,noreferrer")};return e.jsxs(L,{breadcrumbs:C,children:[e.jsx(k,{title:"Depreciation & P&L"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-11 w-11 shrink-0 items-center justify-center rounded-xl bg-primary/10",children:e.jsx(V,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Depreciation & P&L"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Book value, accumulated depreciation, and export for accounting."})]})]}),e.jsx(d,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(f,{href:c.route("assets.index"),children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Back to assets"]})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("form",{className:"flex flex-wrap items-center gap-2",onSubmit:s=>{s.preventDefault(),m()},children:[e.jsx(U,{ref:p,name:"search",placeholder:"Search...",defaultValue:t.search,className:"h-10 w-[180px] sm:w-[200px]"}),e.jsxs(b,{value:t.category??"all",onValueChange:s=>m({category:s==="all"?void 0:s}),children:[e.jsx(y,{className:"h-10 w-[160px]",children:e.jsx(v,{placeholder:"Category"})}),e.jsxs(w,{children:[e.jsx(o,{value:"all",children:"All categories"}),i.map(s=>e.jsx(o,{value:String(s.id),children:s.name},s.id))]})]}),e.jsxs(b,{value:t.status??"all",onValueChange:s=>m({status:s==="all"?void 0:s}),children:[e.jsx(y,{className:"h-10 w-[160px]",children:e.jsx(v,{placeholder:"Status"})}),e.jsxs(w,{children:[e.jsx(o,{value:"all",children:"All statuses"}),Object.entries(l).map(([s,r])=>e.jsx(o,{value:s,children:r},s))]})]}),e.jsx(d,{type:"submit",variant:"secondary",size:"sm",className:"h-10 px-3",children:e.jsx(z,{className:"h-4 w-4"})})]}),e.jsxs(I,{children:[e.jsx(P,{asChild:!0,children:e.jsxs(d,{variant:"outline",size:"sm",className:"h-10",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Export"]})}),e.jsxs(R,{align:"end",className:"w-48",children:[e.jsxs(S,{onClick:()=>x("csv"),children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"CSV"]}),e.jsxs(S,{onClick:()=>x("json"),children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"JSON"]})]})]})]}),Object.keys(u).length>0&&e.jsxs(N,{children:[e.jsx(B,{children:e.jsx("h2",{className:"text-lg font-medium",children:"Summary by category"})}),e.jsx(g,{children:e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:Object.entries(u).map(([s,r])=>e.jsxs("div",{className:"rounded-lg border bg-muted/30 p-4",children:[e.jsx("p",{className:"font-medium",children:s}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:[r.count," asset",r.count===1?"":"s"]}),e.jsxs("p",{className:"mt-1 text-sm",children:["Book value: ",e.jsx("span",{className:"tabular-nums font-medium",children:n(r.total_book_value,"USD")})]}),e.jsxs("p",{className:"text-sm",children:["Accum. depreciation: ",e.jsx("span",{className:"tabular-nums",children:n(r.total_accumulated_depreciation,"USD")})]})]},s))})})]}),e.jsx(N,{children:e.jsx(g,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-muted/50",children:[e.jsx("th",{className:"text-left p-3 font-medium",children:"Name"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Category"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Purchase date"}),e.jsx("th",{className:"text-right p-3 font-medium",children:"Purchase price"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Currency"}),e.jsx("th",{className:"text-center p-3 font-medium",children:"Useful life"}),e.jsx("th",{className:"text-right p-3 font-medium",children:"Accum. depreciation"}),e.jsx("th",{className:"text-right p-3 font-medium",children:"Book value"}),e.jsx("th",{className:"text-left p-3 font-medium",children:"Status"})]})}),e.jsx("tbody",{children:a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"p-8 text-center text-muted-foreground",children:"No assets match the current filters."})}):a.map(s=>{var r;return e.jsxs("tr",{className:"border-b hover:bg-muted/30",children:[e.jsxs("td",{className:"p-3",children:[e.jsx(f,{href:c.route("assets.show",{asset:s.uuid}),className:"text-primary hover:underline font-medium",children:s.name}),e.jsx("span",{className:"text-muted-foreground block text-xs",children:s.asset_tag})]}),e.jsx("td",{className:"p-3",children:((r=s.category)==null?void 0:r.name)??"—"}),e.jsx("td",{className:"p-3",children:$(s.purchase_date)}),e.jsx("td",{className:"p-3 text-right tabular-nums",children:n(s.purchase_price,s.currency)}),e.jsx("td",{className:"p-3",children:s.currency}),e.jsx("td",{className:"p-3 text-center",children:s.useful_life_years!=null?`${s.useful_life_years} yr`:"—"}),e.jsx("td",{className:"p-3 text-right tabular-nums",children:n(s.accumulated_depreciation,s.currency)}),e.jsx("td",{className:"p-3 text-right tabular-nums font-medium",children:n(s.book_value,s.currency)}),e.jsx("td",{className:"p-3",children:e.jsx(E,{status:s.status,label:l[s.status]})})]},s.id)})})]})})})})]})]})}export{Ke as default};
