import{u as $,j as e,H as C}from"./app-D04Dztzg.js";import{A as N}from"./app-layout-C_naymNT.js";import{B as l}from"./button-DZPivG0c.js";import{I as h}from"./input-DOcNm42I.js";import{L as p}from"./label-RUXCefAA.js";import{C as u,a as j,b as x,c as g}from"./card-BiECpO3p.js";import{T as w,a as F,b as v,c as S}from"./tabs-sk7grPa5.js";import{S as T}from"./switch-Bu28YblC.js";import{t as b}from"./index-CwasXQq4.js";import{X as E}from"./x-Zd_QZ6W_.js";/* empty css            */import"./breadcrumb-EW6w0Tnx.js";import"./utils-DawFQoOT.js";import"./sheet-10OrOGMG.js";import"./index-CnJ5OywE.js";import"./index-ybapLptU.js";import"./index-C7jeomV-.js";import"./index-DhOecPJh.js";import"./index-QeErrECp.js";import"./index-39nAXQv3.js";import"./index-Dnop7anH.js";import"./index-DfZYuCB2.js";import"./index-ByPjEBNg.js";import"./index-BwMmloDF.js";import"./createLucideIcon-DQ1nCPNN.js";import"./dropdown-menu-CTrM84f_.js";import"./index-5Qd1E-Xg.js";import"./index-DxpSCYGk.js";import"./check-CXnK2_NP.js";import"./chevron-down-RccFG6I8.js";import"./skeleton-Y604-fIL.js";import"./use-effective-tenant-QBTvs0JY.js";import"./use-tenant-router-C1gTSJyt.js";import"./trash-2-bEjB-2Kd.js";import"./en-US-DSSwd-Ay.js";import"./endOfMonth-BNqLjwTF.js";import"./user-CHKOG5ae.js";import"./file-text-D9Mvcoy0.js";import"./dollar-sign-DAXZAp8e.js";import"./credit-card-DR0OTN7k.js";import"./mail-D5g0vBUi.js";import"./shield-DZ1jybk1.js";import"./circle-alert-DoebB800.js";import"./package-DgqiXCfS.js";import"./users-C90dJzc7.js";import"./wallet-BpEENWzu.js";import"./building-2-DAyvAnId.js";import"./chevron-right-BKyDHRej.js";import"./sonner-BZ9uEQDq.js";import"./index-wnnsRq2M.js";const L=[{title:"Admin",href:route("admin.dashboard")},{title:"Settings",href:route("admin.settings.system")},{title:"API Settings",href:route("admin.settings.api")}];function Fe({apiSettings:f}){const{data:o,setData:_,post:A,processing:y,errors:r}=$({apiSettings:f||[]}),k=a=>{a.preventDefault(),A(route("admin.settings.api.update"),{preserveScroll:!0,onSuccess:()=>{b.success("API settings updated successfully")},onError:()=>{b.error("Failed to update API settings")}})},n=(a,d,t)=>{const i=[...o.apiSettings||[]],s=i[a],P={...s,[d]:t,id:s.id,type:s.type,is_default:s.is_default,is_active:s.is_active,additional_data:s.additional_data};i[a]=P,_("apiSettings",i)},m=a=>{const d={id:Date.now(),name:"",type:a,api_key:"",api_secret:a==="payment"?"":null,webhook_url:a==="payment"?"":null,is_active:!0,is_default:!1,additional_data:null};_("apiSettings",[...o.apiSettings||[],d])},I=a=>{if(o.apiSettings[a].is_default){b.error("Default APIs cannot be deleted");return}const t=[...o.apiSettings||[]];t.splice(a,1),_("apiSettings",t)},c=a=>(o.apiSettings||[]).filter(t=>t.type===a).map((t,i)=>e.jsxs("div",{className:"space-y-4 mb-6 p-4 border rounded-lg relative",children:[!t.is_default&&e.jsx(l,{type:"button",variant:"ghost",size:"icon",className:"absolute top-2 right-2",onClick:()=>I(i),children:e.jsx(E,{className:"h-4 w-4"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:`name-${t.id}`,children:"Name"}),e.jsx(h,{id:`name-${t.id}`,value:t.name,onChange:s=>n(i,"name",s.target.value),className:r[`apiSettings.${i}.name`]?"border-red-500":"",disabled:t.is_default}),r[`apiSettings.${i}.name`]&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r[`apiSettings.${i}.name`]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:`api_key-${t.id}`,children:"API Key"}),e.jsx(h,{id:`api_key-${t.id}`,type:"password",value:t.api_key,onChange:s=>n(i,"api_key",s.target.value),className:r[`apiSettings.${i}.api_key`]?"border-red-500":""}),r[`apiSettings.${i}.api_key`]&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r[`apiSettings.${i}.api_key`]})]})]}),a==="payment"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:`api_secret-${t.id}`,children:"API Secret"}),e.jsx(h,{id:`api_secret-${t.id}`,type:"password",value:t.api_secret||"",onChange:s=>n(i,"api_secret",s.target.value),className:r[`apiSettings.${i}.api_secret`]?"border-red-500":""}),r[`apiSettings.${i}.api_secret`]&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r[`apiSettings.${i}.api_secret`]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:`webhook_url-${t.id}`,children:"Webhook URL"}),e.jsx(h,{id:`webhook_url-${t.id}`,value:t.webhook_url||"",onChange:s=>n(i,"webhook_url",s.target.value),className:r[`apiSettings.${i}.webhook_url`]?"border-red-500":""}),r[`apiSettings.${i}.webhook_url`]&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r[`apiSettings.${i}.webhook_url`]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{id:`is_active-${t.id}`,checked:t.is_active,onCheckedChange:s=>n(i,"is_active",s)}),e.jsx(p,{htmlFor:`is_active-${t.id}`,children:"Active"})]})]},t.id));return e.jsxs(N,{breadcrumbs:L,children:[e.jsx(C,{title:"API Settings"}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:e.jsxs("form",{onSubmit:k,children:[e.jsxs(w,{defaultValue:"payment",className:"w-full",children:[e.jsxs(F,{className:"mb-4",children:[e.jsx(v,{value:"payment",children:"Payment APIs"}),e.jsx(v,{value:"ai",children:"AI APIs"}),e.jsx(v,{value:"email",children:"Email APIs"}),e.jsx(v,{value:"other",children:"Other APIs"})]}),e.jsx(S,{value:"payment",children:e.jsxs(u,{children:[e.jsx(j,{children:e.jsx(x,{children:"Payment APIs"})}),e.jsxs(g,{children:[c("payment"),e.jsx(l,{type:"button",variant:"outline",onClick:()=>m("payment"),children:"Add Payment API"})]})]})}),e.jsx(S,{value:"ai",children:e.jsxs(u,{children:[e.jsx(j,{children:e.jsx(x,{children:"AI APIs"})}),e.jsxs(g,{children:[c("ai"),e.jsx(l,{type:"button",variant:"outline",onClick:()=>m("ai"),children:"Add AI API"})]})]})}),e.jsx(S,{value:"email",children:e.jsxs(u,{children:[e.jsx(j,{children:e.jsx(x,{children:"Email APIs"})}),e.jsxs(g,{children:[c("email"),e.jsx(l,{type:"button",variant:"outline",onClick:()=>m("email"),children:"Add Email API"})]})]})}),e.jsx(S,{value:"other",children:e.jsxs(u,{children:[e.jsx(j,{children:e.jsx(x,{children:"Other APIs"})}),e.jsxs(g,{children:[c("other"),e.jsx(l,{type:"button",variant:"outline",onClick:()=>m("other"),children:"Add Other API"})]})]})})]}),e.jsx("div",{className:"mt-6",children:e.jsx(l,{type:"submit",disabled:y,children:"Save Changes"})})]})})]})}export{Fe as default};
