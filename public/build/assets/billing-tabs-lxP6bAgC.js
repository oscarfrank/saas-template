import{r as N,u as T,j as e,a as b}from"./app-BCbVRjYH.js";import{T as k,a as B,b as h,c as u}from"./tabs-CNMLT0NG.js";import{C as t,a as i,b as d,d as c,c as o}from"./card-BD7iHYUQ.js";import{B as l}from"./button-uRfG0SJk.js";import{t as C}from"./index-DQu8XgdM.js";import{L as D}from"./label-B0XYP5fN.js";import{I as E}from"./input-CrGy8JR3.js";import{C as $}from"./credit-card-BcosqvxM.js";import{U as M}from"./user-B55N5piZ.js";import{c as A}from"./createLucideIcon-GhyqP1ys.js";/* empty css            */import"./index-D8qEZ9Gx.js";import"./index-B-AhuyaU.js";import"./index-CsWEytiP.js";import"./index-BUJG5R3i.js";import"./index-CGjHmAMw.js";import"./index-J5wWsuif.js";import"./utils-DawFQoOT.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],U=A("Receipt",L);function le({subscription:a,paymentMethods:j=[],invoices:p=[],user:P,plans:S={}}){const[f,y]=N.useState("monthly"),[v,w]=N.useState(null),[m,F]=N.useState(""),g=T({price_id:"",plan_id:null}),x=P||{name:"Guest User",email:"guest@example.com",billing_address:void 0},_=S[f]||[],I=s=>r=>{r.preventDefault(),b.post("/checkout/subscription",{price_id:s.provider_plans.stripe.price_id,plan_id:s.id},{preserveScroll:!0,preserveState:!0,onSuccess:n=>{n.url},onError:n=>{console.error("Payment error:",n),C.error("Failed to initiate payment. Please try again.")}})};return e.jsxs(k,{defaultValue:"plans",className:"w-full",children:[e.jsxs(B,{className:"grid w-full grid-cols-4",children:[e.jsx(h,{value:"plans",className:"cursor-pointer",children:"Plans"}),e.jsx(h,{value:"payment",className:"cursor-pointer",children:"Payment Method"}),e.jsx(h,{value:"billing",className:"cursor-pointer",children:"Billing Info"}),e.jsx(h,{value:"invoices",className:"cursor-pointer",children:"Invoices"})]}),e.jsxs(u,{value:"plans",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-center space-x-4 mb-6",children:[e.jsx(l,{variant:f==="monthly"?"default":"outline",onClick:()=>y("monthly"),children:"Monthly"}),e.jsx(l,{variant:f==="yearly"?"default":"outline",onClick:()=>y("yearly"),children:"Yearly (Save 20%)"})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:_.length>0?_.map(s=>{var r;return e.jsx("form",{onSubmit:I(s),children:e.jsxs(t,{className:`${s.is_featured?"border-primary":""} 
                                        ${(a==null?void 0:a.plan_id)===s.id?"ring-2 ring-primary":""}
                                        ${v===s.id?"ring-2 ring-primary":""}
                                        cursor-pointer transition-all duration-200 hover:shadow-lg`,onClick:()=>w(s.id),children:[e.jsxs(i,{children:[e.jsx(d,{children:s.name}),e.jsxs(c,{children:[e.jsx("span",{className:"text-2xl font-bold",children:s.formatted_price||`${((r=s.currency)==null?void 0:r.symbol)||"$"}${s.price}`}),"/",s.period_label]})]}),e.jsxs(o,{children:[e.jsx("ul",{className:"space-y-2",children:s.features.map(n=>e.jsxs("li",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2",children:"âœ“"}),n]},n))}),e.jsx(l,{type:"submit",className:"mt-4 w-full",variant:(a==null?void 0:a.plan_id)===s.id?"outline":"default",disabled:g.processing||(a==null?void 0:a.plan_id)===s.id,children:g.processing&&v===s.id?"Processing...":(a==null?void 0:a.plan_id)===s.id?"Current Plan":"Upgrade"})]})]})},s.id)}):e.jsx("div",{className:"col-span-3 text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No subscription plans available at the moment."})})})]}),e.jsx(u,{value:"payment",className:"space-y-4",children:e.jsxs(t,{children:[e.jsxs(i,{children:[e.jsx(d,{children:"Payment Methods"}),e.jsx(c,{children:"Manage your payment methods and billing information."})]}),e.jsx(o,{children:j&&j.length>0?j.map(s=>e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx($,{className:"h-8 w-8"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[s.card.brand," ending in ",s.card.last4]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Expires ",s.card.exp_month,"/",s.card.exp_year]})]}),e.jsx(l,{variant:"outline",className:"ml-auto",children:"Update"})]},s.id)):e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"No payment methods found"}),e.jsx(l,{className:"mt-2",children:"Add Payment Method"})]})})]})}),e.jsx(u,{value:"billing",className:"space-y-4",children:e.jsxs(t,{children:[e.jsxs(i,{children:[e.jsx(d,{children:"Billing Information"}),e.jsx(c,{children:"Your billing address and contact information."})]}),e.jsx(o,{children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(M,{className:"h-8 w-8"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:x.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:x.email}),x.billing_address&&e.jsx("p",{className:"text-sm text-muted-foreground",children:x.billing_address})]}),e.jsx(l,{variant:"outline",className:"ml-auto",children:"Edit"})]})})]})}),e.jsxs(u,{value:"invoices",className:"space-y-4",children:[e.jsxs(t,{children:[e.jsxs(i,{children:[e.jsx(d,{children:"Recent Invoices"}),e.jsx(c,{children:"View and download your recent invoices."})]}),e.jsx(o,{children:p&&p.length>0?e.jsx("div",{className:"space-y-4",children:p.map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(U,{className:"h-8 w-8"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:["Invoice #",s.number]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(s.date).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("p",{className:"font-medium",children:["$",(s.amount_paid/100).toFixed(2)]}),e.jsx(l,{variant:"outline",size:"sm",children:"Download"})]})]},s.id))}):e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-muted-foreground",children:"No invoices found"})})})]}),e.jsxs(t,{children:[e.jsxs(i,{children:[e.jsx(d,{children:"Fund Account Balance"}),e.jsx(c,{children:"Add funds to your account balance."})]}),e.jsx(o,{children:e.jsx("form",{onSubmit:s=>{s.preventDefault(),b.post("/payment/fund-balance",{amount:m},{preserveScroll:!0,preserveState:!0,onSuccess:r=>{r.url&&(window.location.href=r.url)},onError:r=>{console.error("Payment error:",r),C.error("Failed to initiate payment. Please try again.")}})},className:"space-y-4",children:e.jsxs("div",{className:"flex items-end gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(D,{htmlFor:"amount",children:"Amount"}),e.jsx(E,{id:"amount",type:"number",min:"5",max:"10000",step:"0.01",value:m,onChange:s=>F(s.target.value),placeholder:"Enter amount",required:!0})]}),e.jsx(l,{type:"submit",disabled:!m||parseFloat(m)<5,children:"Fund Balance"})]})})})]})]})]})}export{le as default};
