import{b as q,j as e,H as E,L as N,a as P}from"./app-C6kPN11i.js";import{A as T}from"./app-layout-D7Ym20yP.js";import{B as c}from"./button-BpcDdXY5.js";import{C as p,a as j,b as g,d as y}from"./card-BmLtWeUg.js";import{I as n}from"./input-DeRGwPqG.js";import{L as i}from"./label-DjBGQ4hv.js";import{u as L}from"./use-tenant-router-DTqtlbGV.js";import{S as f,a as v,b as _,c as k,d as b}from"./select-Ccun-8aA.js";import{H as V}from"./constants-DMk5EQYl.js";import{A as M}from"./arrow-left-DfTOTK5_.js";import{B as O}from"./briefcase-Ci3guiLD.js";import{B as J}from"./banknote-BMVXe7Mm.js";import{T as A}from"./trash-2-CxGNVkTA.js";import{P as F}from"./plus-9u2VAGZc.js";import{C as W}from"./credit-card-DqGQHV60.js";import{U as G}from"./user-B4Zct4sF.js";import{I as K}from"./image-3rYJ5bUQ.js";/* empty css            */import"./breadcrumb-T3ZEscMa.js";import"./utils-DawFQoOT.js";import"./sheet-DTohGHug.js";import"./index-BAMDKCYP.js";import"./index-BgupMaT4.js";import"./index-BAwu540p.js";import"./index-B6IO7GeI.js";import"./index-C7NICwH1.js";import"./index-D4LQi-WW.js";import"./index-BUDeVy67.js";import"./x-CBDS_5l3.js";import"./createLucideIcon-Btrq-JEB.js";import"./index-qNm-4KWi.js";import"./index-DjhqQPoh.js";import"./index-DhnENxrq.js";import"./dropdown-menu-D3Uldfay.js";import"./index-CNSJNdLA.js";import"./index-DqvV1WAh.js";import"./check-ClCxYYgj.js";import"./chevron-down-B2X-k1Lh.js";import"./skeleton-COOtXclS.js";import"./use-effective-tenant-BWuu0ab1.js";import"./en-US-DSSwd-Ay.js";import"./endOfMonth-BNqLjwTF.js";import"./file-text-Dt63_vzy.js";import"./dollar-sign-B1EcXlzZ.js";import"./mail-CxIpkxxd.js";import"./shield-JlQ_48fz.js";import"./circle-alert-CphltCJl.js";import"./package-BxdLO7jd.js";import"./users-Hp18PoY4.js";import"./wallet-Rygk2Esi.js";import"./building-2-BJ5JnpgN.js";import"./chevron-right-DDsMzLk9.js";import"./sonner-Dk1iPVCY.js";import"./index-BdMXpxBe.js";import"./index-DHeuMB84.js";const Q={user_id:"",employee_id:"",department:"",job_title:"",salary:"",salary_currency:"USD",pay_frequency:"",salary_pay_day:"",allowances:[],deductions:[],passport_photo:null,tax_id:"",national_id:"",bank_name:"",bank_account_number:"",bank_account_name:"",started_at:"",ended_at:""};function Ye({users:w,preSelectUser:m=null}){const o=L(),H=[{title:"HR",href:o.route("hr.staff.index")},{title:"Staff",href:o.route("hr.staff.index")},{title:"Add HR details",href:o.route("hr.staff.create")}],R={...Q,user_id:(m==null?void 0:m.id)??""},{data:t,setData:s,processing:C,errors:x}=q(R),u=Array.isArray(t.allowances)?t.allowances:[],h=Array.isArray(t.deductions)?t.deductions:[],S=a=>{a.preventDefault();const r={...t,allowances:u.filter(l=>l.name.trim()&&l.amount!==""&&Number(l.amount)>=0),deductions:h.filter(l=>l.name.trim()&&l.amount!==""&&Number(l.amount)>=0)};P.post(o.route("hr.staff.store"),r,{preserveScroll:!0,forceFormData:!0})},D=()=>s("allowances",[...u,{name:"",amount:""}]),I=a=>s("allowances",u.filter((r,l)=>l!==a)),z=()=>s("deductions",[...h,{name:"",amount:""}]),B=a=>s("deductions",h.filter((r,l)=>l!==a));return e.jsxs(T,{breadcrumbs:H,children:[e.jsx(E,{title:"Add HR details"}),e.jsxs("div",{className:"flex flex-1 flex-col",children:[e.jsx("div",{className:"border-b bg-gradient-to-b from-muted/30 to-background",children:e.jsx("div",{className:"mx-auto max-w-6xl px-4 py-6 sm:px-6",children:e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(c,{variant:"ghost",size:"icon",className:"shrink-0",asChild:!0,children:e.jsx(N,{href:o.route("hr.staff.index"),children:e.jsx(M,{className:"h-4 w-4"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold tracking-tight",children:"Add HR details"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add employment, compensation, and identity details for an organization member."}),m&&e.jsxs("p",{className:"mt-1 text-sm font-medium text-muted-foreground",children:["Adding for: ",m.name," (",m.email,")"]})]})]}),e.jsx(c,{variant:"outline",size:"sm",asChild:!0,children:e.jsx(N,{href:o.route("hr.staff.index"),children:"Cancel"})})]})})}),e.jsx("div",{className:"mx-auto w-full max-w-6xl flex-1 px-4 py-6 sm:px-6",children:e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[Object.keys(x).length>0&&e.jsxs("div",{className:"rounded-xl border border-destructive/30 bg-destructive/5 px-4 py-3 text-sm text-destructive",children:[e.jsx("p",{className:"font-medium",children:"Please fix the following errors:"}),e.jsx("ul",{className:"mt-1.5 list-inside list-disc space-y-0.5",children:Object.entries(x).map(([a,r])=>e.jsx("li",{children:r},a))})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-6 lg:col-span-2",children:[e.jsxs(p,{className:"border-muted/50 shadow-sm",children:[e.jsx(j,{className:"pb-3",children:e.jsxs(g,{className:"flex items-center gap-2 text-base",children:[e.jsx("span",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-primary/10 text-primary",children:e.jsx(O,{className:"h-4 w-4"})}),"Employment"]})}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"employee_id",children:"Employee ID"}),e.jsx(n,{id:"employee_id",value:t.employee_id??"",onChange:a=>s("employee_id",a.target.value),className:"bg-background"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"department",children:"Department"}),e.jsx(n,{id:"department",value:t.department??"",onChange:a=>s("department",a.target.value),className:"bg-background"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"job_title",children:"Job title"}),e.jsx(n,{id:"job_title",value:t.job_title??"",onChange:a=>s("job_title",a.target.value),className:"bg-background"})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"started_at",children:"Start date"}),e.jsx(n,{id:"started_at",type:"date",value:String(t.started_at??""),onChange:a=>s("started_at",a.target.value),className:"bg-background"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"ended_at",children:"End date"}),e.jsx(n,{id:"ended_at",type:"date",value:String(t.ended_at??""),onChange:a=>s("ended_at",a.target.value),className:"bg-background"})]})]})]})]}),e.jsxs(p,{className:"border-muted/50 shadow-sm",children:[e.jsx(j,{className:"pb-3",children:e.jsxs(g,{className:"flex items-center gap-2 text-base",children:[e.jsx("span",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-primary/10 text-primary",children:e.jsx(J,{className:"h-4 w-4"})}),"Compensation"]})}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"salary",children:"Salary"}),e.jsx(n,{id:"salary",type:"number",step:"0.01",min:"0",value:t.salary??"",onChange:a=>s("salary",a.target.value),className:"bg-background"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"salary_currency",children:"Currency"}),e.jsxs(f,{value:t.salary_currency,onValueChange:a=>s("salary_currency",a),children:[e.jsx(v,{id:"salary_currency",className:"bg-background",children:e.jsx(_,{})}),e.jsx(k,{children:V.map(a=>e.jsx(b,{value:a.code,children:a.label},a.code))})]})]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"pay_frequency",children:"Pay frequency"}),e.jsxs(f,{value:t.pay_frequency||void 0,onValueChange:a=>s("pay_frequency",a),children:[e.jsx(v,{id:"pay_frequency",className:"bg-background",children:e.jsx(_,{placeholder:"Select"})}),e.jsxs(k,{children:[e.jsx(b,{value:"weekly",children:"Weekly"}),e.jsx(b,{value:"bi_weekly",children:"Bi-weekly"}),e.jsx(b,{value:"monthly",children:"Monthly"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"salary_pay_day",children:"Pay day (day of month)"}),e.jsx(n,{id:"salary_pay_day",type:"number",min:1,max:31,placeholder:"e.g. 25",value:t.salary_pay_day===""||t.salary_pay_day===void 0?"":String(t.salary_pay_day),onChange:a=>s("salary_pay_day",a.target.value===""?"":Number(a.target.value)),className:"bg-background"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Allowances"}),u.map((a,r)=>e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx(n,{placeholder:"Name (e.g. Housing)",value:a.name,onChange:l=>{const d=[...u];d[r]={...d[r],name:l.target.value},s("allowances",d)},className:"bg-background"}),e.jsx(n,{type:"number",step:"0.01",min:"0",placeholder:"Amount",className:"w-28 bg-background",value:a.amount,onChange:l=>{const d=[...u];d[r]={...d[r],amount:l.target.value},s("allowances",d)}}),e.jsx(c,{type:"button",variant:"ghost",size:"icon",className:"shrink-0 text-muted-foreground hover:text-destructive",onClick:()=>I(r),children:e.jsx(A,{className:"h-4 w-4"})})]},r)),e.jsxs(c,{type:"button",variant:"outline",size:"sm",onClick:D,className:"mt-1",children:[e.jsx(F,{className:"mr-1.5 h-4 w-4"})," Add allowance"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Deductions"}),h.map((a,r)=>e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx(n,{placeholder:"Name (e.g. Tax, Pension)",value:a.name,onChange:l=>{const d=[...h];d[r]={...d[r],name:l.target.value},s("deductions",d)},className:"bg-background"}),e.jsx(n,{type:"number",step:"0.01",min:"0",placeholder:"Amount",className:"w-28 bg-background",value:a.amount,onChange:l=>{const d=[...h];d[r]={...d[r],amount:l.target.value},s("deductions",d)}}),e.jsx(c,{type:"button",variant:"ghost",size:"icon",className:"shrink-0 text-muted-foreground hover:text-destructive",onClick:()=>B(r),children:e.jsx(A,{className:"h-4 w-4"})})]},r)),e.jsxs(c,{type:"button",variant:"outline",size:"sm",onClick:z,className:"mt-1",children:[e.jsx(F,{className:"mr-1.5 h-4 w-4"})," Add deduction"]})]})]})]}),e.jsxs(p,{className:"border-muted/50 shadow-sm",children:[e.jsx(j,{className:"pb-3",children:e.jsxs(g,{className:"flex items-center gap-2 text-base",children:[e.jsx("span",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-primary/10 text-primary",children:e.jsx(W,{className:"h-4 w-4"})}),"Identity & banking"]})}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"tax_id",children:"Tax ID"}),e.jsx(n,{id:"tax_id",value:t.tax_id??"",onChange:a=>s("tax_id",a.target.value),className:"bg-background"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"national_id",children:"National ID"}),e.jsx(n,{id:"national_id",value:t.national_id??"",onChange:a=>s("national_id",a.target.value),className:"bg-background"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"bank_name",children:"Bank name"}),e.jsx(n,{id:"bank_name",value:t.bank_name??"",onChange:a=>s("bank_name",a.target.value),className:"bg-background"})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"bank_account_number",children:"Account number"}),e.jsx(n,{id:"bank_account_number",value:t.bank_account_number??"",onChange:a=>s("bank_account_number",a.target.value),className:"bg-background"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"bank_account_name",children:"Account name"}),e.jsx(n,{id:"bank_account_name",value:t.bank_account_name??"",onChange:a=>s("bank_account_name",a.target.value),className:"bg-background"})]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(c,{type:"submit",disabled:C,children:C?"Addingâ€¦":"Add HR details"}),e.jsx(c,{type:"button",variant:"outline",asChild:!0,children:e.jsx(N,{href:o.route("hr.staff.index"),children:"Cancel"})})]})]}),e.jsxs("div",{className:"space-y-6 lg:col-span-1",children:[e.jsxs(p,{className:"border-muted/50 shadow-sm",children:[e.jsxs(j,{className:"pb-3",children:[e.jsxs(g,{className:"flex items-center gap-2 text-base",children:[e.jsx("span",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-primary/10 text-primary",children:e.jsx(G,{className:"h-4 w-4"})}),"Member"]}),e.jsx("p",{className:"text-sm font-normal text-muted-foreground",children:"Select the organization member to add HR details for."})]}),e.jsxs(y,{className:"space-y-2",children:[e.jsxs(f,{required:!0,value:t.user_id===""?void 0:String(t.user_id),onValueChange:a=>s("user_id",a===""?"":Number(a)),disabled:!!m,children:[e.jsx(v,{id:"user_id",className:"bg-background",children:e.jsx(_,{placeholder:"Select member"})}),e.jsx(k,{children:w.map(a=>e.jsxs(b,{value:String(a.id),children:[a.name," (",a.email,")"]},a.id))})]}),w.length===0&&e.jsx("p",{className:"text-sm text-amber-600",children:"No members without HR details. Everyone already has an HR record."}),x.user_id&&e.jsx("p",{className:"text-sm text-destructive",children:x.user_id})]})]}),e.jsxs(p,{className:"border-muted/50 shadow-sm",children:[e.jsx(j,{className:"pb-3",children:e.jsxs(g,{className:"flex items-center gap-2 text-base",children:[e.jsx("span",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-primary/10 text-primary",children:e.jsx(K,{className:"h-4 w-4"})}),"Passport photo"]})}),e.jsxs(y,{children:[e.jsx(n,{id:"passport_photo",type:"file",accept:"image/*",className:"bg-background",onChange:a=>{var r;return s("passport_photo",((r=a.target.files)==null?void 0:r[0])??null)}}),x.passport_photo&&e.jsx("p",{className:"mt-2 text-sm text-destructive",children:x.passport_photo})]})]})]})]})]})})]})]})}export{Ye as default};
