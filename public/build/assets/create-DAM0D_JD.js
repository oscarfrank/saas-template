import{r as m,j as e,H as O,L as A,a as j}from"./app-BCbVRjYH.js";import{B as i}from"./button-uRfG0SJk.js";import{I as p}from"./input-CrGy8JR3.js";import{L as u}from"./label-B0XYP5fN.js";import{C as M,a as E,b as U,d as T,c as G,e as R}from"./card-BD7iHYUQ.js";import{t as x}from"./index-DQu8XgdM.js";import{B as q}from"./building-2-CxDNleOb.js";import{G as H}from"./globe-BQPdIvwZ.js";import{U as Y}from"./upload-BYoUKMoT.js";import{M as _}from"./mail-hckPM3CY.js";import{P as J}from"./plus-CdWaCr78.js";import{X as $}from"./x-D611PGoW.js";/* empty css            */import"./utils-DawFQoOT.js";import"./createLucideIcon-GhyqP1ys.js";function ce({errors:c={},pendingInvites:h=[]}){const[a,f]=m.useState(1),[v,C]=m.useState(null),[d,N]=m.useState([]),[o,g]=m.useState({email:"",role:"member"}),[l,z]=m.useState({name:"",slug:""}),S=s=>{var t;const r=(t=s.target.files)==null?void 0:t[0];if(r){const n=new FileReader;n.onloadend=()=>{C(n.result)},n.readAsDataURL(r)}},I=()=>{o.email&&!d.some(s=>s.email===o.email)&&(N([...d,o]),g({email:"",role:"member"}))},L=s=>{N(d.filter(r=>r.email!==s))},k=s=>{j.post(route("tenants.invites.accept",{invite:s}),{},{onSuccess:()=>{x.success("Invite accepted successfully"),j.reload()},onError:r=>{x.error(r.message||"Failed to accept invite")}})},D=s=>{var w;if(s.preventDefault(),a!==3){s.preventDefault();return}const r={name:l.name,slug:l.slug,invites:d||[]};console.log("Data before submission:",r);const t=new FormData;t.append("name",r.name),t.append("slug",r.slug),t.append("invites",JSON.stringify(r.invites));const n=document.getElementById("logo");(w=n==null?void 0:n.files)!=null&&w[0]&&t.append("logo",n.files[0]),console.log("FormData entries:",{name:t.get("name"),slug:t.get("slug"),invites:t.get("invites"),hasLogo:!!t.get("logo")}),j.post(route("tenants.store"),t,{onSuccess:()=>{x.success("Organization created successfully")},onError:B=>{console.error("Submission errors:",B),x.error("Failed to create organization")}})},b=s=>{const{name:r,value:t}=s.target;z(n=>({...n,[r]:t}))},y=s=>{if(s&&s.preventDefault(),a===1&&(!l.name||!l.slug)){x.error("Please fill in all required fields");return}f(a+1)},F=s=>{s&&s.preventDefault(),f(a-1)},P=()=>{switch(a){case 1:return l.name&&l.slug;case 2:return!0;case 3:return!0;default:return!1}};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(O,{title:"Create Organization"}),e.jsxs("div",{className:"container max-w-3xl mx-auto py-12 px-4",children:[h.length>0&&e.jsxs("div",{className:"mb-8 rounded-lg border bg-card p-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"You have pending invites"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["You've been invited to join ",h.length," organization",h.length>1?"s":""]})]}),e.jsx("div",{className:"space-y-2",children:h.map(s=>e.jsxs("div",{className:"flex items-center justify-between rounded-md border p-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.organization}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.role.charAt(0).toUpperCase()+s.role.slice(1)," â€¢ Invited ",s.invited_at]})]}),e.jsx(i,{size:"sm",onClick:()=>k(s.id),children:"Accept"})]},s.id))})]}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Create Your Organization"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:"Set up your organization in just a few steps"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center justify-between",children:[1,2,3].map(s=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex h-8 w-8 items-center justify-center rounded-full ${a===s?"bg-primary text-primary-foreground ring-4 ring-primary/20":a>s?"bg-primary/20 text-primary":"bg-muted text-muted-foreground"}`,children:s}),s<3&&e.jsx("div",{className:`h-0.5 w-16 ${a>s?"bg-primary":"bg-muted"}`})]},s))}),e.jsxs("div",{className:"mt-2 flex justify-between text-sm text-muted-foreground",children:[e.jsx("span",{children:"Basic Info"}),e.jsx("span",{children:"Logo"}),e.jsx("span",{children:"Team Members"})]})]}),e.jsxs(M,{children:[e.jsxs(E,{children:[e.jsxs(U,{children:[a===1&&"Basic Information",a===2&&"Organization Logo",a===3&&"Invite Team Members"]}),e.jsxs(T,{children:[a===1&&"Let's start with the essential details",a===2&&"Add your organization's logo (optional)",a===3&&"Invite your team members to join (optional)"]})]}),e.jsx(G,{children:e.jsxs("form",{id:"create-organization-form",onSubmit:D,className:"space-y-6",children:[a===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(u,{htmlFor:"name",className:"text-base",children:["Organization Name ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(p,{id:"name",name:"name",className:"pl-9",placeholder:"Enter your organization name",required:!0,value:l.name,onChange:b})]}),c.name&&e.jsx("p",{className:"text-sm text-destructive",children:c.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(u,{htmlFor:"slug",className:"text-base",children:["Organization Slug ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(H,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(p,{id:"slug",name:"slug",className:"pl-9",placeholder:"your-organization",required:!0,value:l.slug,onChange:b})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This will be used in URLs and API endpoints"}),c.slug&&e.jsx("p",{className:"text-sm text-destructive",children:c.slug})]})]}),a===2&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"logo",className:"text-base",children:"Organization Logo"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"relative h-24 w-24 rounded-lg border-2 border-dashed border-muted-foreground/25 p-2",children:v?e.jsx("img",{src:v,alt:"Logo preview",className:"h-full w-full rounded-md object-cover"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center",children:e.jsx(Y,{className:"h-8 w-8 text-muted-foreground"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(p,{id:"logo",name:"logo",type:"file",accept:"image/*",onChange:S,className:"cursor-pointer"}),e.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Upload your organization logo (PNG, JPG up to 2MB)"})]})]}),c.logo&&e.jsx("p",{className:"text-sm text-destructive",children:c.logo})]})}),a===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{className:"text-base",children:"Invite Team Members"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(_,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(p,{type:"email",placeholder:"colleague@company.com",value:o.email,onChange:s=>g({...o,email:s.target.value}),className:"pl-9"})]}),e.jsxs("select",{value:o.role,onChange:s=>g({...o,role:s.target.value}),className:"rounded-md border border-input bg-background px-3 py-2",children:[e.jsx("option",{value:"member",children:"Member"}),e.jsx("option",{value:"admin",children:"Admin"})]}),e.jsx(i,{type:"button",onClick:I,children:e.jsx(J,{className:"h-4 w-4"})})]})]}),d.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{className:"text-sm text-muted-foreground",children:"Pending Invites"}),e.jsx("div",{className:"space-y-2",children:d.map(s=>e.jsxs("div",{className:"flex items-center justify-between rounded-md border p-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.email}),e.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:s.role})]}),e.jsx(i,{type:"button",variant:"ghost",size:"sm",onClick:()=>L(s.email),children:e.jsx($,{className:"h-4 w-4"})})]},s.email))})]})]}),e.jsxs(R,{className:"flex justify-between space-x-4 pt-6",children:[e.jsx("div",{children:a>1&&e.jsx(i,{type:"button",variant:"outline",onClick:F,children:"Back"})}),e.jsx("div",{className:"flex gap-2",children:a<3?e.jsxs(e.Fragment,{children:[(a===2||a===3)&&e.jsx(i,{type:"button",variant:"outline",onClick:y,children:"Skip"}),e.jsx(i,{type:"button",onClick:y,disabled:!P(),children:"Next"})]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{href:route("tenants.index"),children:e.jsx(i,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(i,{type:"submit",children:"Create Organization"})]})})]})]})})]})]})]})}export{ce as default};
