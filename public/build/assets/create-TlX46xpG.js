import{r as U,u as I,j as e,H as V,L as b}from"./app-DU4M08QO.js";import{A as T}from"./app-layout-CWJDu2yd.js";import{B as v}from"./button-0DWS1uOF.js";import{C as p,c as x,a as j}from"./card-CIVp5v17.js";import{I as l}from"./input-z-FCfDx3.js";import{L as t}from"./label-BsVN1GsZ.js";import{T as y}from"./textarea-C7BpPhvr.js";import{u as z}from"./use-tenant-router-mhkU5Kgb.js";import{S as d,a as n,b as o,c as m,d as c}from"./select-DVGvg1wx.js";import{A as G}from"./arrow-left-CFh-5xCY.js";import{C as H}from"./camera-pK-_BPwD.js";import{P as M}from"./package-ChfYgdRA.js";import{U as q}from"./user-tVN0-8fp.js";import{B as E}from"./banknote-1QeY4Wzm.js";import{F as J}from"./file-text-BaK0CXIP.js";/* empty css            */import"./breadcrumb-BSvnjDea.js";import"./utils-DawFQoOT.js";import"./sheet-CHL5JyIf.js";import"./index-ksG8cN4f.js";import"./index-Ba8EDFfi.js";import"./index-DWOVOz5G.js";import"./index-BfArzEZR.js";import"./index-Dax8b012.js";import"./index-BuAmfKhH.js";import"./index-DVV6TkzN.js";import"./x-DVBtjuUJ.js";import"./createLucideIcon-Kjqtfux8.js";import"./index-CY-eh05M.js";import"./index-DdLmsglv.js";import"./index-Dy8zP7tC.js";import"./dropdown-menu-BSZHQ9yV.js";import"./index-C31rQuzh.js";import"./index-ELRl1PxQ.js";import"./check-CljcYcVc.js";import"./chevron-down-DOpVs1Mm.js";import"./skeleton-DeAfgcQK.js";import"./use-effective-tenant-6xYuTafE.js";import"./trash-2-C9dHTECi.js";import"./en-US-DSSwd-Ay.js";import"./endOfMonth-BNqLjwTF.js";import"./dollar-sign-DzSGN3WH.js";import"./credit-card-CRs7L-78.js";import"./mail-CwNPBuud.js";import"./shield-IA8j3DE0.js";import"./circle-alert-CvqXQmI-.js";import"./users-Cd4kg-Sk.js";import"./wallet-CqZJpKq_.js";import"./building-2-CdICHkKN.js";import"./chevron-right-CrQYE_m4.js";import"./sonner-Dh23Qk9O.js";import"./index-rHsITjXj.js";import"./index-sRFl2c6N.js";function Je({categories:C,users:S,statusOptions:w,conditionOptions:F,currencyOptions:N,default_currency:g="USD",default_sold_currency:A,default_asset_status:D="available"}){const h=z(),P=U.useRef(null),L=[{title:"Assets",href:h.route("assets.index")},{title:"Add asset",href:h.route("assets.create")}],{data:a,setData:r,post:B,processing:_,errors:u}=I({name:"",asset_tag:"",asset_category_id:"",serial_number:"",description:"",status:D,assigned_to_user_id:"",purchase_date:"",purchase_price:"",currency:g,location:"",notes:"",condition:"",disposed_reason:"",sold_at:"",sold_price:"",sold_currency:A||g,depreciation_useful_life_years:"",depreciation_salvage_value:"",receipt:null,photo:null}),k=s=>{s.preventDefault();const i=a.photo||a.receipt;B(h.route("assets.store"),{preserveScroll:!0,...i?{forceFormData:!0}:{}})},O=["sold","gifted","lost","damaged","retired","disposed"].includes(a.status),R=a.status==="sold",f=a.photo?URL.createObjectURL(a.photo):null;return e.jsxs(T,{breadcrumbs:L,children:[e.jsx(V,{title:"Add asset"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(v,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx(b,{href:h.route("assets.index"),children:e.jsx(G,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Add asset"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Register a new device or item in your inventory."})]})]}),e.jsxs("form",{onSubmit:k,className:"space-y-8",children:[e.jsxs("div",{className:"grid gap-8 lg:grid-cols-[280px_1fr]",children:[e.jsx(p,{className:"h-fit overflow-hidden border-2 border-dashed lg:border-solid lg:border lg:rounded-2xl",children:e.jsx(x,{className:"p-0",children:e.jsxs("label",{className:"flex aspect-square w-full cursor-pointer flex-col items-center justify-center gap-3 bg-muted/20 p-6 transition-colors hover:bg-muted/40",children:[e.jsx("input",{ref:P,type:"file",accept:"image/jpeg,image/png,image/jpg",className:"sr-only",onChange:s=>{var i;return r("photo",((i=s.target.files)==null?void 0:i[0])??null)}}),f?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:f,alt:"Preview",className:"h-48 w-48 rounded-xl object-cover shadow-inner"}),e.jsx("span",{className:"text-muted-foreground text-sm",children:"Click to change"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-2xl bg-primary/10",children:e.jsx(H,{className:"h-10 w-10 text-primary"})}),e.jsx("span",{className:"text-center text-sm font-medium",children:"Device photo"}),e.jsx("span",{className:"text-muted-foreground text-xs",children:"Optional · JPG or PNG, max 5 MB"})]})]})})}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs(p,{className:"overflow-hidden rounded-2xl border shadow-sm",children:[e.jsx(j,{className:"border-b bg-muted/30 pb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5 text-primary"}),e.jsx("h2",{className:"font-semibold",children:"Basic information"})]})}),e.jsxs(x,{className:"space-y-5 pt-5",children:[e.jsxs("div",{className:"grid gap-5 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"name",children:"Name *"}),e.jsx(l,{id:"name",required:!0,value:a.name,onChange:s=>r("name",s.target.value),className:"h-11",placeholder:'e.g. MacBook Pro 14"'}),u.name&&e.jsx("p",{className:"text-destructive text-sm",children:u.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"asset_tag",children:"Asset tag"}),e.jsx(l,{id:"asset_tag",value:a.asset_tag,onChange:s=>r("asset_tag",s.target.value),className:"h-11",placeholder:"Leave blank to auto-generate"}),u.asset_tag&&e.jsx("p",{className:"text-destructive text-sm",children:u.asset_tag})]})]}),e.jsxs("div",{className:"grid gap-5 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"asset_category_id",children:"Category"}),e.jsxs(d,{value:a.asset_category_id?String(a.asset_category_id):"none",onValueChange:s=>r("asset_category_id",s==="none"?"":Number(s)),children:[e.jsx(n,{id:"asset_category_id",className:"h-11",children:e.jsx(o,{placeholder:"Select category"})}),e.jsxs(m,{children:[e.jsx(c,{value:"none",children:"None"}),C.map(s=>e.jsx(c,{value:String(s.id),children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"serial_number",children:"Serial number"}),e.jsx(l,{id:"serial_number",value:a.serial_number,onChange:s=>r("serial_number",s.target.value),className:"h-11",placeholder:"Optional"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"description",children:"Description"}),e.jsx(y,{id:"description",value:a.description,onChange:s=>r("description",s.target.value),rows:2,className:"resize-none",placeholder:"Brief description of the asset"})]})]})]}),e.jsxs(p,{className:"overflow-hidden rounded-2xl border shadow-sm",children:[e.jsx(j,{className:"border-b bg-muted/30 pb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-5 w-5 text-primary"}),e.jsx("h2",{className:"font-semibold",children:"Status & assignment"})]})}),e.jsxs(x,{className:"space-y-5 pt-5",children:[e.jsxs("div",{className:"grid gap-5 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"status",children:"Status *"}),e.jsxs(d,{value:a.status,onValueChange:s=>r("status",s),children:[e.jsx(n,{id:"status",className:"h-11",children:e.jsx(o,{})}),e.jsx(m,{children:Object.entries(w).map(([s,i])=>e.jsx(c,{value:s,children:i},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"assigned_to_user_id",children:"Assigned to"}),e.jsxs(d,{value:a.assigned_to_user_id?String(a.assigned_to_user_id):"none",onValueChange:s=>r("assigned_to_user_id",s==="none"?"":Number(s)),children:[e.jsx(n,{id:"assigned_to_user_id",className:"h-11",children:e.jsx(o,{placeholder:"Select person"})}),e.jsxs(m,{children:[e.jsx(c,{value:"none",children:"Unassigned"}),S.map(s=>e.jsx(c,{value:String(s.id),children:[s.first_name,s.last_name].filter(Boolean).join(" ")||s.email},s.id))]})]})]})]}),e.jsxs("div",{className:"grid gap-5 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"location",children:"Location"}),e.jsx(l,{id:"location",value:a.location,onChange:s=>r("location",s.target.value),className:"h-11",placeholder:"e.g. Office, Warehouse"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"condition",children:"Condition"}),e.jsxs(d,{value:a.condition||"none",onValueChange:s=>r("condition",s==="none"?"":s),children:[e.jsx(n,{id:"condition",className:"h-11",children:e.jsx(o,{placeholder:"Select condition"})}),e.jsxs(m,{children:[e.jsx(c,{value:"none",children:"—"}),Object.entries(F).map(([s,i])=>e.jsx(c,{value:s,children:i},s))]})]})]})]}),O&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"disposed_reason",children:"Disposal reason / notes"}),e.jsx(l,{id:"disposed_reason",value:a.disposed_reason,onChange:s=>r("disposed_reason",s.target.value),className:"h-11",placeholder:"e.g. Sold to X, Gifted to Y"})]})]})]}),e.jsxs(p,{className:"overflow-hidden rounded-2xl border shadow-sm",children:[e.jsx(j,{className:"border-b bg-muted/30 pb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5 text-primary"}),e.jsx("h2",{className:"font-semibold",children:"Purchase & value"})]})}),e.jsxs(x,{className:"space-y-5 pt-5",children:[e.jsxs("div",{className:"grid gap-5 sm:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"purchase_date",children:"Purchase date"}),e.jsx(l,{id:"purchase_date",type:"date",value:a.purchase_date,onChange:s=>r("purchase_date",s.target.value),className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"purchase_price",children:"Purchase price"}),e.jsx(l,{id:"purchase_price",type:"number",step:"0.01",min:"0",value:a.purchase_price,onChange:s=>r("purchase_price",s.target.value),className:"h-11",placeholder:"0.00"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"currency",children:"Currency"}),e.jsxs(d,{value:a.currency,onValueChange:s=>r("currency",s),children:[e.jsx(n,{id:"currency",className:"h-11",children:e.jsx(o,{})}),e.jsx(m,{children:Object.entries(N).map(([s,i])=>e.jsx(c,{value:s,children:i},s))})]})]})]}),e.jsxs("div",{className:"space-y-3 border-t pt-4",children:[e.jsx("p",{className:"text-muted-foreground text-sm font-medium",children:"Depreciation override (optional)"}),e.jsx("p",{className:"text-muted-foreground text-xs",children:"Override category defaults for this asset. Leave blank to use category settings or no depreciation."}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"depreciation_useful_life_years",children:"Useful life (years)"}),e.jsx(l,{id:"depreciation_useful_life_years",type:"number",min:1,max:100,placeholder:"Use category default",value:a.depreciation_useful_life_years===""?"":a.depreciation_useful_life_years,onChange:s=>r("depreciation_useful_life_years",s.target.value===""?"":parseInt(s.target.value,10)),className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"depreciation_salvage_value",children:"Salvage value"}),e.jsx(l,{id:"depreciation_salvage_value",type:"number",min:0,step:.01,placeholder:"0",value:a.depreciation_salvage_value,onChange:s=>r("depreciation_salvage_value",s.target.value),className:"h-11"})]})]})]}),R&&e.jsxs("div",{className:"rounded-lg border border-amber-200 bg-amber-50/50 p-4 dark:border-amber-900/50 dark:bg-amber-950/20",children:[e.jsx("p",{className:"mb-3 text-sm font-medium text-amber-800 dark:text-amber-200",children:"Sale details"}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"sold_at",children:"Sold date"}),e.jsx(l,{id:"sold_at",type:"date",value:a.sold_at||new Date().toISOString().slice(0,10),onChange:s=>r("sold_at",s.target.value),className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"sold_price",children:"Sold price"}),e.jsx(l,{id:"sold_price",type:"number",step:"0.01",min:"0",value:a.sold_price,onChange:s=>r("sold_price",s.target.value),className:"h-11",placeholder:"Amount received"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"sold_currency",children:"Sold in currency"}),e.jsxs(d,{value:a.sold_currency||g,onValueChange:s=>r("sold_currency",s),children:[e.jsx(n,{id:"sold_currency",className:"h-11",children:e.jsx(o,{placeholder:"Currency received"})}),e.jsx(m,{children:Object.entries(N).map(([s,i])=>e.jsx(c,{value:s,children:i},s))})]})]})]})]})]})]}),e.jsxs(p,{className:"overflow-hidden rounded-2xl border shadow-sm",children:[e.jsx(j,{className:"border-b bg-muted/30 pb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5 text-primary"}),e.jsx("h2",{className:"font-semibold",children:"Documents & notes"})]})}),e.jsxs(x,{className:"space-y-5 pt-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"receipt",children:"Receipt (optional)"}),e.jsx(l,{id:"receipt",type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:s=>{var i;return r("receipt",((i=s.target.files)==null?void 0:i[0])??null)},className:"h-11"}),e.jsx("p",{className:"text-muted-foreground text-xs",children:"PDF or image, max 10 MB"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"notes",children:"Internal notes"}),e.jsx(y,{id:"notes",value:a.notes,onChange:s=>r("notes",s.target.value),rows:3,className:"resize-none",placeholder:"Private notes about this asset"})]})]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 border-t pt-6",children:[e.jsx(v,{type:"submit",disabled:_,className:"min-w-[140px]",children:_?"Creating…":"Create asset"}),e.jsx(v,{type:"button",variant:"outline",asChild:!0,children:e.jsx(b,{href:h.route("assets.index"),children:"Cancel"})})]})]})]})]})}export{Je as default};
