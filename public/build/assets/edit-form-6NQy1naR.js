import{u as f,r as N,j as r}from"./app-D_gAFq-V.js";import{C}from"./card-DoeT-v6d.js";import{I as E}from"./input-CmTb5Lxc.js";import{L as I}from"./label-B1gWC-cG.js";import{B as d}from"./button-BFSYIwtl.js";import{T as q}from"./textarea-ZdTL-lEf.js";import{t as n}from"./index-LIrdw0Kx.js";/* empty css            */import"./utils-DawFQoOT.js";function O({entity:a,onSubmit:w,processing:v,errors:u,fields:x,entityName:t}){const{data:m,setData:p,post:h,put:g}=f({name:(a==null?void 0:a.name)??"",description:(a==null?void 0:a.description)??"",price:(a==null?void 0:a.price.toString())??"",image:void 0}),[l,i]=N.useState((a==null?void 0:a.featured_image)??null),j=e=>{e.preventDefault();const s=new FormData;s.append("name",m.name),s.append("description",m.description),s.append("price",m.price),m.image&&s.append("image",m.image),a?(s.append("_method","PUT"),g(route("products.update",a.id),{preserveScroll:!0,onSuccess:()=>{n.success(`${t} updated successfully`)},onError:o=>{Object.values(o).forEach(c=>{n.error(c)})}})):h(route("products.store"),{preserveScroll:!0,onSuccess:()=>{n.success(`${t} created successfully`)},onError:o=>{Object.values(o).forEach(c=>{n.error(c)})}})},b=e=>{var o;const s=(o=e.target.files)==null?void 0:o[0];if(s){p("image",s);const c=new FileReader;c.onloadend=()=>{i(c.result)},c.readAsDataURL(s)}},S=()=>{p("image",void 0),i(null);const e=document.querySelector('input[type="file"]');e&&(e.value="")};return r.jsx(C,{className:"p-6",children:r.jsxs("form",{onSubmit:j,className:"space-y-6",children:[r.jsx("div",{className:"space-y-4",children:x.map(e=>{const s=m[e.name];return e.type,r.jsxs("div",{children:[r.jsxs(I,{htmlFor:e.name,children:[e.label,e.required&&r.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.type==="textarea"?r.jsx(q,{id:e.name,name:e.name,value:s,onChange:o=>p(e.name,o.target.value),className:"mt-1",required:e.required}):r.jsx(E,{id:e.name,name:e.name,type:e.type,step:e.type==="number"?"0.01":void 0,accept:e.accept,value:e.type==="file"?void 0:s,onChange:o=>{e.type==="file"?b(o):p(e.name,o.target.value)},className:"mt-1",required:e.required}),u[e.name]&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:u[e.name]}),e.type==="file"&&l&&r.jsxs("div",{className:"mt-2",children:[r.jsx("img",{src:l,alt:"Preview",className:"h-32 w-32 object-cover rounded"}),r.jsx(d,{type:"button",variant:"outline",onClick:S,className:"mt-2",children:"Remove Image"})]})]},e.name)})}),r.jsx("div",{className:"flex justify-end",children:r.jsxs(d,{type:"submit",disabled:v,className:"cursor-pointer",children:[a?"Update":"Create"," ",t.charAt(0).toUpperCase()+t.slice(1)]})})]})})}export{O as EditForm};
