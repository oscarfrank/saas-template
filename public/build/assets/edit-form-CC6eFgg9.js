import{u as N,r as C,j as r}from"./app-DU4M08QO.js";import{C as E}from"./card-CIVp5v17.js";import{I}from"./input-z-FCfDx3.js";import{L as R}from"./label-BsVN1GsZ.js";import{B as v}from"./button-0DWS1uOF.js";import{T as q}from"./textarea-C7BpPhvr.js";import{t as p}from"./index-rHsITjXj.js";import{u as w}from"./use-tenant-router-mhkU5Kgb.js";/* empty css            */import"./utils-DawFQoOT.js";function k({entity:a,onSubmit:D,processing:x,errors:u,fields:h,entityName:t}){const l=w(),{data:m,setData:n,post:g,put:j}=N({name:(a==null?void 0:a.name)??"",description:(a==null?void 0:a.description)??"",price:(a==null?void 0:a.price.toString())??"",image:void 0}),[i,d]=C.useState((a==null?void 0:a.featured_image)??null),b=e=>{e.preventDefault();const s=new FormData;s.append("name",m.name),s.append("description",m.description),s.append("price",m.price),m.image&&s.append("image",m.image),a?(s.append("_method","PUT"),j(l.route("products.update",{product:a.id}),{preserveScroll:!0,onSuccess:()=>{p.success(`${t} updated successfully`)},onError:o=>{Object.values(o).forEach(c=>{p.error(c)})}})):g(l.route("products.store"),{preserveScroll:!0,onSuccess:()=>{p.success(`${t} created successfully`)},onError:o=>{Object.values(o).forEach(c=>{p.error(c)})}})},f=e=>{var o;const s=(o=e.target.files)==null?void 0:o[0];if(s){n("image",s);const c=new FileReader;c.onloadend=()=>{d(c.result)},c.readAsDataURL(s)}},S=()=>{n("image",void 0),d(null);const e=document.querySelector('input[type="file"]');e&&(e.value="")};return r.jsx(E,{className:"p-6",children:r.jsxs("form",{onSubmit:b,className:"space-y-6",children:[r.jsx("div",{className:"space-y-4",children:h.map(e=>{const s=m[e.name];return e.type,r.jsxs("div",{children:[r.jsxs(R,{htmlFor:e.name,children:[e.label,e.required&&r.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.type==="textarea"?r.jsx(q,{id:e.name,name:e.name,value:s,onChange:o=>n(e.name,o.target.value),className:"mt-1",required:e.required}):r.jsx(I,{id:e.name,name:e.name,type:e.type,step:e.type==="number"?"0.01":void 0,accept:e.accept,value:e.type==="file"?void 0:s,onChange:o=>{e.type==="file"?f(o):n(e.name,o.target.value)},className:"mt-1",required:e.required}),u[e.name]&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:u[e.name]}),e.type==="file"&&i&&r.jsxs("div",{className:"mt-2",children:[r.jsx("img",{src:i,alt:"Preview",className:"h-32 w-32 object-cover rounded"}),r.jsx(v,{type:"button",variant:"outline",onClick:S,className:"mt-2",children:"Remove Image"})]})]},e.name)})}),r.jsx("div",{className:"flex justify-end",children:r.jsxs(v,{type:"submit",disabled:x,className:"cursor-pointer",children:[a?"Update":"Create"," ",t.charAt(0).toUpperCase()+t.slice(1)]})})]})})}export{k as EditForm};
