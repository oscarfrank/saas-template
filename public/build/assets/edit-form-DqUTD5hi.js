import{u as N,j as e}from"./app-DU4M08QO.js";import{C as P}from"./card-CIVp5v17.js";import{I as q}from"./input-z-FCfDx3.js";import{L as E}from"./label-BsVN1GsZ.js";import{B as g}from"./button-0DWS1uOF.js";import{T as w}from"./textarea-C7BpPhvr.js";import{S as D,a as T,b as $,c as k,d as i}from"./select-DVGvg1wx.js";import{C as F}from"./calendar-CidCCUuE.js";import{P as I,a as O,b as R}from"./popover-DnY4cizK.js";import{t as u}from"./index-rHsITjXj.js";import{c as V}from"./utils-DawFQoOT.js";import{u as B}from"./use-tenant-router-mhkU5Kgb.js";import{C as L}from"./calendar-WI8NWamZ.js";import{f as U}from"./format-Dbvp4nIN.js";/* empty css            */import"./index-Ba8EDFfi.js";import"./index-C31rQuzh.js";import"./index-BfArzEZR.js";import"./index-Dax8b012.js";import"./index-BuAmfKhH.js";import"./index-DWOVOz5G.js";import"./index-CY-eh05M.js";import"./index-DdLmsglv.js";import"./index-sRFl2c6N.js";import"./index-Dy8zP7tC.js";import"./chevron-down-DOpVs1Mm.js";import"./createLucideIcon-Kjqtfux8.js";import"./check-CljcYcVc.js";import"./en-US-DSSwd-Ay.js";import"./endOfMonth-BNqLjwTF.js";import"./chevron-right-CrQYE_m4.js";import"./chevron-left-9NrEPTAz.js";import"./index-DVV6TkzN.js";function Cr({entity:r,onSubmit:A,processing:S,errors:l,fields:v,entityName:c,availableUsers:t}){var x,h,j,_;const n=B(),{data:d,setData:p,post:C,put:b}=N({user_id:((x=r==null?void 0:r.user)==null?void 0:x.id.toString())??"",package_id:((h=r==null?void 0:r.package)==null?void 0:h.id.toString())??"",custom_package_id:((j=r==null?void 0:r.custom_package)==null?void 0:j.id.toString())??"",amount:(r==null?void 0:r.amount.toString())??"",currency_id:((_=r==null?void 0:r.currency)==null?void 0:_.id.toString())??"",interest_rate:(r==null?void 0:r.interest_rate.toString())??"",interest_type:(r==null?void 0:r.interest_type)??"simple",interest_calculation:(r==null?void 0:r.interest_calculation)??"monthly",interest_payment_frequency:(r==null?void 0:r.interest_payment_frequency)??"monthly",duration_days:(r==null?void 0:r.duration_days.toString())??"",purpose:(r==null?void 0:r.purpose)??"",start_date:(r==null?void 0:r.start_date)??"",end_date:(r==null?void 0:r.end_date)??"",status:(r==null?void 0:r.status)??"pending"}),f=a=>{a.preventDefault();const o=new FormData;Object.entries(d).forEach(([m,s])=>{s!==void 0&&o.append(m,s)}),r?(o.append("_method","PUT"),b(n.route("loans.update",{loan:r.id}),{preserveScroll:!0,onSuccess:()=>{u.success(`${c} updated successfully`)},onError:m=>{Object.values(m).forEach(s=>{u.error(s)})}})):C(n.route("loans.store"),{preserveScroll:!0,onSuccess:()=>{u.success(`${c} created successfully`)},onError:m=>{Object.values(m).forEach(s=>{u.error(s)})}})};return e.jsx(P,{className:"p-6",children:e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsx("div",{className:"space-y-4",children:v.map(a=>{var m;const o=d[a.name];return a.type,e.jsxs("div",{children:[e.jsxs(E,{htmlFor:a.name,children:[a.label,a.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),a.type==="textarea"?e.jsx(w,{id:a.name,name:a.name,value:o,onChange:s=>p(a.name,s.target.value),className:"mt-1",required:a.required}):a.type==="select"?e.jsxs(D,{value:a.defaultValue||o,onValueChange:s=>p(a.name,s),children:[e.jsx(T,{className:"mt-1",children:e.jsx($,{placeholder:`Select ${a.label}`})}),e.jsx(k,{children:a.name==="user_id"&&t?t.map(s=>e.jsx(i,{value:s.id.toString(),children:`${s.first_name} ${s.last_name}`},s.id)):(m=a.options)==null?void 0:m.map(s=>e.jsx(i,{value:s.value,children:s.label},s.value))})]}):a.type==="date"?e.jsxs(I,{children:[e.jsx(O,{asChild:!0,children:e.jsxs(g,{variant:"outline",className:V("w-full justify-start text-left font-normal mt-1",!o&&"text-muted-foreground"),children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),o?U(new Date(o),"PPP"):e.jsx("span",{children:"Pick a date"})]})}),e.jsx(R,{className:"w-auto p-0",children:e.jsx(F,{mode:"single",selected:o?new Date(o):void 0,onSelect:s=>p(a.name,(s==null?void 0:s.toISOString())??""),initialFocus:!0})})]}):e.jsx(q,{id:a.name,name:a.name,type:a.type,min:a.min,step:a.step,accept:a.accept,value:a.type==="file"?void 0:o,onChange:s=>p(a.name,s.target.value),className:"mt-1",required:a.required}),l[a.name]&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:l[a.name]})]},a.name)})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(g,{type:"submit",disabled:S,className:"cursor-pointer",children:[r?"Update":"Create"," ",c.charAt(0).toUpperCase()+c.slice(1)]})})]})})}export{Cr as EditForm};
