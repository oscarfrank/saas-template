import{u as A,b as g,j as e,H as P}from"./app-AYk_vs9E.js";import{A as U}from"./app-layout-D8Tf8JSL.js";import{C as b,a as y,b as N,c as k,d as v}from"./card-DfQq8xjq.js";import{B as m}from"./button-DttS-hSO.js";import{L as d}from"./label-CLHv5EXU.js";import{S as B,a as H,b as M,c as O,d as C}from"./select-BgZzs72h.js";import{C as n}from"./checkbox-CYkLF2iY.js";import{A as T}from"./arrow-left-BlrAGO7T.js";import{D as w}from"./download-CsEn6l0J.js";import{U as S}from"./upload-c600LwtO.js";/* empty css            */import"./breadcrumb-B0lOsGUr.js";import"./utils-DawFQoOT.js";import"./input-KN5y_tmq.js";import"./sheet-BQ7ZHeJH.js";import"./index-D2xyTu0-.js";import"./index-C6YWzjxw.js";import"./index-DVPqwmDN.js";import"./index-BS1oCJ0R.js";import"./index-DH27nmtP.js";import"./index-DB97fau_.js";import"./index-JB8FLK9q.js";import"./x-C_zQvMCL.js";import"./createLucideIcon-B8-QgQ2g.js";import"./index-KBPR2gxA.js";import"./index-D-MPqe8D.js";import"./index-g_lpINMr.js";import"./dropdown-menu-C44z3VEl.js";import"./index-DpFxWXhO.js";import"./index-kZDZBK9R.js";import"./check-o4IyhQhV.js";import"./file-text-DJz8nwxt.js";import"./users-DqaIzH7r.js";import"./package-famJlHsI.js";import"./wallet-1YY19SXz.js";import"./chevron-down-DjDlq31K.js";import"./skeleton-C1cSm2kL.js";import"./use-effective-tenant-it7FmrhR.js";import"./use-tenant-router-yHxY6vf2.js";import"./trash-2-CBlWZpKk.js";import"./en-US-DSSwd-Ay.js";import"./endOfMonth-BNqLjwTF.js";import"./user-C3DA-HUB.js";import"./dollar-sign-CtwrfOoy.js";import"./credit-card-BBEokihX.js";import"./mail-DQFl-2hO.js";import"./shield-SUW6F_AQ.js";import"./circle-alert-DSmqB_aB.js";import"./building-2-ClZdYFLS.js";import"./chevron-right-BFzkFd6A.js";import"./sonner-B0HlpBLA.js";import"./index-BSCeWBGl.js";import"./index-G_7kvJMb.js";const z=[{title:"Admin",href:route("admin.dashboard")},{title:"Export / Import",href:route("admin.export-import")}],D=l=>l.map(c=>c.key);function ze({sections:l,success:c,error:F}){const{flash:o}=A().props,p=c??(o==null?void 0:o.success),x=F??(o==null?void 0:o.error),a=g({format:"json",include:D(l)}),r=g({file:null,include:D(l)}),h=l.filter(t=>t.group==="central"),u=l.filter(t=>t.group==="tenant"),f=(t,s)=>{s?a.setData("include",[...a.data.include,t]):a.setData("include",a.data.include.filter(i=>i!==t))},j=(t,s)=>{s?r.setData("include",[...r.data.include,t]):r.setData("include",r.data.include.filter(i=>i!==t))},I=()=>{const t=a.data.format,s=a.data.include,i=new URLSearchParams({format:t});s.forEach(L=>i.append("include[]",L)),window.location.href=route("admin.export")+"?"+i.toString()},E=t=>{t.preventDefault(),r.data.file&&r.post(route("admin.import"),{forceFormData:!0,onSuccess:()=>r.reset("file")})};return e.jsxs(U,{breadcrumbs:z,children:[e.jsx(P,{title:"Export / Import - Admin"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsx(m,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs("a",{href:route("admin.dashboard"),children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),"Back to dashboard"]})})}),p&&e.jsx("div",{className:"rounded-md bg-green-50 dark:bg-green-950/30 px-4 py-3 text-sm text-green-800 dark:text-green-200",children:p}),x&&e.jsx("div",{className:"rounded-md bg-red-50 dark:bg-red-950/30 px-4 py-3 text-sm text-red-800 dark:text-red-200",children:x}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(b,{children:[e.jsxs(y,{children:[e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5"}),"Export"]}),e.jsx(k,{children:`Choose what to include in the export, then download as JSON or XML. Exporting "Tenants" includes each organization's sidebar page order and visibility.`})]}),e.jsxs(v,{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(d,{children:"Include in export"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Central"}),h.map(t=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{id:"export-"+t.key,checked:a.data.include.includes(t.key),onCheckedChange:s=>f(t.key,!!s)}),e.jsx("label",{htmlFor:"export-"+t.key,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:t.label})]},t.key))]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Per tenant"}),u.map(t=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{id:"export-t-"+t.key,checked:a.data.include.includes(t.key),onCheckedChange:s=>f(t.key,!!s)}),e.jsx("label",{htmlFor:"export-t-"+t.key,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:t.label})]},t.key))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Format"}),e.jsxs(B,{value:a.data.format,onValueChange:t=>a.setData("format",t),children:[e.jsx(H,{children:e.jsx(M,{})}),e.jsxs(O,{children:[e.jsx(C,{value:"json",children:"JSON"}),e.jsx(C,{value:"xml",children:"XML"})]})]})]}),e.jsxs(m,{onClick:I,disabled:a.processing,children:[e.jsx(w,{className:"mr-2 h-4 w-4"}),"Download export"]})]})]}),e.jsxs(b,{children:[e.jsxs(y,{children:[e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5"}),"Import"]}),e.jsx(k,{children:"Upload a file and choose which sections to import. Only selected types will be applied."})]}),e.jsx(v,{children:e.jsxs("form",{onSubmit:E,className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"import-file",children:"File (.json or .xml)"}),e.jsx("input",{id:"import-file",type:"file",accept:".json,.xml",className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium",onChange:t=>{var i;const s=(i=t.target.files)==null?void 0:i[0];r.setData("file",s??null)}}),r.errors.file&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.file})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(d,{children:"Import only"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Central"}),h.map(t=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{id:"import-"+t.key,checked:r.data.include.includes(t.key),onCheckedChange:s=>j(t.key,!!s)}),e.jsx("label",{htmlFor:"import-"+t.key,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:t.label})]},t.key))]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Per tenant"}),u.map(t=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{id:"import-t-"+t.key,checked:r.data.include.includes(t.key),onCheckedChange:s=>j(t.key,!!s)}),e.jsx("label",{htmlFor:"import-t-"+t.key,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:t.label})]},t.key))]})]})]}),e.jsxs(m,{type:"submit",disabled:!r.data.file||r.processing,children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),r.processing?"Importingâ€¦":"Import"]})]})})]})]})]})]})}export{ze as default};
