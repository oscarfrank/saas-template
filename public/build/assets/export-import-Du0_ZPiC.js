import{u as _,b as g,j as e,H as L}from"./app-CMfsqCQM.js";import{A}from"./app-layout-DWW7ov8A.js";import{C as b,a as y,b as N,c as k,d as v}from"./card-BKip0K0O.js";import{B as m}from"./button-B2dnQCAa.js";import{L as l}from"./label-BEW08XYy.js";import{S as z,a as T,b as H,c as O,d as w}from"./select-CAt556DM.js";import{C as n}from"./checkbox-BuKLpctU.js";import{A as U}from"./arrow-left-CQKAXibK.js";import{D as C}from"./download-CPY3cAX4.js";import{U as S}from"./upload-d5cqdqEn.js";/* empty css            */import"./breadcrumb-UVH0om7h.js";import"./utils-DawFQoOT.js";import"./input-Bpdo4m0L.js";import"./sheet-CwGP68Z_.js";import"./index-Dsoa9CjY.js";import"./index-xqWKCSYm.js";import"./index-BeUfNboo.js";import"./index-DYM8iIys.js";import"./index-NxXi0nlY.js";import"./index-DCzB2KT7.js";import"./index-jjTweGYJ.js";import"./x-Cu70FuQ4.js";import"./createLucideIcon-DV9StWnM.js";import"./index-BrOQlPGX.js";import"./index-C5ERfWkd.js";import"./index-CmYx4CDV.js";import"./dropdown-menu-D-TuDDeo.js";import"./index-DJMkznTg.js";import"./index-BDWLcZMo.js";import"./check-KdCJQoSn.js";import"./file-text-ZIm8Me-N.js";import"./users-nX7eRmms.js";import"./package-BK_e8Gd3.js";import"./wallet-D3VF3ET3.js";import"./chevron-down-uDeEpgqx.js";import"./skeleton-BM9JAt9Z.js";import"./use-effective-tenant-FNx9T5uV.js";import"./use-tenant-router-ECVXs2qr.js";import"./trash-2-C6bUCbz1.js";import"./en-US-DSSwd-Ay.js";import"./endOfMonth-BNqLjwTF.js";import"./user-Bt6Fbven.js";import"./dollar-sign-Cvub9wzG.js";import"./credit-card-BIZzkTvA.js";import"./mail-CyHnWLIa.js";import"./shield-BxhzRHW9.js";import"./circle-alert-DbZArJmq.js";import"./building-2-CraT7Xwf.js";import"./chevron-right-DPdqOnta.js";import"./sonner-DSzJt1Z7.js";import"./index-q8lzB8Tn.js";import"./index-CSp-ZSgT.js";const B=[{title:"Admin",href:route("admin.dashboard")},{title:"Export / Import",href:route("admin.export-import")}],I=o=>o.map(c=>c.key);function Be({sections:o,success:c,error:D}){const{flash:d}=_().props,p=c??(d==null?void 0:d.success),x=D??(d==null?void 0:d.error),a=g({format:"json",include:I(o)}),r=g({file:null,include:I(o)}),h=o.filter(t=>t.group==="central"),u=o.filter(t=>t.group==="tenant"),f=(t,s)=>{s?a.setData("include",[...a.data.include,t]):a.setData("include",a.data.include.filter(i=>i!==t))},j=(t,s)=>{s?r.setData("include",[...r.data.include,t]):r.setData("include",r.data.include.filter(i=>i!==t))},F=()=>{const t=a.data.format,s=a.data.include,i=new URLSearchParams({format:t});s.forEach(P=>i.append("include[]",P)),window.location.href=route("admin.export")+"?"+i.toString()},E=t=>{t.preventDefault(),r.data.file&&r.post(route("admin.import"),{forceFormData:!0,onSuccess:()=>r.reset("file")})};return e.jsxs(A,{breadcrumbs:B,children:[e.jsx(L,{title:"Export / Import - Admin"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsx(m,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs("a",{href:route("admin.dashboard"),children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),"Back to dashboard"]})})}),p&&e.jsx("div",{className:"rounded-md bg-green-50 dark:bg-green-950/30 px-4 py-3 text-sm text-green-800 dark:text-green-200",children:p}),x&&e.jsx("div",{className:"rounded-md bg-red-50 dark:bg-red-950/30 px-4 py-3 text-sm text-red-800 dark:text-red-200",children:x}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(b,{children:[e.jsxs(y,{children:[e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5"}),"Export"]}),e.jsx(k,{children:`Choose what to include in the export, then download as JSON or XML. Exporting "Tenants" includes each organization's sidebar page order and visibility.`})]}),e.jsxs(v,{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{children:"Include in export"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Central"}),h.map(t=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{id:"export-"+t.key,checked:a.data.include.includes(t.key),onCheckedChange:s=>f(t.key,!!s)}),e.jsx("label",{htmlFor:"export-"+t.key,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:t.label})]},t.key))]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Per tenant"}),u.map(t=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{id:"export-t-"+t.key,checked:a.data.include.includes(t.key),onCheckedChange:s=>f(t.key,!!s)}),e.jsx("label",{htmlFor:"export-t-"+t.key,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:t.label})]},t.key))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Format"}),e.jsxs(z,{value:a.data.format,onValueChange:t=>a.setData("format",t),children:[e.jsx(T,{children:e.jsx(H,{})}),e.jsxs(O,{children:[e.jsx(w,{value:"json",children:"JSON"}),e.jsx(w,{value:"xml",children:"XML"})]})]})]}),e.jsxs(m,{onClick:F,disabled:a.processing,children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"Download export"]})]})]}),e.jsxs(b,{children:[e.jsxs(y,{children:[e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5"}),"Import"]}),e.jsx(k,{children:"Upload a file and choose which sections to import. Only selected types will be applied."})]}),e.jsx(v,{children:e.jsxs("form",{onSubmit:E,className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"import-file",children:"File (.json or .xml)"}),e.jsx("input",{id:"import-file",type:"file",accept:".json,.xml",className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium",onChange:t=>{var i;const s=(i=t.target.files)==null?void 0:i[0];r.setData("file",s??null)}}),r.errors.file&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.file}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:['If you see "The POST data is too large", the file exceeds your server limit. Increase PHP ',e.jsx("code",{className:"rounded bg-muted px-1",children:"post_max_size"})," and ",e.jsx("code",{className:"rounded bg-muted px-1",children:"upload_max_filesize"})," in php.ini (and Nginx ",e.jsx("code",{className:"rounded bg-muted px-1",children:"client_max_body_size"})," if used), then restart the web server."]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(l,{children:"Import only"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Central"}),h.map(t=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{id:"import-"+t.key,checked:r.data.include.includes(t.key),onCheckedChange:s=>j(t.key,!!s)}),e.jsx("label",{htmlFor:"import-"+t.key,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:t.label})]},t.key))]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Per tenant"}),u.map(t=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{id:"import-t-"+t.key,checked:r.data.include.includes(t.key),onCheckedChange:s=>j(t.key,!!s)}),e.jsx("label",{htmlFor:"import-t-"+t.key,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:t.label})]},t.key))]})]})]}),e.jsxs(m,{type:"submit",disabled:!r.data.file||r.processing,children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),r.processing?"Importingâ€¦":"Import"]})]})})]})]})]})]})}export{Be as default};
