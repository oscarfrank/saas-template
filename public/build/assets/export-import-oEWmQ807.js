import{u as A,b as g,j as e,H as P}from"./app-C6kPN11i.js";import{A as U}from"./app-layout-D7Ym20yP.js";import{C as b,a as y,b as N,c as k,d as v}from"./card-BmLtWeUg.js";import{B as m}from"./button-BpcDdXY5.js";import{L as d}from"./label-DjBGQ4hv.js";import{S as B,a as H,b as M,c as O,d as C}from"./select-Ccun-8aA.js";import{C as c}from"./checkbox-CshTKHSY.js";import{A as J}from"./arrow-left-DfTOTK5_.js";import{D as w}from"./download-ChRVRCCR.js";import{U as S}from"./upload-BZ8k59qO.js";/* empty css            */import"./breadcrumb-T3ZEscMa.js";import"./utils-DawFQoOT.js";import"./input-DeRGwPqG.js";import"./sheet-DTohGHug.js";import"./index-BAMDKCYP.js";import"./index-BgupMaT4.js";import"./index-BAwu540p.js";import"./index-B6IO7GeI.js";import"./index-C7NICwH1.js";import"./index-D4LQi-WW.js";import"./index-BUDeVy67.js";import"./x-CBDS_5l3.js";import"./createLucideIcon-Btrq-JEB.js";import"./index-qNm-4KWi.js";import"./index-DjhqQPoh.js";import"./index-DhnENxrq.js";import"./dropdown-menu-D3Uldfay.js";import"./index-CNSJNdLA.js";import"./index-DqvV1WAh.js";import"./check-ClCxYYgj.js";import"./chevron-down-B2X-k1Lh.js";import"./skeleton-COOtXclS.js";import"./use-effective-tenant-BWuu0ab1.js";import"./use-tenant-router-DTqtlbGV.js";import"./trash-2-CxGNVkTA.js";import"./en-US-DSSwd-Ay.js";import"./endOfMonth-BNqLjwTF.js";import"./user-B4Zct4sF.js";import"./file-text-Dt63_vzy.js";import"./dollar-sign-B1EcXlzZ.js";import"./credit-card-DqGQHV60.js";import"./mail-CxIpkxxd.js";import"./shield-JlQ_48fz.js";import"./circle-alert-CphltCJl.js";import"./package-BxdLO7jd.js";import"./users-Hp18PoY4.js";import"./wallet-Rygk2Esi.js";import"./building-2-BJ5JnpgN.js";import"./chevron-right-DDsMzLk9.js";import"./sonner-Dk1iPVCY.js";import"./index-BdMXpxBe.js";import"./index-DHeuMB84.js";const R=[{title:"Admin",href:route("admin.dashboard")},{title:"Export / Import",href:route("admin.export-import")}],D=l=>l.map(n=>n.key);function Re({sections:l,success:n,error:F}){const{flash:o}=A().props,p=n??(o==null?void 0:o.success),x=F??(o==null?void 0:o.error),a=g({format:"json",include:D(l)}),r=g({file:null,include:D(l)}),h=l.filter(t=>t.group==="central"),u=l.filter(t=>t.group==="tenant"),f=(t,s)=>{s?a.setData("include",[...a.data.include,t]):a.setData("include",a.data.include.filter(i=>i!==t))},j=(t,s)=>{s?r.setData("include",[...r.data.include,t]):r.setData("include",r.data.include.filter(i=>i!==t))},I=()=>{const t=a.data.format,s=a.data.include,i=new URLSearchParams({format:t});s.forEach(L=>i.append("include[]",L)),window.location.href=route("admin.export")+"?"+i.toString()},E=t=>{t.preventDefault(),r.data.file&&r.post(route("admin.import"),{forceFormData:!0,onSuccess:()=>r.reset("file")})};return e.jsxs(U,{breadcrumbs:R,children:[e.jsx(P,{title:"Export / Import - Admin"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsx(m,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs("a",{href:route("admin.dashboard"),children:[e.jsx(J,{className:"mr-2 h-4 w-4"}),"Back to dashboard"]})})}),p&&e.jsx("div",{className:"rounded-md bg-green-50 dark:bg-green-950/30 px-4 py-3 text-sm text-green-800 dark:text-green-200",children:p}),x&&e.jsx("div",{className:"rounded-md bg-red-50 dark:bg-red-950/30 px-4 py-3 text-sm text-red-800 dark:text-red-200",children:x}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(b,{children:[e.jsxs(y,{children:[e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5"}),"Export"]}),e.jsx(k,{children:"Choose what to include in the export, then download as JSON or XML."})]}),e.jsxs(v,{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(d,{children:"Include in export"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Central"}),h.map(t=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(c,{id:"export-"+t.key,checked:a.data.include.includes(t.key),onCheckedChange:s=>f(t.key,!!s)}),e.jsx("label",{htmlFor:"export-"+t.key,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:t.label})]},t.key))]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Per tenant"}),u.map(t=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(c,{id:"export-t-"+t.key,checked:a.data.include.includes(t.key),onCheckedChange:s=>f(t.key,!!s)}),e.jsx("label",{htmlFor:"export-t-"+t.key,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:t.label})]},t.key))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Format"}),e.jsxs(B,{value:a.data.format,onValueChange:t=>a.setData("format",t),children:[e.jsx(H,{children:e.jsx(M,{})}),e.jsxs(O,{children:[e.jsx(C,{value:"json",children:"JSON"}),e.jsx(C,{value:"xml",children:"XML"})]})]})]}),e.jsxs(m,{onClick:I,disabled:a.processing,children:[e.jsx(w,{className:"mr-2 h-4 w-4"}),"Download export"]})]})]}),e.jsxs(b,{children:[e.jsxs(y,{children:[e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5"}),"Import"]}),e.jsx(k,{children:"Upload a file and choose which sections to import. Only selected types will be applied."})]}),e.jsx(v,{children:e.jsxs("form",{onSubmit:E,className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"import-file",children:"File (.json or .xml)"}),e.jsx("input",{id:"import-file",type:"file",accept:".json,.xml",className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium",onChange:t=>{var i;const s=(i=t.target.files)==null?void 0:i[0];r.setData("file",s??null)}}),r.errors.file&&e.jsx("p",{className:"text-sm text-destructive",children:r.errors.file})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(d,{children:"Import only"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Central"}),h.map(t=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(c,{id:"import-"+t.key,checked:r.data.include.includes(t.key),onCheckedChange:s=>j(t.key,!!s)}),e.jsx("label",{htmlFor:"import-"+t.key,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:t.label})]},t.key))]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Per tenant"}),u.map(t=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(c,{id:"import-t-"+t.key,checked:r.data.include.includes(t.key),onCheckedChange:s=>j(t.key,!!s)}),e.jsx("label",{htmlFor:"import-t-"+t.key,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:t.label})]},t.key))]})]})]}),e.jsxs(m,{type:"submit",disabled:!r.data.file||r.processing,children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),r.processing?"Importingâ€¦":"Import"]})]})})]})]})]})]})}export{Re as default};
