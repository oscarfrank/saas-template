import{r as x,j as e,N as y,H as ns,L as v,a as P}from"./app-BCbVRjYH.js";import{A as is}from"./app-layout-DDUYIrv9.js";import{c as cs,B as N}from"./button-uRfG0SJk.js";import{C as I,c as F,a as Me}from"./card-BD7iHYUQ.js";import{B as se}from"./badge-ClEQYrTE.js";import{I as ae}from"./input-CrGy8JR3.js";import{u as ce,P as re,c as ds,a as us}from"./index-D8qEZ9Gx.js";import{I as ms,c as Re,R as ps}from"./index-B-AhuyaU.js";import{u as xs}from"./index-CsWEytiP.js";import{c as Ve}from"./utils-DawFQoOT.js";import{u as hs}from"./use-tenant-router-DiYxGHG9.js";import{D as le,a as oe,b as ne,c as g,d as fs}from"./dropdown-menu-RgYEZTz0.js";import{A as ve,a as Ne,b as be,c as ye,d as we,e as _e,f as Ce,g as Se}from"./alert-dialog-C0GOsab4.js";import{P as gs,a as js,b as vs}from"./popover-ErQzG7nn.js";import{C as te}from"./checkbox-DIRYI8vl.js";import{L as Z}from"./label-B0XYP5fN.js";import{S as C}from"./skeleton-BmqfrkAd.js";import{S as Ns,a as bs,b as ys,c as ws,d as Te}from"./select-DxJnkH9K.js";import{P as J}from"./plus-CdWaCr78.js";import{c as de}from"./createLucideIcon-GhyqP1ys.js";import{F as ze}from"./file-text-CFSx456Y.js";import{D as ie}from"./download-CsxJGCi_.js";import{C as Le}from"./calendar-days-DoDM73Ja.js";import{Y as _s}from"./youtube-CTVWt__Z.js";import{T as V}from"./trash-2-DpopIwP-.js";import{q as ke}from"./breadcrumb-Kf_Jua1h.js";import{S as De}from"./search-DVnJePTX.js";import{L as Cs}from"./package-DUGkiw1_.js";import{L as Ss}from"./list-BpvAvnJE.js";import{V as Ts}from"./video-Bz4JgupA.js";import{E as ks}from"./ellipsis-BruG9vSr.js";import{R as Ds}from"./rotate-ccw-C7Tm3yS_.js";import{P as As}from"./pencil-Ru2IEAVo.js";import{C as Ps}from"./copy-ZMefsacv.js";import{C as Is}from"./clock-ah-BsGHL.js";/* empty css            */import"./sonner-D7WukHuY.js";import"./index-DQu8XgdM.js";import"./index-BUJG5R3i.js";import"./index-CGjHmAMw.js";import"./index-yqb1x3RI.js";import"./index-BtBzczEp.js";import"./index-oDWWD3I5.js";import"./index-CRLWXLw8.js";import"./index-J5wWsuif.js";import"./check-B9bfcpBy.js";import"./index-DPt8kAZf.js";import"./index-BBDGBUIr.js";import"./index-BKQezIhM.js";import"./chevron-down-RiCOlSmY.js";import"./sheet-BWAeJB6C.js";import"./x-D611PGoW.js";import"./use-effective-tenant-CQ6us_Au.js";import"./en-US-DSSwd-Ay.js";import"./endOfMonth-BNqLjwTF.js";import"./user-B55N5piZ.js";import"./dollar-sign-CPcgpTPL.js";import"./credit-card-BcosqvxM.js";import"./mail-hckPM3CY.js";import"./shield-DZlKfUFe.js";import"./circle-alert-DuZXvBOf.js";import"./users-69zSRrQI.js";import"./wallet-CbL3ywdH.js";import"./building-2-CxDNleOb.js";import"./chevron-right-BmqFOubz.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]],Gs=de("ArrowDownAZ",Fs);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Os=de("EllipsisVertical",Es);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],Rs=de("Filter",Ms);var Be="Toggle",Ye=x.forwardRef((t,s)=>{const{pressed:o,defaultPressed:i,onPressedChange:n,...l}=t,[d,p]=ce({prop:o,onChange:n,defaultProp:i??!1,caller:Be});return e.jsx(re.button,{type:"button","aria-pressed":d,"data-state":d?"on":"off","data-disabled":t.disabled?"":void 0,...l,ref:s,onClick:ds(t.onClick,()=>{t.disabled||p(!d)})})});Ye.displayName=Be;var D="ToggleGroup",[$e]=us(D,[Re]),Ue=Re(),ue=y.forwardRef((t,s)=>{const{type:o,...i}=t;if(o==="single"){const n=i;return e.jsx(Vs,{...n,ref:s})}if(o==="multiple"){const n=i;return e.jsx(zs,{...n,ref:s})}throw new Error(`Missing prop \`type\` expected on \`${D}\``)});ue.displayName=D;var[He,Ze]=$e(D),Vs=y.forwardRef((t,s)=>{const{value:o,defaultValue:i,onValueChange:n=()=>{},...l}=t,[d,p]=ce({prop:o,defaultProp:i??"",onChange:n,caller:D});return e.jsx(He,{scope:t.__scopeToggleGroup,type:"single",value:y.useMemo(()=>d?[d]:[],[d]),onItemActivate:p,onItemDeactivate:y.useCallback(()=>p(""),[p]),children:e.jsx(Je,{...l,ref:s})})}),zs=y.forwardRef((t,s)=>{const{value:o,defaultValue:i,onValueChange:n=()=>{},...l}=t,[d,p]=ce({prop:o,defaultProp:i??[],onChange:n,caller:D}),c=y.useCallback(j=>p((b=[])=>[...b,j]),[p]),u=y.useCallback(j=>p((b=[])=>b.filter(G=>G!==j)),[p]);return e.jsx(He,{scope:t.__scopeToggleGroup,type:"multiple",value:d,onItemActivate:c,onItemDeactivate:u,children:e.jsx(Je,{...l,ref:s})})});ue.displayName=D;var[Ls,Bs]=$e(D),Je=y.forwardRef((t,s)=>{const{__scopeToggleGroup:o,disabled:i=!1,rovingFocus:n=!0,orientation:l,dir:d,loop:p=!0,...c}=t,u=Ue(o),j=xs(d),b={role:"group",dir:j,...c};return e.jsx(Ls,{scope:o,rovingFocus:n,disabled:i,children:n?e.jsx(ps,{asChild:!0,...u,orientation:l,dir:j,loop:p,children:e.jsx(re.div,{...b,ref:s})}):e.jsx(re.div,{...b,ref:s})})}),W="ToggleGroupItem",Qe=y.forwardRef((t,s)=>{const o=Ze(W,t.__scopeToggleGroup),i=Bs(W,t.__scopeToggleGroup),n=Ue(t.__scopeToggleGroup),l=o.value.includes(t.value),d=i.disabled||t.disabled,p={...t,pressed:l,disabled:d},c=y.useRef(null);return i.rovingFocus?e.jsx(ms,{asChild:!0,...n,focusable:!d,active:l,ref:c,children:e.jsx(Ae,{...p,ref:s})}):e.jsx(Ae,{...p,ref:s})});Qe.displayName=W;var Ae=y.forwardRef((t,s)=>{const{__scopeToggleGroup:o,value:i,...n}=t,l=Ze(W,o),d={role:"radio","aria-checked":t.pressed,"aria-pressed":void 0},p=l.type==="single"?d:void 0;return e.jsx(Ye,{...p,...n,ref:s,onPressedChange:c=>{c?l.onItemActivate(i):l.onItemDeactivate(i)}})}),Ys=ue,$s=Qe;const Us=cs("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}}),We=x.createContext({size:"default",variant:"default"});function Pe({className:t,variant:s,size:o,children:i,...n}){return e.jsx(Ys,{"data-slot":"toggle-group","data-variant":s,"data-size":o,className:Ve("group/toggle-group flex items-center rounded-md data-[variant=outline]:shadow-xs",t),...n,children:e.jsx(We.Provider,{value:{variant:s,size:o},children:i})})}function Q({className:t,children:s,variant:o,size:i,...n}){const l=x.useContext(We);return e.jsx($s,{"data-slot":"toggle-group-item","data-variant":l.variant||o,"data-size":l.size||i,className:Ve(Us({variant:l.variant||o,size:l.size||i}),"min-w-0 shrink-0 rounded-none shadow-none first:rounded-l-md last:rounded-r-md focus:z-10 focus-visible:z-10 data-[variant=outline]:border-l-0 data-[variant=outline]:first:border-l",t),...n,children:s})}const Hs=[{title:"Scripts",href:"/script"}],Ie=[{value:"updated_desc",label:"Newest updated"},{value:"updated_asc",label:"Oldest updated"},{value:"created_desc",label:"Newest first"},{value:"created_asc",label:"Oldest first"},{value:"title_asc",label:"Title A–Z"},{value:"title_desc",label:"Title Z–A"},{value:"scheduled_desc",label:"Scheduled (latest)"},{value:"scheduled_asc",label:"Scheduled (earliest)"}],Fe=[{value:"deleted_desc",label:"Deleted (newest)"},{value:"deleted_asc",label:"Deleted (oldest)"}],qe=[{value:"draft",label:"Draft"},{value:"writing",label:"Writing"},{value:"completed",label:"Completed"},{value:"published",label:"Published"},{value:"in_review",label:"In review"},{value:"archived",label:"Archived"}],Zs=[{value:"not_shot",label:"Not shot"},{value:"shot",label:"Shot"},{value:"editing",label:"Editing"},{value:"edited",label:"Edited"}],Js=[{value:"created_at",label:"Created"},{value:"updated_at",label:"Updated"},{value:"scheduled_at",label:"Scheduled"}];function Qs(t){return Array.isArray(t)?t.map(s=>Number(s)).filter(s=>!Number.isNaN(s)):typeof t=="number"&&!Number.isNaN(t)?[t]:[]}function Ge(t){return Array.isArray(t)?t.filter(s=>typeof s=="string"):typeof t=="string"&&t!==""?[t]:[]}function Ws({scriptTypes:t,filters:s,trashed:o,onApply:i}){const n=x.useMemo(()=>Qs(s.script_type_id),[s.script_type_id]),l=x.useMemo(()=>Ge(s.status),[s.status]),d=x.useMemo(()=>Ge(s.production_status),[s.production_status]),[p,c]=x.useState(!1),[u,j]=x.useState(n),[b,G]=x.useState(l),[z,$]=x.useState(d),[E,U]=x.useState(s.date_field??null),[L,O]=x.useState(s.date_from??""),[T,m]=x.useState(s.date_to??"");x.useEffect(()=>{p&&(j(n),G(l),$(d),U(s.date_field??null),O(s.date_from??""),m(s.date_to??""))},[p,n,l,d,s.date_field,s.date_from,s.date_to]);const B=r=>{j(h=>h.includes(r)?h.filter(k=>k!==r):[...h,r])},H=r=>{G(h=>h.includes(r)?h.filter(k=>k!==r):[...h,r])},q=r=>{$(h=>h.includes(r)?h.filter(k=>k!==r):[...h,r])},M=()=>{i({script_type_id:u,status:b,production_status:z,date_field:E||null,date_from:L||null,date_to:T||null}),c(!1)};if(o)return null;const S=(n.length>0?1:0)+(l.length>0?1:0)+(d.length>0?1:0)+(s.date_field&&(s.date_from||s.date_to)?1:0);return e.jsxs(gs,{open:p,onOpenChange:c,children:[e.jsx(js,{asChild:!0,children:e.jsxs(N,{variant:"outline",size:"sm",className:"gap-1.5","aria-label":"Filter",children:[e.jsx(Rs,{className:"h-4 w-4"}),"Filter",S>0&&e.jsx("span",{className:"bg-primary text-primary-foreground rounded-full px-1.5 py-0 text-xs",children:S})]})}),e.jsx(vs,{align:"start",className:"w-80",children:e.jsxs("div",{className:"space-y-4",children:[t.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-xs font-medium",children:"Category"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(r=>e.jsxs("label",{className:"flex cursor-pointer items-center gap-2",children:[e.jsx(te,{checked:u.includes(r.id),onCheckedChange:()=>B(r.id)}),e.jsx("span",{className:"text-sm",children:r.name})]},r.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-xs font-medium",children:"Status"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:qe.map(r=>e.jsxs("label",{className:"flex cursor-pointer items-center gap-2",children:[e.jsx(te,{checked:b.includes(r.value),onCheckedChange:()=>H(r.value)}),e.jsx("span",{className:"text-sm",children:r.label})]},r.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-xs font-medium",children:"Production"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Zs.map(r=>e.jsxs("label",{className:"flex cursor-pointer items-center gap-2",children:[e.jsx(te,{checked:z.includes(r.value),onCheckedChange:()=>q(r.value)}),e.jsx("span",{className:"text-sm",children:r.label})]},r.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-xs font-medium",children:"Date range"}),e.jsxs("select",{className:"border-input bg-background ring-offset-background focus-visible:ring-ring h-9 w-full rounded-md border px-3 py-1 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",value:E??"",onChange:r=>U(r.target.value||null),children:[e.jsx("option",{value:"",children:"Any date"}),Js.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))]}),(E??"")!==""&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ae,{type:"date",placeholder:"From",value:L,onChange:r=>O(r.target.value),className:"text-sm"}),e.jsx(ae,{type:"date",placeholder:"To",value:T,onChange:r=>m(r.target.value),className:"text-sm"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>c(!1),children:"Cancel"}),e.jsx(N,{size:"sm",onClick:M,children:"Apply"})]})]})})]})}function qs(){return e.jsxs(I,{className:"overflow-hidden",children:[e.jsxs(Me,{className:"space-y-2 pb-2",children:[e.jsx(C,{className:"h-5 w-3/4"}),e.jsx(C,{className:"h-5 w-16 rounded-full"})]}),e.jsxs(F,{className:"pt-0",children:[e.jsx(C,{className:"h-4 w-full"}),e.jsx(C,{className:"h-4 w-full"}),e.jsx(C,{className:"h-4 w-2/3"}),e.jsx(C,{className:"mt-3 h-3 w-24"})]})]})}function Ks(){return e.jsx(I,{children:e.jsxs(F,{className:"flex flex-row items-center gap-4 py-4",children:[e.jsx(C,{className:"h-10 w-10 shrink-0 rounded-full"}),e.jsxs("div",{className:"min-w-0 flex-1 space-y-2",children:[e.jsx(C,{className:"h-4 w-1/3"}),e.jsx(C,{className:"h-3 w-1/4"})]}),e.jsx(C,{className:"h-6 w-20 rounded-full"})]})})}const Ee={"long-form":{label:"Long Form",icon:ze,className:"bg-pink-500/10 text-pink-600 dark:text-pink-400 border-pink-500/20"},shorts:{label:"Shorts",icon:Ts,className:"bg-blue-500/10 text-blue-600 dark:text-blue-400 border-blue-500/20"}};function Xs(t){const s=new Date(t);if(Number.isNaN(s.getTime()))return"";const o=new Date,i=new Date(o.getFullYear(),o.getMonth(),o.getDate()),n=new Date(s.getFullYear(),s.getMonth(),s.getDate()),l=Math.round((n.getTime()-i.getTime())/(1440*60*1e3));return l===0?"Today":l===1?"Tomorrow":l===-1?"Yesterday":l>1&&l<=7?`in ${l} days`:l<-1&&l>=-7?`${-l} days ago`:s.toLocaleDateString(void 0,{month:"short",day:"numeric",year:s.getFullYear()!==o.getFullYear()?"numeric":void 0})}function Oe({script:t,tenantRouter:s,trashed:o}){var p;const i=Ee[t.platform]??Ee["long-form"],n=i.icon,l=s.route("script.edit",{script:t.uuid}),d=e.jsxs(I,{className:`group flex h-full flex-col overflow-hidden transition-shadow hover:shadow-md ${o?"":"cursor-pointer"}`,children:[e.jsxs(Me,{className:"flex flex-row items-start justify-between gap-2 space-y-0 pb-2",children:[e.jsxs("div",{className:"min-w-0 flex-1 space-y-1",children:[e.jsx("h3",{className:"font-semibold leading-tight line-clamp-2",children:t.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-1.5",children:[e.jsxs(se,{variant:"outline",className:`w-fit text-xs ${i.className}`,children:[e.jsx(n,{className:"mr-1 h-3 w-3"}),i.label]}),t.status&&e.jsx(se,{variant:"secondary",className:"w-fit text-xs capitalize",children:((p=qe.find(c=>c.value===t.status))==null?void 0:p.label)??t.status}),t.is_co_author&&e.jsx(se,{variant:"secondary",className:"w-fit text-xs",children:"Co-author"})]})]}),e.jsxs(le,{children:[e.jsx(oe,{asChild:!0,onClick:c=>c.preventDefault(),children:e.jsx(N,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0 opacity-0 transition-opacity group-hover:opacity-100",children:e.jsx(ks,{className:"h-4 w-4"})})}),e.jsx(ne,{align:"end",children:o?e.jsxs(e.Fragment,{children:[e.jsxs(g,{className:"cursor-pointer gap-2",onClick:c=>{c.preventDefault(),P.post(s.route("script.restore",{script:t.uuid}))},children:[e.jsx(Ds,{className:"h-4 w-4"}),"Restore"]}),e.jsxs(g,{className:"cursor-pointer gap-2 text-destructive focus:text-destructive",onClick:c=>{c.preventDefault(),window.confirm("Permanently delete this script? This cannot be undone and will remove all title options, thumbnails, and content.")&&P.delete(s.route("script.force-destroy",{script:t.uuid}))},children:[e.jsx(V,{className:"h-4 w-4"}),"Delete permanently"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"cursor-pointer gap-2",asChild:!0,children:e.jsxs(v,{href:l,children:[e.jsx(As,{className:"h-4 w-4"}),"Edit"]})}),e.jsxs(g,{className:"cursor-pointer gap-2",children:[e.jsx(Ps,{className:"h-4 w-4"}),"Duplicate"]}),e.jsxs(g,{className:"cursor-pointer gap-2",onClick:c=>{c.preventDefault();const u=s.route("script.export",{script:t.uuid,format:"json"});window.location.href=u},children:[e.jsx(ie,{className:"h-4 w-4"}),"Export JSON"]}),e.jsxs(g,{className:"cursor-pointer gap-2",onClick:c=>{c.preventDefault();const u=s.route("script.export",{script:t.uuid,format:"csv"});window.location.href=u},children:[e.jsx(ie,{className:"h-4 w-4"}),"Export CSV"]}),e.jsxs(g,{className:"cursor-pointer gap-2 text-destructive focus:text-destructive",onClick:c=>{c.preventDefault(),window.confirm("Move this script to the recycle bin? You can restore it later.")&&P.delete(s.route("script.destroy",{script:t.uuid}))},children:[e.jsx(V,{className:"h-4 w-4"}),"Delete"]})]})})]})]}),e.jsxs(F,{className:"flex-1 pt-0",children:[e.jsx("p",{className:"text-muted-foreground line-clamp-3 text-sm",children:t.excerpt}),e.jsxs("div",{className:"mt-3 space-y-1",children:[e.jsx("p",{className:"text-muted-foreground/80 flex items-center gap-1.5 text-xs",children:o&&t.deleted_at_human?e.jsxs(e.Fragment,{children:["Deleted ",t.deleted_at_human]}):e.jsxs(e.Fragment,{children:[e.jsx(Is,{className:"h-3 w-3 shrink-0"}),"Updated ",t.updatedAt]})}),!o&&t.scheduled_at&&e.jsxs("p",{className:"text-muted-foreground/80 flex items-center gap-1.5 text-xs",children:[e.jsx(Le,{className:"h-3 w-3 shrink-0"}),"Scheduled ",Xs(t.scheduled_at)]})]})]})]});return o?d:e.jsx(v,{href:l,children:d})}const et={search:null,script_type_id:[],status:[],production_status:[],date_field:null,date_from:null,date_to:null,created_by:null};function ma({scripts:t=[],trashed:s=!1,scriptTypes:o=[],filters:i,sort:n="updated_desc",view:l="all",canManageScriptAccess:d=!1,hasOrgScriptRole:p=!1,writers:c=[]}){var pe,xe,he;const u=hs(),[j,b]=x.useState("grid"),[G,z]=x.useState(!1),[$,E]=x.useState(!1),[U,L]=x.useState(!1),O=x.useRef(null),T=x.useRef(void 0),m=i??et,B=s&&(n==="updated_desc"||n==="updated_asc")?"deleted_desc":n,H=l==="mine"?"mine":"all",[q,M]=x.useState(m.search??"");x.useEffect(()=>{const a=m.search??"";T.current===void 0?(T.current=a,M(a)):a===T.current&&M(a)},[m.search]);const S=Array.isArray(t)?t:[],r=S.length===0,h=m.search!=null&&m.search!==""||(((pe=m.script_type_id)==null?void 0:pe.length)??0)>0||(((xe=m.status)==null?void 0:xe.length)??0)>0||(((he=m.production_status)==null?void 0:he.length)??0)>0||m.date_field!=null&&(m.date_from!=null||m.date_to!=null)||m.created_by!=null,k=S.length,Ke=h&&r,K=u.route("script.index"),Xe=u.route("script.index",{trashed:1}),es=(a={})=>{const f=s?{trashed:1}:{},w=a.search!==void 0?a.search:m.search??"",A=a.script_type_id!==void 0?a.script_type_id:m.script_type_id??[],Y=a.status!==void 0?a.status:m.status??[],fe=a.production_status!==void 0?a.production_status:m.production_status??[],ge=a.date_field!==void 0?a.date_field:m.date_field??null,X=a.date_from!==void 0?a.date_from:m.date_from??null,ee=a.date_to!==void 0?a.date_to:m.date_to??null,ls=a.sort!==void 0?a.sort:B,os=a.view!==void 0?a.view:H,je=a.created_by!==void 0?a.created_by:m.created_by??null,_={...f,sort:ls};return os==="mine"&&(_.view="mine"),je!=null&&(_.created_by=je),w&&(_.search=w),A.length>0&&(_.script_type_id=A),Y.length>0&&(_.status=Y),fe.length>0&&(_.production_status=fe),ge&&(X||ee)&&(_.date_field=ge,X&&(_.date_from=X),ee&&(_.date_to=ee)),_},R=(a={})=>{const f=u.route("script.index"),w=es(a),A=w.search??"";T.current=A,P.get(f,w,{preserveState:!0,preserveScroll:!0,only:["scripts","filters","sort","view","scriptTypes","writers"],onStart:()=>L(!0),onFinish:()=>L(!1)})},ss=a=>{const f=a.trim()||"";T.current=f,M(a),O.current&&clearTimeout(O.current),O.current=setTimeout(()=>{R({search:f||void 0})},350)},me=()=>{M(""),R({search:"",script_type_id:[],status:[],production_status:[],date_field:null,date_from:null,date_to:null,created_by:null})},ts=x.useMemo(()=>{const f=(s?Fe:Ie).find(w=>w.value===B);return(f==null?void 0:f.label)??"Sort"},[B,s]),as=()=>{const a=document.createElement("input");a.type="file",a.accept=".csv,text/csv",a.onchange=f=>{var Y;const w=(Y=f.target.files)==null?void 0:Y[0];if(!w)return;const A=new FormData;A.append("file",w),P.post(u.route("script.import-csv"),A,{forceFormData:!0,preserveScroll:!0})},a.click()},rs=()=>{const a=u.route("script.export-all");window.location.href=a};return e.jsxs(is,{breadcrumbs:Hs,children:[e.jsx(ns,{title:s?"Recycle bin":"Scripts"}),e.jsxs("div",{className:"relative flex h-full flex-1 flex-col gap-8 p-4 md:p-6 lg:p-8",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("h1",{className:"text-2xl font-semibold tracking-tight md:text-3xl",children:[s?"Recycle bin":"Scripts",k>0&&e.jsxs("span",{className:"text-muted-foreground ml-1.5 text-base font-normal md:text-lg",children:["(",k,")"]})]}),s&&e.jsx(v,{href:K,children:e.jsx(N,{variant:"ghost",size:"sm",children:"Back to Scripts"})})]}),e.jsx("p",{className:"text-muted-foreground max-w-xl text-sm md:text-base",children:s?"Restore or permanently delete scripts. Items here are automatically removed after 30 days.":"Write, refine, and export scripts. Long form and shorts in one place."}),!s&&e.jsxs(Pe,{type:"single",value:H,onValueChange:a=>a&&R({view:a}),className:"mt-2 justify-start",children:[e.jsx(Q,{value:"all","aria-label":"All scripts I can access",children:"All scripts"}),e.jsx(Q,{value:"mine","aria-label":"Only my scripts",children:"Just mine"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[!s&&e.jsx(v,{href:u.route("script.create"),children:e.jsxs(N,{className:"cursor-pointer gap-2 shadow-sm",children:[e.jsx(J,{className:"h-4 w-4"}),"New script"]})}),e.jsxs(le,{children:[e.jsx(oe,{asChild:!0,children:e.jsx(N,{variant:"outline",size:"icon",className:"h-9 w-9 shrink-0","aria-label":"Page menu",children:e.jsx(Os,{className:"h-4 w-4"})})}),e.jsxs(ne,{align:"end",className:"min-w-[10rem]",children:[!s&&e.jsxs(e.Fragment,{children:[e.jsxs(g,{className:"cursor-pointer gap-2",onClick:as,children:[e.jsx(ze,{className:"h-4 w-4"}),"Import CSV"]}),e.jsxs(g,{className:"cursor-pointer gap-2",onClick:rs,children:[e.jsx(ie,{className:"h-4 w-4"}),"Export all CSV"]}),e.jsx(g,{className:"cursor-pointer gap-2",asChild:!0,children:e.jsxs(v,{href:u.route("script.calendar"),children:[e.jsx(Le,{className:"h-4 w-4"}),"Calendar"]})}),e.jsx(g,{className:"cursor-pointer gap-2",asChild:!0,children:e.jsxs(v,{href:u.route("script.transcripts"),children:[e.jsx(_s,{className:"h-4 w-4"}),"YouTube transcripts"]})}),e.jsx(g,{className:"cursor-pointer gap-2",asChild:!0,children:e.jsxs(v,{href:Xe,children:[e.jsx(V,{className:"h-4 w-4"}),"Recycle bin"]})}),S.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(fs,{}),e.jsxs(g,{className:"cursor-pointer gap-2 text-destructive focus:text-destructive",onSelect:()=>{setTimeout(()=>z(!0),0)},children:[e.jsx(V,{className:"h-4 w-4"}),"Delete all"]})]})]}),s&&e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"cursor-pointer gap-2",asChild:!0,children:e.jsxs(v,{href:K,children:[e.jsx(ke,{className:"h-4 w-4"}),"Back to Scripts"]})}),S.length>0&&e.jsxs(g,{className:"cursor-pointer gap-2 text-destructive focus:text-destructive",onSelect:()=>{setTimeout(()=>E(!0),0)},children:[e.jsx(V,{className:"h-4 w-4"}),"Empty recycle bin"]})]})]})]})]})]}),(!r||h)&&e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex flex-1 flex-wrap items-center gap-2",children:[e.jsxs("div",{className:"relative min-w-0 flex-1 sm:max-w-xs lg:max-w-sm",children:[e.jsx(De,{className:"text-muted-foreground pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2"}),e.jsx(ae,{type:"search",placeholder:"Search scripts...",value:q,onChange:a=>ss(a.target.value),className:"pl-9"})]}),e.jsxs(le,{children:[e.jsx(oe,{asChild:!0,children:e.jsxs(N,{variant:"outline",size:"sm",className:"gap-1.5","aria-label":"Sort",children:[e.jsx(Gs,{className:"h-4 w-4"}),ts]})}),e.jsx(ne,{align:"start",className:"min-w-[11rem]",children:(s?Fe:Ie).map(a=>e.jsx(g,{className:"cursor-pointer",onSelect:()=>R({sort:a.value}),children:a.label},a.value))})]}),!s&&d&&c.length>0&&e.jsxs(Ns,{value:m.created_by!=null?String(m.created_by):"all",onValueChange:a=>R({created_by:a==="all"?null:Number(a)}),children:[e.jsx(bs,{className:"w-[11rem] shrink-0","aria-label":"Filter by writer",children:e.jsx(ys,{placeholder:"All writers"})}),e.jsxs(ws,{children:[e.jsx(Te,{value:"all",children:"All writers"}),c.map(a=>e.jsx(Te,{value:String(a.user_id),children:a.name},a.user_id))]})]}),e.jsx(Ws,{scriptTypes:o,filters:m,trashed:s,onApply:a=>R(a),hasActiveFilters:h}),h&&e.jsx(N,{variant:"ghost",size:"sm",className:"text-muted-foreground",onClick:me,children:"Clear filters"})]}),e.jsxs(Pe,{type:"single",value:j,onValueChange:a=>a&&b(a),className:"justify-start",children:[e.jsx(Q,{value:"grid","aria-label":"Grid view",children:e.jsx(Cs,{className:"h-4 w-4"})}),e.jsx(Q,{value:"list","aria-label":"List view",children:e.jsx(Ss,{className:"h-4 w-4"})})]})]}),U?j==="grid"?e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((a,f)=>e.jsx(qs,{},f))}):e.jsx("div",{className:"flex flex-col gap-2",children:Array.from({length:8}).map((a,f)=>e.jsx(Ks,{},f))}):r?e.jsx(I,{className:"border-dashed bg-muted/30",children:e.jsxs(F,{className:"flex flex-col items-center justify-center gap-6 py-16 px-6 text-center",children:[e.jsx("div",{className:"rounded-full bg-primary/10 p-4",children:s?e.jsx(V,{className:"h-10 w-10 text-muted-foreground"}):e.jsx(ke,{className:"h-10 w-10 text-primary"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-lg font-semibold",children:s?"No deleted scripts":"No scripts yet"}),e.jsx("p",{className:"text-muted-foreground max-w-sm text-sm",children:s?"Deleted scripts are removed automatically after 30 days.":"Create your first script to get started. Use the editor to write, generate title ideas, and export descriptions."})]}),!s&&e.jsx(v,{href:u.route("script.create"),children:e.jsxs(N,{size:"lg",className:"cursor-pointer gap-2",children:[e.jsx(J,{className:"h-4 w-4"}),"Create your first script"]})}),s&&e.jsx(v,{href:K,children:e.jsx(N,{variant:"outline",size:"lg",children:"Back to Scripts"})})]})}):Ke?e.jsx(I,{className:"border-dashed bg-muted/20",children:e.jsxs(F,{className:"flex flex-col items-center justify-center gap-4 py-12 text-center",children:[e.jsx(De,{className:"text-muted-foreground h-10 w-10"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"font-medium",children:"No scripts match your filters"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Try changing or clearing the search and filters to see more scripts."})]}),e.jsx(N,{variant:"outline",size:"sm",onClick:me,children:"Clear filters"})]})}):j==="grid"?e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[!s&&e.jsx(v,{href:u.route("script.create"),className:"block",children:e.jsx(I,{className:"h-full cursor-pointer border-dashed bg-muted/20 transition-colors hover:border-primary/40 hover:bg-muted/40",children:e.jsxs(F,{className:"flex flex-col items-center justify-center gap-3 py-12",children:[e.jsx("div",{className:"rounded-full border-2 border-dashed border-muted-foreground/30 p-4",children:e.jsx(J,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("span",{className:"font-medium text-muted-foreground",children:"New script"}),e.jsx("span",{className:"text-center text-sm text-muted-foreground",children:"Start from scratch"})]})})}),S.map(a=>e.jsx(Oe,{script:a,tenantRouter:u,trashed:s},a.id))]}):e.jsxs("div",{className:"flex flex-col gap-2",children:[!s&&e.jsx(v,{href:u.route("script.create"),children:e.jsx(I,{className:"cursor-pointer border-dashed bg-muted/20 transition-colors hover:border-primary/40 hover:bg-muted/40",children:e.jsxs(F,{className:"flex flex-row items-center gap-4 py-4",children:[e.jsx("div",{className:"rounded-full border-2 border-dashed border-muted-foreground/30 p-3",children:e.jsx(J,{className:"h-5 w-5 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-muted-foreground",children:"New script"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Start from scratch"})]})]})})}),S.map(a=>e.jsx(Oe,{script:a,tenantRouter:u,trashed:s},a.id))]})]}),e.jsx(ve,{open:G,onOpenChange:z,children:e.jsxs(Ne,{children:[e.jsxs(be,{children:[e.jsx(ye,{children:"Delete all scripts?"}),e.jsx(we,{children:"All scripts will be moved to the recycle bin. You can restore them from there before they are permanently removed after 30 days."})]}),e.jsxs(_e,{children:[e.jsx(Ce,{children:"Cancel"}),e.jsx(Se,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:()=>P.post(u.route("script.delete-all")),children:"Delete all"})]})]})}),e.jsx(ve,{open:$,onOpenChange:E,children:e.jsxs(Ne,{children:[e.jsxs(be,{children:[e.jsx(ye,{children:"Empty recycle bin?"}),e.jsx(we,{children:"All scripts in the recycle bin will be permanently deleted. This cannot be undone."})]}),e.jsxs(_e,{children:[e.jsx(Ce,{children:"Cancel"}),e.jsx(Se,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:()=>P.post(u.route("script.empty-trash")),children:"Empty recycle bin"})]})]})})]})}export{ma as default};
