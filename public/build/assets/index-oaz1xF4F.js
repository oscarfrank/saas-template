import{r as m,j as e,N as y,H as ls,L as v,a as P}from"./app-DU4M08QO.js";import{A as os}from"./app-layout-CWJDu2yd.js";import{c as is,B as N}from"./button-0DWS1uOF.js";import{C as I,c as G,a as Re}from"./card-CIVp5v17.js";import{B as je}from"./badge-CRsyjkeS.js";import{I as te}from"./input-z-FCfDx3.js";import{u as ne,P as ae,c as ns,a as cs}from"./index-Ba8EDFfi.js";import{I as ds,c as Ve,R as us}from"./index-ELRl1PxQ.js";import{u as ms}from"./index-C31rQuzh.js";import{c as Me}from"./utils-DawFQoOT.js";import{u as ps}from"./use-tenant-router-mhkU5Kgb.js";import{D as re,a as le,b as oe,c as g,d as xs}from"./dropdown-menu-BSZHQ9yV.js";import{A as ve,a as Ne,b as be,c as ye,d as we,e as _e,f as Ce,g as Se}from"./alert-dialog-BIWExIJi.js";import{P as hs,a as fs,b as gs}from"./popover-DnY4cizK.js";import{C as se}from"./checkbox-DTiYXd0I.js";import{L as Z}from"./label-BsVN1GsZ.js";import{S as C}from"./skeleton-DeAfgcQK.js";import{S as js,a as vs,b as Ns,c as bs,d as Te}from"./select-DVGvg1wx.js";import{P as J}from"./plus-zMgbV9C_.js";import{c as ce}from"./createLucideIcon-Kjqtfux8.js";import{F as ze}from"./file-text-BaK0CXIP.js";import{D as ie}from"./download-BIjBKN6h.js";import{C as ys}from"./calendar-days-CR9IbjNk.js";import{Y as ws}from"./youtube-DSBbsSiv.js";import{T as M}from"./trash-2-C9dHTECi.js";import{q as ke}from"./breadcrumb-BSvnjDea.js";import{S as De}from"./search-BFLwEg_u.js";import{L as _s}from"./package-ChfYgdRA.js";import{L as Cs}from"./list-IQ6t5S2n.js";import{V as Ss}from"./video-BkoYJjUa.js";import{E as Ts}from"./ellipsis-DxQ3-Mvi.js";import{R as ks}from"./rotate-ccw-CuzzFpOv.js";import{P as Ds}from"./pencil-B20--MIi.js";import{C as As}from"./copy-BN2A73P-.js";/* empty css            */import"./sonner-Dh23Qk9O.js";import"./index-rHsITjXj.js";import"./index-DWOVOz5G.js";import"./index-Dax8b012.js";import"./index-BfArzEZR.js";import"./index-BuAmfKhH.js";import"./index-CY-eh05M.js";import"./index-DdLmsglv.js";import"./index-DVV6TkzN.js";import"./check-CljcYcVc.js";import"./index-ksG8cN4f.js";import"./index-sRFl2c6N.js";import"./index-Dy8zP7tC.js";import"./chevron-down-DOpVs1Mm.js";import"./sheet-CHL5JyIf.js";import"./x-DVBtjuUJ.js";import"./use-effective-tenant-6xYuTafE.js";import"./en-US-DSSwd-Ay.js";import"./endOfMonth-BNqLjwTF.js";import"./user-tVN0-8fp.js";import"./dollar-sign-DzSGN3WH.js";import"./credit-card-CRs7L-78.js";import"./mail-CwNPBuud.js";import"./shield-IA8j3DE0.js";import"./circle-alert-CvqXQmI-.js";import"./users-Cd4kg-Sk.js";import"./wallet-CqZJpKq_.js";import"./building-2-CdICHkKN.js";import"./chevron-right-CrQYE_m4.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]],Is=ce("ArrowDownAZ",Ps);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Es=ce("EllipsisVertical",Gs);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],Os=ce("Filter",Fs);var Le="Toggle",Be=m.forwardRef((a,s)=>{const{pressed:i,defaultPressed:n,onPressedChange:o,...c}=a,[d,l]=ne({prop:i,onChange:o,defaultProp:n??!1,caller:Le});return e.jsx(ae.button,{type:"button","aria-pressed":d,"data-state":d?"on":"off","data-disabled":a.disabled?"":void 0,...c,ref:s,onClick:ns(a.onClick,()=>{a.disabled||l(!d)})})});Be.displayName=Le;var D="ToggleGroup",[$e]=cs(D,[Ve]),Ue=Ve(),de=y.forwardRef((a,s)=>{const{type:i,...n}=a;if(i==="single"){const o=n;return e.jsx(Rs,{...o,ref:s})}if(i==="multiple"){const o=n;return e.jsx(Vs,{...o,ref:s})}throw new Error(`Missing prop \`type\` expected on \`${D}\``)});de.displayName=D;var[He,Ye]=$e(D),Rs=y.forwardRef((a,s)=>{const{value:i,defaultValue:n,onValueChange:o=()=>{},...c}=a,[d,l]=ne({prop:i,defaultProp:n??"",onChange:o,caller:D});return e.jsx(He,{scope:a.__scopeToggleGroup,type:"single",value:y.useMemo(()=>d?[d]:[],[d]),onItemActivate:l,onItemDeactivate:y.useCallback(()=>l(""),[l]),children:e.jsx(Ze,{...c,ref:s})})}),Vs=y.forwardRef((a,s)=>{const{value:i,defaultValue:n,onValueChange:o=()=>{},...c}=a,[d,l]=ne({prop:i,defaultProp:n??[],onChange:o,caller:D}),x=y.useCallback(j=>l((b=[])=>[...b,j]),[l]),p=y.useCallback(j=>l((b=[])=>b.filter(E=>E!==j)),[l]);return e.jsx(He,{scope:a.__scopeToggleGroup,type:"multiple",value:d,onItemActivate:x,onItemDeactivate:p,children:e.jsx(Ze,{...c,ref:s})})});de.displayName=D;var[Ms,zs]=$e(D),Ze=y.forwardRef((a,s)=>{const{__scopeToggleGroup:i,disabled:n=!1,rovingFocus:o=!0,orientation:c,dir:d,loop:l=!0,...x}=a,p=Ue(i),j=ms(d),b={role:"group",dir:j,...x};return e.jsx(Ms,{scope:i,rovingFocus:o,disabled:n,children:o?e.jsx(us,{asChild:!0,...p,orientation:c,dir:j,loop:l,children:e.jsx(ae.div,{...b,ref:s})}):e.jsx(ae.div,{...b,ref:s})})}),W="ToggleGroupItem",Je=y.forwardRef((a,s)=>{const i=Ye(W,a.__scopeToggleGroup),n=zs(W,a.__scopeToggleGroup),o=Ue(a.__scopeToggleGroup),c=i.value.includes(a.value),d=n.disabled||a.disabled,l={...a,pressed:c,disabled:d},x=y.useRef(null);return n.rovingFocus?e.jsx(ds,{asChild:!0,...o,focusable:!d,active:c,ref:x,children:e.jsx(Ae,{...l,ref:s})}):e.jsx(Ae,{...l,ref:s})});Je.displayName=W;var Ae=y.forwardRef((a,s)=>{const{__scopeToggleGroup:i,value:n,...o}=a,c=Ye(W,i),d={role:"radio","aria-checked":a.pressed,"aria-pressed":void 0},l=c.type==="single"?d:void 0;return e.jsx(Be,{...l,...o,ref:s,onPressedChange:x=>{x?c.onItemActivate(n):c.onItemDeactivate(n)}})}),Ls=de,Bs=Je;const $s=is("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}}),Qe=m.createContext({size:"default",variant:"default"});function Pe({className:a,variant:s,size:i,children:n,...o}){return e.jsx(Ls,{"data-slot":"toggle-group","data-variant":s,"data-size":i,className:Me("group/toggle-group flex items-center rounded-md data-[variant=outline]:shadow-xs",a),...o,children:e.jsx(Qe.Provider,{value:{variant:s,size:i},children:n})})}function Q({className:a,children:s,variant:i,size:n,...o}){const c=m.useContext(Qe);return e.jsx(Bs,{"data-slot":"toggle-group-item","data-variant":c.variant||i,"data-size":c.size||n,className:Me($s({variant:c.variant||i,size:c.size||n}),"min-w-0 shrink-0 rounded-none shadow-none first:rounded-l-md last:rounded-r-md focus:z-10 focus-visible:z-10 data-[variant=outline]:border-l-0 data-[variant=outline]:first:border-l",a),...o,children:s})}const Us=[{title:"Scripts",href:"/script"}],Ie=[{value:"updated_desc",label:"Newest updated"},{value:"updated_asc",label:"Oldest updated"},{value:"created_desc",label:"Newest first"},{value:"created_asc",label:"Oldest first"},{value:"title_asc",label:"Title A–Z"},{value:"title_desc",label:"Title Z–A"},{value:"scheduled_desc",label:"Scheduled (latest)"},{value:"scheduled_asc",label:"Scheduled (earliest)"}],Ge=[{value:"deleted_desc",label:"Deleted (newest)"},{value:"deleted_asc",label:"Deleted (oldest)"}],Hs=[{value:"draft",label:"Draft"},{value:"writing",label:"Writing"},{value:"completed",label:"Completed"},{value:"published",label:"Published"},{value:"in_review",label:"In review"},{value:"archived",label:"Archived"}],Ys=[{value:"not_shot",label:"Not shot"},{value:"shot",label:"Shot"},{value:"editing",label:"Editing"},{value:"edited",label:"Edited"}],Zs=[{value:"created_at",label:"Created"},{value:"updated_at",label:"Updated"},{value:"scheduled_at",label:"Scheduled"}];function Js(a){return Array.isArray(a)?a.map(s=>Number(s)).filter(s=>!Number.isNaN(s)):typeof a=="number"&&!Number.isNaN(a)?[a]:[]}function Ee(a){return Array.isArray(a)?a.filter(s=>typeof s=="string"):typeof a=="string"&&a!==""?[a]:[]}function Qs({scriptTypes:a,filters:s,trashed:i,onApply:n}){const o=m.useMemo(()=>Js(s.script_type_id),[s.script_type_id]),c=m.useMemo(()=>Ee(s.status),[s.status]),d=m.useMemo(()=>Ee(s.production_status),[s.production_status]),[l,x]=m.useState(!1),[p,j]=m.useState(o),[b,E]=m.useState(c),[z,U]=m.useState(d),[F,H]=m.useState(s.date_field??null),[L,O]=m.useState(s.date_from??""),[T,u]=m.useState(s.date_to??"");m.useEffect(()=>{l&&(j(o),E(c),U(d),H(s.date_field??null),O(s.date_from??""),u(s.date_to??""))},[l,o,c,d,s.date_field,s.date_from,s.date_to]);const B=r=>{j(h=>h.includes(r)?h.filter(k=>k!==r):[...h,r])},Y=r=>{E(h=>h.includes(r)?h.filter(k=>k!==r):[...h,r])},q=r=>{U(h=>h.includes(r)?h.filter(k=>k!==r):[...h,r])},R=()=>{n({script_type_id:p,status:b,production_status:z,date_field:F||null,date_from:L||null,date_to:T||null}),x(!1)};if(i)return null;const S=(o.length>0?1:0)+(c.length>0?1:0)+(d.length>0?1:0)+(s.date_field&&(s.date_from||s.date_to)?1:0);return e.jsxs(hs,{open:l,onOpenChange:x,children:[e.jsx(fs,{asChild:!0,children:e.jsxs(N,{variant:"outline",size:"sm",className:"gap-1.5","aria-label":"Filter",children:[e.jsx(Os,{className:"h-4 w-4"}),"Filter",S>0&&e.jsx("span",{className:"bg-primary text-primary-foreground rounded-full px-1.5 py-0 text-xs",children:S})]})}),e.jsx(gs,{align:"start",className:"w-80",children:e.jsxs("div",{className:"space-y-4",children:[a.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-xs font-medium",children:"Category"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(r=>e.jsxs("label",{className:"flex cursor-pointer items-center gap-2",children:[e.jsx(se,{checked:p.includes(r.id),onCheckedChange:()=>B(r.id)}),e.jsx("span",{className:"text-sm",children:r.name})]},r.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-xs font-medium",children:"Status"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Hs.map(r=>e.jsxs("label",{className:"flex cursor-pointer items-center gap-2",children:[e.jsx(se,{checked:b.includes(r.value),onCheckedChange:()=>Y(r.value)}),e.jsx("span",{className:"text-sm",children:r.label})]},r.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-xs font-medium",children:"Production"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Ys.map(r=>e.jsxs("label",{className:"flex cursor-pointer items-center gap-2",children:[e.jsx(se,{checked:z.includes(r.value),onCheckedChange:()=>q(r.value)}),e.jsx("span",{className:"text-sm",children:r.label})]},r.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-xs font-medium",children:"Date range"}),e.jsxs("select",{className:"border-input bg-background ring-offset-background focus-visible:ring-ring h-9 w-full rounded-md border px-3 py-1 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",value:F??"",onChange:r=>H(r.target.value||null),children:[e.jsx("option",{value:"",children:"Any date"}),Zs.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))]}),(F??"")!==""&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(te,{type:"date",placeholder:"From",value:L,onChange:r=>O(r.target.value),className:"text-sm"}),e.jsx(te,{type:"date",placeholder:"To",value:T,onChange:r=>u(r.target.value),className:"text-sm"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>x(!1),children:"Cancel"}),e.jsx(N,{size:"sm",onClick:R,children:"Apply"})]})]})})]})}function Ws(){return e.jsxs(I,{className:"overflow-hidden",children:[e.jsxs(Re,{className:"space-y-2 pb-2",children:[e.jsx(C,{className:"h-5 w-3/4"}),e.jsx(C,{className:"h-5 w-16 rounded-full"})]}),e.jsxs(G,{className:"pt-0",children:[e.jsx(C,{className:"h-4 w-full"}),e.jsx(C,{className:"h-4 w-full"}),e.jsx(C,{className:"h-4 w-2/3"}),e.jsx(C,{className:"mt-3 h-3 w-24"})]})]})}function qs(){return e.jsx(I,{children:e.jsxs(G,{className:"flex flex-row items-center gap-4 py-4",children:[e.jsx(C,{className:"h-10 w-10 shrink-0 rounded-full"}),e.jsxs("div",{className:"min-w-0 flex-1 space-y-2",children:[e.jsx(C,{className:"h-4 w-1/3"}),e.jsx(C,{className:"h-3 w-1/4"})]}),e.jsx(C,{className:"h-6 w-20 rounded-full"})]})})}const Fe={"long-form":{label:"Long Form",icon:ze,className:"bg-pink-500/10 text-pink-600 dark:text-pink-400 border-pink-500/20"},shorts:{label:"Shorts",icon:Ss,className:"bg-blue-500/10 text-blue-600 dark:text-blue-400 border-blue-500/20"}};function Oe({script:a,tenantRouter:s,trashed:i}){const n=Fe[a.platform]??Fe["long-form"],o=n.icon,c=s.route("script.edit",{script:a.uuid}),d=e.jsxs(I,{className:`group flex h-full flex-col overflow-hidden transition-shadow hover:shadow-md ${i?"":"cursor-pointer"}`,children:[e.jsxs(Re,{className:"flex flex-row items-start justify-between gap-2 space-y-0 pb-2",children:[e.jsxs("div",{className:"min-w-0 flex-1 space-y-1",children:[e.jsx("h3",{className:"font-semibold leading-tight line-clamp-2",children:a.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-1.5",children:[e.jsxs(je,{variant:"outline",className:`w-fit text-xs ${n.className}`,children:[e.jsx(o,{className:"mr-1 h-3 w-3"}),n.label]}),a.is_co_author&&e.jsx(je,{variant:"secondary",className:"w-fit text-xs",children:"Co-author"})]})]}),e.jsxs(re,{children:[e.jsx(le,{asChild:!0,onClick:l=>l.preventDefault(),children:e.jsx(N,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0 opacity-0 transition-opacity group-hover:opacity-100",children:e.jsx(Ts,{className:"h-4 w-4"})})}),e.jsx(oe,{align:"end",children:i?e.jsxs(e.Fragment,{children:[e.jsxs(g,{className:"cursor-pointer gap-2",onClick:l=>{l.preventDefault(),P.post(s.route("script.restore",{script:a.uuid}))},children:[e.jsx(ks,{className:"h-4 w-4"}),"Restore"]}),e.jsxs(g,{className:"cursor-pointer gap-2 text-destructive focus:text-destructive",onClick:l=>{l.preventDefault(),window.confirm("Permanently delete this script? This cannot be undone and will remove all title options, thumbnails, and content.")&&P.delete(s.route("script.force-destroy",{script:a.uuid}))},children:[e.jsx(M,{className:"h-4 w-4"}),"Delete permanently"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"cursor-pointer gap-2",asChild:!0,children:e.jsxs(v,{href:c,children:[e.jsx(Ds,{className:"h-4 w-4"}),"Edit"]})}),e.jsxs(g,{className:"cursor-pointer gap-2",children:[e.jsx(As,{className:"h-4 w-4"}),"Duplicate"]}),e.jsxs(g,{className:"cursor-pointer gap-2",onClick:l=>{l.preventDefault();const x=s.route("script.export",{script:a.uuid,format:"json"});window.location.href=x},children:[e.jsx(ie,{className:"h-4 w-4"}),"Export JSON"]}),e.jsxs(g,{className:"cursor-pointer gap-2",onClick:l=>{l.preventDefault();const x=s.route("script.export",{script:a.uuid,format:"csv"});window.location.href=x},children:[e.jsx(ie,{className:"h-4 w-4"}),"Export CSV"]}),e.jsxs(g,{className:"cursor-pointer gap-2 text-destructive focus:text-destructive",onClick:l=>{l.preventDefault(),window.confirm("Move this script to the recycle bin? You can restore it later.")&&P.delete(s.route("script.destroy",{script:a.uuid}))},children:[e.jsx(M,{className:"h-4 w-4"}),"Delete"]})]})})]})]}),e.jsxs(G,{className:"flex-1 pt-0",children:[e.jsx("p",{className:"text-muted-foreground line-clamp-3 text-sm",children:a.excerpt}),e.jsx("p",{className:"text-muted-foreground/80 mt-3 text-xs",children:i&&a.deleted_at_human?`Deleted ${a.deleted_at_human}`:`Updated ${a.updatedAt}`})]})]});return i?d:e.jsx(v,{href:c,children:d})}const Ks={search:null,script_type_id:[],status:[],production_status:[],date_field:null,date_from:null,date_to:null,created_by:null};function ca({scripts:a=[],trashed:s=!1,scriptTypes:i=[],filters:n,sort:o="updated_desc",view:c="all",canManageScriptAccess:d=!1,hasOrgScriptRole:l=!1,writers:x=[]}){var me,pe,xe;const p=ps(),[j,b]=m.useState("grid"),[E,z]=m.useState(!1),[U,F]=m.useState(!1),[H,L]=m.useState(!1),O=m.useRef(null),T=m.useRef(void 0),u=n??Ks,B=s&&(o==="updated_desc"||o==="updated_asc")?"deleted_desc":o,Y=c==="mine"?"mine":"all",[q,R]=m.useState(u.search??"");m.useEffect(()=>{const t=u.search??"";T.current===void 0?(T.current=t,R(t)):t===T.current&&R(t)},[u.search]);const S=Array.isArray(a)?a:[],r=S.length===0,h=u.search!=null&&u.search!==""||(((me=u.script_type_id)==null?void 0:me.length)??0)>0||(((pe=u.status)==null?void 0:pe.length)??0)>0||(((xe=u.production_status)==null?void 0:xe.length)??0)>0||u.date_field!=null&&(u.date_from!=null||u.date_to!=null)||u.created_by!=null,k=S.length,We=h&&r,K=p.route("script.index"),qe=p.route("script.index",{trashed:1}),Ke=(t={})=>{const f=s?{trashed:1}:{},w=t.search!==void 0?t.search:u.search??"",A=t.script_type_id!==void 0?t.script_type_id:u.script_type_id??[],$=t.status!==void 0?t.status:u.status??[],he=t.production_status!==void 0?t.production_status:u.production_status??[],fe=t.date_field!==void 0?t.date_field:u.date_field??null,X=t.date_from!==void 0?t.date_from:u.date_from??null,ee=t.date_to!==void 0?t.date_to:u.date_to??null,as=t.sort!==void 0?t.sort:B,rs=t.view!==void 0?t.view:Y,ge=t.created_by!==void 0?t.created_by:u.created_by??null,_={...f,sort:as};return rs==="mine"&&(_.view="mine"),ge!=null&&(_.created_by=ge),w&&(_.search=w),A.length>0&&(_.script_type_id=A),$.length>0&&(_.status=$),he.length>0&&(_.production_status=he),fe&&(X||ee)&&(_.date_field=fe,X&&(_.date_from=X),ee&&(_.date_to=ee)),_},V=(t={})=>{const f=p.route("script.index"),w=Ke(t),A=w.search??"";T.current=A,P.get(f,w,{preserveState:!0,preserveScroll:!0,only:["scripts","filters","sort","view","scriptTypes","writers"],onStart:()=>L(!0),onFinish:()=>L(!1)})},Xe=t=>{const f=t.trim()||"";T.current=f,R(t),O.current&&clearTimeout(O.current),O.current=setTimeout(()=>{V({search:f||void 0})},350)},ue=()=>{R(""),V({search:"",script_type_id:[],status:[],production_status:[],date_field:null,date_from:null,date_to:null,created_by:null})},es=m.useMemo(()=>{const f=(s?Ge:Ie).find(w=>w.value===B);return(f==null?void 0:f.label)??"Sort"},[B,s]),ss=()=>{const t=document.createElement("input");t.type="file",t.accept=".csv,text/csv",t.onchange=f=>{var $;const w=($=f.target.files)==null?void 0:$[0];if(!w)return;const A=new FormData;A.append("file",w),P.post(p.route("script.import-csv"),A,{forceFormData:!0,preserveScroll:!0})},t.click()},ts=()=>{const t=p.route("script.export-all");window.location.href=t};return e.jsxs(os,{breadcrumbs:Us,children:[e.jsx(ls,{title:s?"Recycle bin":"Scripts"}),e.jsxs("div",{className:"relative flex h-full flex-1 flex-col gap-8 p-4 md:p-6 lg:p-8",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("h1",{className:"text-2xl font-semibold tracking-tight md:text-3xl",children:[s?"Recycle bin":"Scripts",k>0&&e.jsxs("span",{className:"text-muted-foreground ml-1.5 text-base font-normal md:text-lg",children:["(",k,")"]})]}),s&&e.jsx(v,{href:K,children:e.jsx(N,{variant:"ghost",size:"sm",children:"Back to Scripts"})})]}),e.jsx("p",{className:"text-muted-foreground max-w-xl text-sm md:text-base",children:s?"Restore or permanently delete scripts. Items here are automatically removed after 30 days.":"Write, refine, and export scripts. Long form and shorts in one place."}),!s&&e.jsxs(Pe,{type:"single",value:Y,onValueChange:t=>t&&V({view:t}),className:"mt-2 justify-start",children:[e.jsx(Q,{value:"all","aria-label":"All scripts I can access",children:"All scripts"}),e.jsx(Q,{value:"mine","aria-label":"Only my scripts",children:"Just mine"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[!s&&e.jsx(v,{href:p.route("script.create"),children:e.jsxs(N,{className:"cursor-pointer gap-2 shadow-sm",children:[e.jsx(J,{className:"h-4 w-4"}),"New script"]})}),e.jsxs(re,{children:[e.jsx(le,{asChild:!0,children:e.jsx(N,{variant:"outline",size:"icon",className:"h-9 w-9 shrink-0","aria-label":"Page menu",children:e.jsx(Es,{className:"h-4 w-4"})})}),e.jsxs(oe,{align:"end",className:"min-w-[10rem]",children:[!s&&e.jsxs(e.Fragment,{children:[e.jsxs(g,{className:"cursor-pointer gap-2",onClick:ss,children:[e.jsx(ze,{className:"h-4 w-4"}),"Import CSV"]}),e.jsxs(g,{className:"cursor-pointer gap-2",onClick:ts,children:[e.jsx(ie,{className:"h-4 w-4"}),"Export all CSV"]}),e.jsx(g,{className:"cursor-pointer gap-2",asChild:!0,children:e.jsxs(v,{href:p.route("script.calendar"),children:[e.jsx(ys,{className:"h-4 w-4"}),"Calendar"]})}),e.jsx(g,{className:"cursor-pointer gap-2",asChild:!0,children:e.jsxs(v,{href:p.route("script.transcripts"),children:[e.jsx(ws,{className:"h-4 w-4"}),"YouTube transcripts"]})}),e.jsx(g,{className:"cursor-pointer gap-2",asChild:!0,children:e.jsxs(v,{href:qe,children:[e.jsx(M,{className:"h-4 w-4"}),"Recycle bin"]})}),S.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(xs,{}),e.jsxs(g,{className:"cursor-pointer gap-2 text-destructive focus:text-destructive",onSelect:()=>{setTimeout(()=>z(!0),0)},children:[e.jsx(M,{className:"h-4 w-4"}),"Delete all"]})]})]}),s&&e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"cursor-pointer gap-2",asChild:!0,children:e.jsxs(v,{href:K,children:[e.jsx(ke,{className:"h-4 w-4"}),"Back to Scripts"]})}),S.length>0&&e.jsxs(g,{className:"cursor-pointer gap-2 text-destructive focus:text-destructive",onSelect:()=>{setTimeout(()=>F(!0),0)},children:[e.jsx(M,{className:"h-4 w-4"}),"Empty recycle bin"]})]})]})]})]})]}),(!r||h)&&e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex flex-1 flex-wrap items-center gap-2",children:[e.jsxs("div",{className:"relative min-w-0 flex-1 sm:max-w-xs lg:max-w-sm",children:[e.jsx(De,{className:"text-muted-foreground pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2"}),e.jsx(te,{type:"search",placeholder:"Search scripts...",value:q,onChange:t=>Xe(t.target.value),className:"pl-9"})]}),e.jsxs(re,{children:[e.jsx(le,{asChild:!0,children:e.jsxs(N,{variant:"outline",size:"sm",className:"gap-1.5","aria-label":"Sort",children:[e.jsx(Is,{className:"h-4 w-4"}),es]})}),e.jsx(oe,{align:"start",className:"min-w-[11rem]",children:(s?Ge:Ie).map(t=>e.jsx(g,{className:"cursor-pointer",onSelect:()=>V({sort:t.value}),children:t.label},t.value))})]}),!s&&d&&x.length>0&&e.jsxs(js,{value:u.created_by!=null?String(u.created_by):"all",onValueChange:t=>V({created_by:t==="all"?null:Number(t)}),children:[e.jsx(vs,{className:"w-[11rem] shrink-0","aria-label":"Filter by writer",children:e.jsx(Ns,{placeholder:"All writers"})}),e.jsxs(bs,{children:[e.jsx(Te,{value:"all",children:"All writers"}),x.map(t=>e.jsx(Te,{value:String(t.user_id),children:t.name},t.user_id))]})]}),e.jsx(Qs,{scriptTypes:i,filters:u,trashed:s,onApply:t=>V(t),hasActiveFilters:h}),h&&e.jsx(N,{variant:"ghost",size:"sm",className:"text-muted-foreground",onClick:ue,children:"Clear filters"})]}),e.jsxs(Pe,{type:"single",value:j,onValueChange:t=>t&&b(t),className:"justify-start",children:[e.jsx(Q,{value:"grid","aria-label":"Grid view",children:e.jsx(_s,{className:"h-4 w-4"})}),e.jsx(Q,{value:"list","aria-label":"List view",children:e.jsx(Cs,{className:"h-4 w-4"})})]})]}),H?j==="grid"?e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((t,f)=>e.jsx(Ws,{},f))}):e.jsx("div",{className:"flex flex-col gap-2",children:Array.from({length:8}).map((t,f)=>e.jsx(qs,{},f))}):r?e.jsx(I,{className:"border-dashed bg-muted/30",children:e.jsxs(G,{className:"flex flex-col items-center justify-center gap-6 py-16 px-6 text-center",children:[e.jsx("div",{className:"rounded-full bg-primary/10 p-4",children:s?e.jsx(M,{className:"h-10 w-10 text-muted-foreground"}):e.jsx(ke,{className:"h-10 w-10 text-primary"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-lg font-semibold",children:s?"No deleted scripts":"No scripts yet"}),e.jsx("p",{className:"text-muted-foreground max-w-sm text-sm",children:s?"Deleted scripts are removed automatically after 30 days.":"Create your first script to get started. Use the editor to write, generate title ideas, and export descriptions."})]}),!s&&e.jsx(v,{href:p.route("script.create"),children:e.jsxs(N,{size:"lg",className:"cursor-pointer gap-2",children:[e.jsx(J,{className:"h-4 w-4"}),"Create your first script"]})}),s&&e.jsx(v,{href:K,children:e.jsx(N,{variant:"outline",size:"lg",children:"Back to Scripts"})})]})}):We?e.jsx(I,{className:"border-dashed bg-muted/20",children:e.jsxs(G,{className:"flex flex-col items-center justify-center gap-4 py-12 text-center",children:[e.jsx(De,{className:"text-muted-foreground h-10 w-10"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"font-medium",children:"No scripts match your filters"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Try changing or clearing the search and filters to see more scripts."})]}),e.jsx(N,{variant:"outline",size:"sm",onClick:ue,children:"Clear filters"})]})}):j==="grid"?e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[!s&&e.jsx(v,{href:p.route("script.create"),className:"block",children:e.jsx(I,{className:"h-full cursor-pointer border-dashed bg-muted/20 transition-colors hover:border-primary/40 hover:bg-muted/40",children:e.jsxs(G,{className:"flex flex-col items-center justify-center gap-3 py-12",children:[e.jsx("div",{className:"rounded-full border-2 border-dashed border-muted-foreground/30 p-4",children:e.jsx(J,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("span",{className:"font-medium text-muted-foreground",children:"New script"}),e.jsx("span",{className:"text-center text-sm text-muted-foreground",children:"Start from scratch"})]})})}),S.map(t=>e.jsx(Oe,{script:t,tenantRouter:p,trashed:s},t.id))]}):e.jsxs("div",{className:"flex flex-col gap-2",children:[!s&&e.jsx(v,{href:p.route("script.create"),children:e.jsx(I,{className:"cursor-pointer border-dashed bg-muted/20 transition-colors hover:border-primary/40 hover:bg-muted/40",children:e.jsxs(G,{className:"flex flex-row items-center gap-4 py-4",children:[e.jsx("div",{className:"rounded-full border-2 border-dashed border-muted-foreground/30 p-3",children:e.jsx(J,{className:"h-5 w-5 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-muted-foreground",children:"New script"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Start from scratch"})]})]})})}),S.map(t=>e.jsx(Oe,{script:t,tenantRouter:p,trashed:s},t.id))]})]}),e.jsx(ve,{open:E,onOpenChange:z,children:e.jsxs(Ne,{children:[e.jsxs(be,{children:[e.jsx(ye,{children:"Delete all scripts?"}),e.jsx(we,{children:"All scripts will be moved to the recycle bin. You can restore them from there before they are permanently removed after 30 days."})]}),e.jsxs(_e,{children:[e.jsx(Ce,{children:"Cancel"}),e.jsx(Se,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:()=>P.post(p.route("script.delete-all")),children:"Delete all"})]})]})}),e.jsx(ve,{open:U,onOpenChange:F,children:e.jsxs(Ne,{children:[e.jsxs(be,{children:[e.jsx(ye,{children:"Empty recycle bin?"}),e.jsx(we,{children:"All scripts in the recycle bin will be permanently deleted. This cannot be undone."})]}),e.jsxs(_e,{children:[e.jsx(Ce,{children:"Cancel"}),e.jsx(Se,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:()=>P.post(p.route("script.empty-trash")),children:"Empty recycle bin"})]})]})})]})}export{ca as default};
