import{r as g,u as ae,j as e,H as ge,L as i,a as S}from"./app-BCbVRjYH.js";import{A as ye}from"./app-layout-DDUYIrv9.js";import{B as a}from"./button-uRfG0SJk.js";import{C as d,a as c,b as m,c as x}from"./card-BD7iHYUQ.js";import{u as Ne}from"./use-tenant-router-DiYxGHG9.js";import{l as be,m as fe,n as ve}from"./breadcrumb-Kf_Jua1h.js";import{S as _e,a as we,b as De,c as ke,d as Ce}from"./select-DxJnkH9K.js";import{I as A}from"./input-CrGy8JR3.js";import{L as u}from"./label-B0XYP5fN.js";import{A as L,a as T,b as H,c as P,d as F,e as z,f as R,g as $}from"./alert-dialog-C0GOsab4.js";import{D as Se,b as Ae,c as Le,d as Te,e as He,f as Pe}from"./dialog-C80P9A3l.js";import{B as Fe}from"./briefcase-CQp__aGN.js";import{B as ze}from"./building-2-CxDNleOb.js";import{A as Re}from"./arrow-left-BfZHK7-S.js";import{P as le}from"./pencil-Ru2IEAVo.js";import{T as B}from"./trash-2-DpopIwP-.js";import{U as $e}from"./user-B55N5piZ.js";import{C as ne}from"./calendar-DiQ0SID-.js";import{B as Be}from"./banknote-DO-wJ5fb.js";import{C as Ee}from"./credit-card-BcosqvxM.js";import{F as Y}from"./file-text-CFSx456Y.js";import{P as ie}from"./plus-CdWaCr78.js";import{P as oe}from"./printer-DTBBPU6j.js";import{D as Ie}from"./download-CsxJGCi_.js";import{H as Oe}from"./history-BXr6lBXv.js";import{C as Ue}from"./clipboard-list-kPh0VS1v.js";import{L as Ve}from"./list-todo-DkPQIzvI.js";import{F as Ge}from"./folder-kanban-B1APe-GR.js";import{M as qe}from"./message-square-1In2mIgy.js";import{A as Je}from"./award-BZo7m6Jd.js";import{T as Me}from"./triangle-alert-DItQHHiU.js";/* empty css            */import"./sonner-D7WukHuY.js";import"./index-DQu8XgdM.js";import"./utils-DawFQoOT.js";import"./sheet-BWAeJB6C.js";import"./index-DPt8kAZf.js";import"./index-D8qEZ9Gx.js";import"./index-BUJG5R3i.js";import"./index-yqb1x3RI.js";import"./index-CGjHmAMw.js";import"./index-BtBzczEp.js";import"./index-J5wWsuif.js";import"./x-D611PGoW.js";import"./createLucideIcon-GhyqP1ys.js";import"./index-oDWWD3I5.js";import"./index-CRLWXLw8.js";import"./index-BKQezIhM.js";import"./dropdown-menu-RgYEZTz0.js";import"./index-CsWEytiP.js";import"./index-B-AhuyaU.js";import"./check-B9bfcpBy.js";import"./chevron-down-RiCOlSmY.js";import"./skeleton-BmqfrkAd.js";import"./use-effective-tenant-CQ6us_Au.js";import"./en-US-DSSwd-Ay.js";import"./endOfMonth-BNqLjwTF.js";import"./dollar-sign-CPcgpTPL.js";import"./mail-hckPM3CY.js";import"./shield-DZlKfUFe.js";import"./circle-alert-DuZXvBOf.js";import"./package-DUGkiw1_.js";import"./users-69zSRrQI.js";import"./wallet-CbL3ywdH.js";import"./chevron-right-BmqFOubz.js";import"./index-BBDGBUIr.js";function Ye(t){var h,y,N,b,f,v,_;if((h=t.user)!=null&&h.first_name||(y=t.user)!=null&&y.last_name){const D=((N=t.user.first_name)==null?void 0:N.trim().charAt(0))??"",w=((b=t.user.last_name)==null?void 0:b.trim().charAt(0))??"",r=(D+w).toUpperCase(),E=((v=(f=t.user)==null?void 0:f.email)==null?void 0:v.slice(0,1).toUpperCase())??"";return r||E||"?"}return(_=t.user)!=null&&_.email?t.user.email.slice(0,2).toUpperCase():"?"}function p({label:t,value:h,className:y=""}){return e.jsxs("div",{className:y,children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:t}),e.jsx("p",{className:"mt-0.5 text-sm font-medium text-foreground",children:h})]})}function Ke(t){switch(t){case"policy_violation":case"warning":return e.jsx(Me,{className:"h-4 w-4 shrink-0 text-amber-500"});case"commendation":return e.jsx(Je,{className:"h-4 w-4 shrink-0 text-emerald-500"});default:return e.jsx(qe,{className:"h-4 w-4 shrink-0 text-muted-foreground"})}}function ot({staff:t,eventTypeLabels:h,canDeleteEvents:y=!1,runItems:N=[],runItemsTotal:b=0,payslipsTotal:f=0,totalPaid:v=0,eventsTotal:_=0,documentsTotal:D=0,assignedTasksTotal:w=0}){var Z,ee,se,te;const r=Ne(),[E,I]=g.useState(!1),[j,O]=g.useState(null),[K,de]=g.useState(!0),[U,V]=g.useState(null),n=ae({event_type:"note",title:"",description:""}),Q=t.events??[],W=t.position_history??t.positionHistory??[],ce=s=>{s.preventDefault(),n.post(r.route("hr.staff.events.store",{staff:t.uuid}),{preserveScroll:!0,onSuccess:()=>{n.reset(),I(!1)}})},k=t.user?`${t.user.first_name||""} ${t.user.last_name||""}`.trim()||t.user.email:"Staff",[me,G]=g.useState(!1),[xe,C]=g.useState(!1),[q,J]=g.useState(null),l=ae({period_start:"",period_end:"",narration:"",prorate:!1,split_by_period:!0}),pe=()=>{S.delete(r.route("hr.staff.destroy",{staff:t.uuid}),{preserveScroll:!1}),G(!1)},ue=s=>{s.preventDefault(),l.post(r.route("hr.staff.payslips.store",{staff:t.uuid}),{preserveScroll:!0,onSuccess:()=>{l.reset(),C(!1)}})},he=()=>{q&&S.delete(r.route("hr.payslips.destroy",{payslip:q}),{preserveScroll:!0,onSuccess:()=>J(null)})},X=t.payslips??[],je=Ye(t),M=t.passport_photo_path?r.route("hr.staff.passport",{staff:t.uuid}):null;return e.jsxs(ye,{breadcrumbs:[{title:"HR",href:r.route("hr.staff.index")},{title:"Staff",href:r.route("hr.staff.index")},{title:k,href:"#"}],children:[e.jsx(ge,{title:`${k} – Staff`}),e.jsxs("div",{className:"flex flex-1 flex-col",children:[e.jsx("div",{className:"border-b bg-gradient-to-b from-muted/40 to-background",children:e.jsx("div",{className:"mx-auto max-w-4xl px-4 py-8 sm:px-6",children:e.jsxs("div",{className:"flex flex-col items-center gap-6 sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4 sm:flex-row sm:items-center sm:gap-6",children:[e.jsxs(be,{className:"h-24 w-24 rounded-2xl border-4 border-background shadow-lg sm:h-28 sm:w-28",children:[M?e.jsx(fe,{src:M,alt:`${k} passport`,className:"object-cover"}):null,e.jsx(ve,{className:"rounded-2xl bg-primary/10 text-2xl font-semibold text-primary sm:text-3xl",children:je})]}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight text-foreground sm:text-3xl",children:k}),((Z=t.user)==null?void 0:Z.email)&&e.jsx("a",{href:`mailto:${t.user.email}`,className:"mt-1 block text-sm text-muted-foreground hover:text-primary hover:underline",children:t.user.email}),e.jsxs("div",{className:"mt-2 flex flex-wrap justify-center gap-2 sm:justify-start",children:[t.job_title&&e.jsxs("span",{className:"inline-flex items-center rounded-full bg-muted px-3 py-1 text-xs font-medium text-muted-foreground",children:[e.jsx(Fe,{className:"mr-1.5 h-3.5 w-3.5"}),t.job_title]}),t.department&&e.jsxs("span",{className:"inline-flex items-center rounded-full bg-muted px-3 py-1 text-xs font-medium text-muted-foreground",children:[e.jsx(ze,{className:"mr-1.5 h-3.5 w-3.5"}),t.department]})]})]})]}),e.jsxs("div",{className:"flex shrink-0 flex-wrap gap-2",children:[e.jsx(a,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(i,{href:r.route("hr.staff.index"),children:[e.jsx(Re,{className:"mr-2 h-4 w-4"}),"Back"]})}),e.jsx(a,{size:"sm",asChild:!0,children:e.jsxs(i,{href:r.route("hr.staff.edit",{staff:t.uuid}),children:[e.jsx(le,{className:"mr-2 h-4 w-4"}),"Edit"]})}),e.jsxs(a,{variant:"outline",size:"sm",className:"text-destructive hover:bg-destructive/10 hover:text-destructive",onClick:()=>G(!0),children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),"Remove HR details"]})]})]})})}),e.jsx("div",{className:"mx-auto w-full max-w-4xl flex-1 px-4 py-8 sm:px-6",children:e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(d,{children:[e.jsx(c,{children:e.jsxs(m,{className:"flex items-center gap-2 text-base",children:[e.jsx($e,{className:"h-4 w-4 text-muted-foreground"}),"Employment"]})}),e.jsxs(x,{className:"space-y-4",children:[t.employee_id&&e.jsx(p,{label:"Employee ID",value:t.employee_id}),(t.started_at||t.ended_at)&&e.jsxs("div",{className:"flex flex-wrap gap-6",children:[t.started_at&&e.jsx(p,{label:"Start date",value:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(ne,{className:"h-3.5 w-3.5"}),new Date(t.started_at).toLocaleDateString(void 0,{dateStyle:"long"})]})}),t.ended_at&&e.jsx(p,{label:"End date",value:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(ne,{className:"h-3.5 w-3.5"}),new Date(t.ended_at).toLocaleDateString(void 0,{dateStyle:"long"})]})})]}),!t.employee_id&&!t.started_at&&!t.ended_at&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"No employment details yet."})]})]}),e.jsxs(d,{children:[e.jsx(c,{children:e.jsxs(m,{className:"flex items-center gap-2 text-base",children:[e.jsx(Be,{className:"h-4 w-4 text-muted-foreground"}),"Compensation"]})}),e.jsxs(x,{className:"space-y-4",children:[t.salary!=null&&e.jsx(p,{label:"Base salary",value:e.jsxs("span",{children:[t.salary_currency," ",Number(t.salary).toLocaleString(),t.pay_frequency&&e.jsxs("span",{className:"text-muted-foreground",children:[" · ",t.pay_frequency]})]})}),t.salary_pay_day!=null&&e.jsx(p,{label:"Pay day",value:`Day ${t.salary_pay_day} of month`}),t.allowances&&t.allowances.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Allowances"}),e.jsx("ul",{className:"mt-1.5 space-y-1",children:t.allowances.map((s,o)=>e.jsxs("li",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:s.name}),e.jsxs("span",{className:"font-medium",children:[t.salary_currency," ",Number(s.amount).toLocaleString()]})]},o))})]}),t.deductions&&t.deductions.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Deductions"}),e.jsx("ul",{className:"mt-1.5 space-y-1",children:t.deductions.map((s,o)=>e.jsxs("li",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:s.name}),e.jsxs("span",{className:"font-medium",children:[t.salary_currency," ",Number(s.amount).toLocaleString()]})]},o))})]}),t.salary==null&&!((ee=t.allowances)!=null&&ee.length)&&!((se=t.deductions)!=null&&se.length)&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"No compensation details yet."})]})]}),e.jsxs(d,{className:"lg:col-span-2",children:[e.jsx(c,{children:e.jsxs(m,{className:"flex items-center gap-2 text-base",children:[e.jsx(Ee,{className:"h-4 w-4 text-muted-foreground"}),"Identity & banking"]})}),e.jsx(x,{children:e.jsxs("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[t.passport_photo_path?e.jsx(p,{label:"Passport photo",value:e.jsx("a",{href:M??"#",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"View photo"})}):null,t.tax_id&&e.jsx(p,{label:"Tax ID",value:t.tax_id}),t.national_id&&e.jsx(p,{label:"National ID",value:t.national_id}),t.bank_name&&e.jsx(p,{label:"Bank",value:e.jsxs("span",{children:[t.bank_name,t.bank_account_name&&e.jsxs("span",{className:"block text-muted-foreground text-xs font-normal",children:[t.bank_account_name,t.bank_account_number&&` · ${t.bank_account_number}`]})]})}),!t.passport_photo_path&&!t.tax_id&&!t.national_id&&!t.bank_name&&e.jsx("p",{className:"col-span-full text-sm text-muted-foreground",children:"No identity or banking details yet."})]})})]}),e.jsxs(d,{className:"lg:col-span-2",children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0",children:[e.jsxs(m,{className:"flex items-center gap-2 text-base",children:[e.jsx(Y,{className:"h-4 w-4 text-muted-foreground"}),"Payslips"]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[(b>5||f>5)&&e.jsx(a,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(i,{href:r.route("hr.staff.payslips.index",{staff:t.uuid}),children:["View all (",b+f,")"]})}),e.jsxs(a,{variant:"outline",size:"sm",onClick:()=>C(!0),children:[e.jsx(ie,{className:"mr-1.5 h-4 w-4"}),"Generate payslip"]})]})]}),e.jsxs(x,{className:"space-y-4",children:[v>0&&e.jsxs("div",{className:"rounded-lg border border-muted/50 bg-muted/20 px-4 py-3",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Total paid (all time)"}),e.jsxs("p",{className:"mt-1 text-xl font-bold tabular-nums",children:[t.salary_currency??"USD"," ",v.toLocaleString(void 0,{minimumFractionDigits:2})]})]}),N.length>0||X.length>0?e.jsxs("div",{className:"space-y-2",children:[N.map(s=>e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 rounded-lg border border-muted/50 px-4 py-2.5",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:s.period_start&&s.period_end?`${new Date(s.period_start).toLocaleDateString(void 0,{month:"short",year:"numeric"})} – ${new Date(s.period_end).toLocaleDateString(void 0,{month:"short",year:"numeric"})}`:"Payment run"}),e.jsxs("span",{className:"tabular-nums font-medium",children:[s.currency," ",Number(s.amount).toLocaleString(void 0,{minimumFractionDigits:2})]}),e.jsx(a,{variant:"ghost",size:"sm",className:"gap-1",asChild:!0,children:e.jsxs("a",{href:r.route("hr.payments.slip",{paymentRun:s.run_id,item:s.item_id}),target:"_blank",rel:"noopener noreferrer",children:[e.jsx(oe,{className:"h-3.5 w-3.5"}),"View slip"]})})]},`${s.run_id}-${s.item_id}`)),X.map(s=>e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 rounded-lg border border-muted/50 px-4 py-2.5",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:s.period_start&&s.period_end?`${new Date(s.period_start).toLocaleDateString(void 0,{month:"short",year:"numeric"})} – ${new Date(s.period_end).toLocaleDateString(void 0,{month:"short",year:"numeric"})}`:"Standalone"}),e.jsxs("span",{className:"tabular-nums font-medium",children:[s.currency," ",Number(s.net_amount).toLocaleString(void 0,{minimumFractionDigits:2})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(a,{variant:"ghost",size:"sm",className:"gap-1",asChild:!0,children:e.jsxs(i,{href:r.route("hr.payslips.show",{payslip:s.id}),target:"_blank",children:[e.jsx(oe,{className:"h-3.5 w-3.5"}),"View"]})}),e.jsx(a,{variant:"ghost",size:"sm",className:"gap-1",asChild:!0,children:e.jsxs(i,{href:r.route("hr.payslips.edit",{payslip:s.id}),children:[e.jsx(le,{className:"h-3.5 w-3.5"}),"Edit"]})}),e.jsxs(a,{variant:"ghost",size:"sm",className:"gap-1 text-destructive hover:bg-destructive/10 hover:text-destructive",onClick:()=>J(s.id),children:[e.jsx(B,{className:"h-3.5 w-3.5"}),"Delete"]})]})]},s.id))]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No payslips yet. Generate one for a past period (e.g. before you used this platform) or view slips from payment runs above."})]})]}),e.jsxs(d,{className:"lg:col-span-2",children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0",children:[e.jsxs(m,{className:"flex items-center gap-2 text-base",children:[e.jsx(Y,{className:"h-4 w-4 text-muted-foreground"}),"Documents"]}),D>3&&e.jsx(a,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(i,{href:r.route("hr.staff.documents.index",{staff:t.uuid}),children:["View all (",D,")"]})})]}),e.jsx(x,{children:t.documents&&t.documents.length>0?e.jsx("ul",{className:"space-y-2",children:t.documents.map(s=>e.jsxs("li",{className:"flex items-center justify-between rounded-lg border bg-muted/30 px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Y,{className:"h-4 w-4 shrink-0 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.type})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(a,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs("a",{href:r.route("hr.staff.documents.download",{staff:t.uuid,document:s.id}),target:"_blank",rel:"noopener noreferrer",children:[e.jsx(Ie,{className:"mr-1.5 h-4 w-4"}),"Download"]})}),e.jsx(a,{type:"button",variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-destructive",onClick:()=>V(s.id),children:e.jsx(B,{className:"h-4 w-4"})})]})]},s.id))}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No documents uploaded yet."})})]}),e.jsxs(d,{className:"lg:col-span-2",children:[e.jsx(c,{children:e.jsxs(m,{className:"flex items-center gap-2 text-base",children:[e.jsx(Oe,{className:"h-4 w-4 text-muted-foreground"}),"Position history"]})}),e.jsx(x,{children:W.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b text-left text-xs text-muted-foreground",children:[e.jsx("th",{className:"pb-2 font-medium",children:"Job title"}),e.jsx("th",{className:"pb-2 font-medium",children:"Department"}),e.jsx("th",{className:"pb-2 font-medium",children:"Started"}),e.jsx("th",{className:"pb-2 font-medium",children:"Ended"}),e.jsx("th",{className:"pb-2 font-medium",children:"Salary"})]})}),e.jsx("tbody",{children:W.map(s=>e.jsxs("tr",{className:"border-b last:border-0",children:[e.jsx("td",{className:"py-2.5 font-medium",children:s.job_title??"—"}),e.jsx("td",{className:"py-2.5 text-muted-foreground",children:s.department??"—"}),e.jsx("td",{className:"py-2.5",children:s.started_at?new Date(s.started_at).toLocaleDateString(void 0,{dateStyle:"long"}):"—"}),e.jsx("td",{className:"py-2.5",children:s.ended_at?new Date(s.ended_at).toLocaleDateString(void 0,{dateStyle:"long"}):"—"}),e.jsx("td",{className:"py-2.5",children:s.salary!=null&&s.salary_currency?`${s.salary_currency} ${Number(s.salary).toLocaleString()}`:"—"})]},s.id))})]})}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No position history yet. Changes to job title, department, or dates will be recorded here."})})]}),e.jsxs(d,{className:"lg:col-span-2",children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0",children:[e.jsxs(m,{className:"flex items-center gap-2 text-base",children:[e.jsx(Ue,{className:"h-4 w-4 text-muted-foreground"}),"Event log"]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[_>3&&e.jsx(a,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(i,{href:r.route("hr.staff.events.index",{staff:t.uuid}),children:["View all (",_,")"]})}),e.jsxs(a,{variant:"outline",size:"sm",onClick:()=>I(s=>!s),children:[e.jsx(ie,{className:"mr-1.5 h-4 w-4"}),"Add event"]})]})]}),e.jsxs(x,{className:"space-y-4",children:[E&&e.jsxs("form",{onSubmit:ce,className:"rounded-lg border border-dashed border-muted bg-muted/20 p-4 space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"Type"}),e.jsxs(_e,{value:n.data.event_type,onValueChange:s=>n.setData("event_type",s),children:[e.jsx(we,{children:e.jsx(De,{})}),e.jsx(ke,{children:Object.entries(h).map(([s,o])=>e.jsx(Ce,{value:s,children:o},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"event_title",children:"Title (optional)"}),e.jsx(A,{id:"event_title",value:n.data.title,onChange:s=>n.setData("title",s.target.value),placeholder:"e.g. Late to work"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"event_description",children:"Description (optional)"}),e.jsx("textarea",{id:"event_description",className:"border-input flex min-h-[80px] w-full rounded-md border bg-background px-3 py-2 text-sm",value:n.data.description,onChange:s=>n.setData("description",s.target.value),placeholder:"Details..."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(a,{type:"submit",size:"sm",disabled:n.processing,children:n.processing?"Adding…":"Add event"}),e.jsx(a,{type:"button",variant:"ghost",size:"sm",onClick:()=>I(!1),children:"Cancel"})]})]}),Q.length>0?e.jsx("ul",{className:"space-y-3",children:Q.map(s=>{const o=s.changed_by??s.changedBy,re=o?[o.first_name,o.last_name].filter(Boolean).join(" ")||"Unknown":null;return e.jsxs("li",{className:"flex gap-3 rounded-lg border border-muted/50 bg-muted/10 px-4 py-3",children:[Ke(s.event_type),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium uppercase tracking-wider text-muted-foreground",children:h[s.event_type]??s.event_type}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(s.created_at).toLocaleDateString()})]}),re&&e.jsxs("p",{className:"mt-0.5 text-xs text-muted-foreground",children:["Logged by: ",e.jsx("span",{className:"font-medium text-foreground",children:re})]}),(s.title||s.description)&&e.jsxs("p",{className:"mt-1 text-sm font-medium",children:[s.title,s.title&&s.description?" — ":"",s.description]})]}),y&&e.jsx(a,{type:"button",variant:"ghost",size:"icon",className:"shrink-0 text-muted-foreground hover:text-destructive",onClick:()=>O({id:s.id,position_history_id:s.position_history_id??null}),children:e.jsx(B,{className:"h-4 w-4"})})]},s.id)})}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No events yet. Add policy violations, warnings, commendations, or notes above."})]})]}),(((te=t.assigned_tasks)==null?void 0:te.length)??0)>0||w>0?e.jsxs(d,{className:"lg:col-span-2",children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0",children:[e.jsxs(m,{className:"flex items-center gap-2 text-base",children:[e.jsx(Ve,{className:"h-4 w-4 text-muted-foreground"}),"Assigned tasks"]}),w>3&&e.jsx(a,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(i,{href:r.route("hr.staff.tasks.index",{staff:t.uuid}),children:["View all (",w,")"]})})]}),e.jsx(x,{children:t.assigned_tasks&&t.assigned_tasks.length>0?e.jsx("ul",{className:"space-y-2",children:t.assigned_tasks.map(s=>e.jsx("li",{children:e.jsxs(i,{href:r.route("hr.tasks.show",{task:s.uuid}),className:"flex items-center justify-between rounded-lg border bg-muted/30 px-4 py-2.5 text-sm transition-colors hover:bg-muted/50",children:[e.jsx("span",{className:"font-medium",children:s.title}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[s.status,s.due_at?` · Due ${s.due_at}`:""]})]})},s.id))}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No assigned tasks."})})]}):null,t.owned_projects&&t.owned_projects.length>0&&e.jsxs(d,{className:"lg:col-span-2",children:[e.jsx(c,{children:e.jsxs(m,{className:"flex items-center gap-2 text-base",children:[e.jsx(Ge,{className:"h-4 w-4 text-muted-foreground"}),"Projects (owner)"]})}),e.jsx(x,{children:e.jsx("ul",{className:"flex flex-wrap gap-2",children:t.owned_projects.map(s=>e.jsx("li",{children:e.jsx(i,{href:r.route("hr.projects.show",{project:s.id}),className:"inline-flex items-center rounded-lg border bg-muted/30 px-4 py-2 text-sm font-medium transition-colors hover:bg-muted/50",children:s.name})},s.id))})})]})]})})]}),e.jsx(L,{open:me,onOpenChange:G,children:e.jsxs(T,{children:[e.jsxs(H,{children:[e.jsx(P,{children:"Remove HR details?"}),e.jsx(F,{children:"All HR data for this person (employment, compensation, documents, event log) will be removed. They will remain in the organization but will no longer have a staff record. You can add HR details again later from the Staff list. This cannot be undone."})]}),e.jsxs(z,{children:[e.jsx(R,{children:"Cancel"}),e.jsx($,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:pe,children:"Remove HR details"})]})]})}),e.jsx(Se,{open:xe,onOpenChange:C,children:e.jsxs(Ae,{children:[e.jsxs(Le,{children:[e.jsx(Te,{children:"Generate payslip"}),e.jsx(He,{children:'Create payslips for a date range. With "Split by pay period" on (default), one slip is generated per month (or per week/bi-week from their profile); narration is set to e.g. "Salary January 2022". Turn it off to create a single slip for the exact range with your own narration. You cannot generate for a period that already has a payslip (delete it first).'})]}),e.jsxs("form",{onSubmit:ue,className:"space-y-4",children:[l.errors.period&&e.jsx("div",{className:"rounded-lg border border-destructive/30 bg-destructive/5 px-3 py-2 text-sm text-destructive",children:l.errors.period}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"ps_period_start",children:"Period start"}),e.jsx(A,{id:"ps_period_start",type:"date",required:!0,value:l.data.period_start,onChange:s=>l.setData("period_start",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"ps_period_end",children:"Period end"}),e.jsx(A,{id:"ps_period_end",type:"date",required:!0,value:l.data.period_end,onChange:s=>l.setData("period_end",s.target.value)})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"ps_split",checked:l.data.split_by_period,onChange:s=>l.setData("split_by_period",s.target.checked),className:"h-4 w-4 rounded border-muted-foreground"}),e.jsx(u,{htmlFor:"ps_split",className:"font-normal",children:"Split by pay period (e.g. one slip per month for monthly pay)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"ps_narration",children:"Reference / narration (optional)"}),e.jsx(A,{id:"ps_narration",placeholder:l.data.split_by_period?"Auto per period (e.g. Salary January 2022)":"e.g. Salary Q1 2022",value:l.data.narration,onChange:s=>l.setData("narration",s.target.value)}),!l.data.split_by_period&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Used for the single slip when not splitting by period."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"ps_prorate",checked:l.data.prorate,onChange:s=>l.setData("prorate",s.target.checked),className:"h-4 w-4 rounded border-muted-foreground"}),e.jsx(u,{htmlFor:"ps_prorate",className:"font-normal",children:"Prorate by days in period"})]}),e.jsxs(Pe,{children:[e.jsx(a,{type:"button",variant:"outline",onClick:()=>C(!1),children:"Cancel"}),e.jsx(a,{type:"submit",disabled:l.processing,children:l.processing?"Generating…":"Generate"})]})]})]})}),e.jsx(L,{open:q!==null,onOpenChange:s=>!s&&J(null),children:e.jsxs(T,{children:[e.jsxs(H,{children:[e.jsx(P,{children:"Delete this payslip?"}),e.jsx(F,{children:"This standalone payslip will be permanently removed. This cannot be undone."})]}),e.jsxs(z,{children:[e.jsx(R,{children:"Cancel"}),e.jsx($,{className:"bg-destructive text-white hover:bg-destructive/90 hover:text-white",onClick:he,children:"Delete"})]})]})}),e.jsx(L,{open:j!==null,onOpenChange:s=>!s&&O(null),children:e.jsxs(T,{children:[e.jsxs(H,{children:[e.jsx(P,{children:"Delete event?"}),e.jsx(F,{asChild:!0,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:"This event log entry will be removed. This cannot be undone."}),(j==null?void 0:j.position_history_id)!=null&&e.jsxs("label",{className:"flex cursor-pointer items-center gap-2 pt-2",children:[e.jsx("input",{type:"checkbox",checked:K,onChange:s=>de(s.target.checked),className:"h-4 w-4 rounded border-input"}),e.jsx("span",{className:"text-sm",children:"Also delete the related position history entry"})]})]})})]}),e.jsxs(z,{children:[e.jsx(R,{children:"Cancel"}),e.jsx($,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:()=>{if(j!==null){let s=r.route("hr.staff.events.destroy",{staff:t.uuid,event:j.id});K&&j.position_history_id!=null&&(s+="?delete_position_history=1"),S.delete(s,{preserveScroll:!0,onSuccess:()=>O(null)})}},children:"Delete"})]})]})}),e.jsx(L,{open:U!==null,onOpenChange:s=>!s&&V(null),children:e.jsxs(T,{children:[e.jsxs(H,{children:[e.jsx(P,{children:"Delete document?"}),e.jsx(F,{children:"This document will be permanently removed. This cannot be undone."})]}),e.jsxs(z,{children:[e.jsx(R,{children:"Cancel"}),e.jsx($,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:()=>{U!==null&&S.delete(r.route("hr.staff.documents.destroy",{staff:t.uuid,document:U}),{preserveScroll:!0,onSuccess:()=>V(null)})},children:"Delete"})]})]})})]})}export{ot as default};
