import{u as _,r as n,j as t,H as z,a as A}from"./app-AYk_vs9E.js";import{t as p}from"./index-BSCeWBGl.js";import{A as w}from"./app-layout-D8Tf8JSL.js";import{S as B}from"./layout-CMm98njd.js";import{B as P}from"./button-DttS-hSO.js";import{L as G}from"./label-CLHv5EXU.js";import{S as F}from"./switch-C6XZpBCr.js";import{r as g,s as R}from"./breadcrumb-B0lOsGUr.js";import{u as H}from"./use-effective-tenant-it7FmrhR.js";import{c as T}from"./createLucideIcon-B8-QgQ2g.js";/* empty css            */import"./sonner-B0HlpBLA.js";import"./separator-GwQSQCOi.js";import"./utils-DawFQoOT.js";import"./user-C3DA-HUB.js";import"./shield-SUW6F_AQ.js";import"./credit-card-BBEokihX.js";import"./building-2-ClZdYFLS.js";import"./users-DqaIzH7r.js";import"./package-famJlHsI.js";import"./user-plus-PCQ9TCZ1.js";import"./key-round-BHbt2YCZ.js";import"./history-CKeWRQ3Z.js";import"./index-C6YWzjxw.js";import"./index-G_7kvJMb.js";import"./index-D-MPqe8D.js";import"./input-KN5y_tmq.js";import"./sheet-BQ7ZHeJH.js";import"./index-D2xyTu0-.js";import"./index-DVPqwmDN.js";import"./index-BS1oCJ0R.js";import"./index-DH27nmtP.js";import"./index-DB97fau_.js";import"./index-JB8FLK9q.js";import"./x-C_zQvMCL.js";import"./index-KBPR2gxA.js";import"./index-g_lpINMr.js";import"./dropdown-menu-C44z3VEl.js";import"./index-DpFxWXhO.js";import"./index-kZDZBK9R.js";import"./check-o4IyhQhV.js";import"./file-text-DJz8nwxt.js";import"./wallet-1YY19SXz.js";import"./chevron-down-DjDlq31K.js";import"./skeleton-C1cSm2kL.js";import"./use-tenant-router-yHxY6vf2.js";import"./trash-2-CBlWZpKk.js";import"./en-US-DSSwd-Ay.js";import"./endOfMonth-BNqLjwTF.js";import"./dollar-sign-CtwrfOoy.js";import"./mail-DQFl-2hO.js";import"./circle-alert-DSmqB_aB.js";import"./chevron-right-BFzkFd6A.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],$=T("GripVertical",V),q=[{title:"Settings",href:"/settings/profile"},{title:"Organization",href:"/settings/organization"},{title:"Sidebar pages",href:"#"}];function qr({sidebarConfig:i}){const{effectiveTenant:l}=H(),{flash:s}=_().props;n.useEffect(()=>{s!=null&&s.success&&p.success(s.success),s!=null&&s.error&&p.error(s.error)},[s==null?void 0:s.success,s==null?void 0:s.error]);const[f,b]=n.useState(()=>{var a;const r=((a=i==null?void 0:i.order)!=null&&a.length?i.order:[]).filter(c=>g.includes(c)),o=g.filter(c=>!r.includes(c));return[...r,...o]}),[h,v]=n.useState(()=>{const e=(i==null?void 0:i.enabled)??{},r={};for(const o of g)r[o]=e[o]!==!1;return r}),[x,S]=n.useState(!1),y=e=>{e.preventDefault();const r=l==null?void 0:l.slug;r&&(S(!0),A.patch(route("settings.organization.sidebar.update",{tenant:r}),{order:f,enabled:h},{preserveScroll:!0,onFinish:()=>S(!1),onSuccess:()=>p.success("Sidebar saved. Changes will appear on the next page load."),onError:o=>p.error(typeof o=="string"?o:"Failed to save sidebar.")}))},j=n.useCallback((e,r)=>{e!==r&&b(o=>{const a=[...o],[c]=a.splice(e,1);return a.splice(r,0,c),a})},[]),[d,u]=n.useState(null),[D,m]=n.useState(null),E=e=>{u(e)},N=(e,r)=>{e.preventDefault(),e.dataTransfer.dropEffect="move",m(r)},k=()=>{m(null)},O=(e,r)=>{e.preventDefault(),m(null),d!==null&&(u(null),j(d,r))},I=()=>{u(null),m(null)},L=f.map(e=>R.find(r=>r.id===e)).filter(Boolean);return t.jsxs(w,{breadcrumbs:q,children:[t.jsx(z,{title:"Sidebar pages - Organization"}),t.jsx(B,{children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold",children:"Sidebar pages"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:'Choose which pages appear in the sidebar and drag to reorder. Only the "Pages" section is affected; notifications and your profile at the bottom stay the same.'})]}),t.jsxs("form",{onSubmit:y,className:"space-y-4",children:[t.jsx(G,{children:"Order and visibility"}),t.jsx("ul",{className:"space-y-1 rounded-md border border-border bg-muted/30 p-2",children:L.map((e,r)=>t.jsxs("li",{draggable:!0,onDragStart:()=>E(r),onDragOver:o=>N(o,r),onDragLeave:k,onDrop:o=>O(o,r),onDragEnd:I,className:`flex items-center gap-3 rounded-md border px-3 py-2 transition-colors ${D===r?"border-primary bg-primary/10":d===r?"opacity-60":"border-transparent bg-background hover:bg-muted/50"}`,children:[t.jsx("span",{className:"cursor-grab touch-none text-muted-foreground active:cursor-grabbing","aria-label":"Drag to reorder",children:t.jsx($,{className:"h-4 w-4"})}),t.jsx(e.icon,{className:"h-4 w-4 shrink-0 text-muted-foreground"}),t.jsx("span",{className:"flex-1 font-medium",children:e.title}),t.jsx(F,{checked:h[e.id]!==!1,onCheckedChange:o=>v(a=>({...a,[e.id]:o}))})]},e.id))}),t.jsx(P,{type:"submit",disabled:x,children:x?"Savingâ€¦":"Save changes"})]})]})})]})}export{qr as default};
