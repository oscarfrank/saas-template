import{u as _,r as n,j as t,H as z,a as A}from"./app-CMfsqCQM.js";import{t as p}from"./index-q8lzB8Tn.js";import{A as w}from"./app-layout-DWW7ov8A.js";import{S as B}from"./layout-B_pRaHs0.js";import{B as P}from"./button-B2dnQCAa.js";import{L as G}from"./label-BEW08XYy.js";import{S as F}from"./switch-DKs45Dz1.js";import{r as g,s as R}from"./breadcrumb-UVH0om7h.js";import{u as H}from"./use-effective-tenant-FNx9T5uV.js";import{c as T}from"./createLucideIcon-DV9StWnM.js";/* empty css            */import"./sonner-DSzJt1Z7.js";import"./separator-CisAqifM.js";import"./utils-DawFQoOT.js";import"./user-Bt6Fbven.js";import"./shield-BxhzRHW9.js";import"./credit-card-BIZzkTvA.js";import"./building-2-CraT7Xwf.js";import"./users-nX7eRmms.js";import"./package-BK_e8Gd3.js";import"./user-plus-C-NrluTS.js";import"./key-round-0DwHzC4s.js";import"./history-Cmk4UW5x.js";import"./index-xqWKCSYm.js";import"./index-CSp-ZSgT.js";import"./index-C5ERfWkd.js";import"./input-Bpdo4m0L.js";import"./sheet-CwGP68Z_.js";import"./index-Dsoa9CjY.js";import"./index-BeUfNboo.js";import"./index-DYM8iIys.js";import"./index-NxXi0nlY.js";import"./index-DCzB2KT7.js";import"./index-jjTweGYJ.js";import"./x-Cu70FuQ4.js";import"./index-BrOQlPGX.js";import"./index-CmYx4CDV.js";import"./dropdown-menu-D-TuDDeo.js";import"./index-DJMkznTg.js";import"./index-BDWLcZMo.js";import"./check-KdCJQoSn.js";import"./file-text-ZIm8Me-N.js";import"./wallet-D3VF3ET3.js";import"./chevron-down-uDeEpgqx.js";import"./skeleton-BM9JAt9Z.js";import"./use-tenant-router-ECVXs2qr.js";import"./trash-2-C6bUCbz1.js";import"./en-US-DSSwd-Ay.js";import"./endOfMonth-BNqLjwTF.js";import"./dollar-sign-Cvub9wzG.js";import"./mail-CyHnWLIa.js";import"./circle-alert-DbZArJmq.js";import"./chevron-right-DPdqOnta.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],$=T("GripVertical",V),q=[{title:"Settings",href:"/settings/profile"},{title:"Organization",href:"/settings/organization"},{title:"Sidebar pages",href:"#"}];function qr({sidebarConfig:i}){const{effectiveTenant:l}=H(),{flash:s}=_().props;n.useEffect(()=>{s!=null&&s.success&&p.success(s.success),s!=null&&s.error&&p.error(s.error)},[s==null?void 0:s.success,s==null?void 0:s.error]);const[f,b]=n.useState(()=>{var a;const r=((a=i==null?void 0:i.order)!=null&&a.length?i.order:[]).filter(c=>g.includes(c)),o=g.filter(c=>!r.includes(c));return[...r,...o]}),[h,v]=n.useState(()=>{const e=(i==null?void 0:i.enabled)??{},r={};for(const o of g)r[o]=e[o]!==!1;return r}),[x,S]=n.useState(!1),y=e=>{e.preventDefault();const r=l==null?void 0:l.slug;r&&(S(!0),A.patch(route("settings.organization.sidebar.update",{tenant:r}),{order:f,enabled:h},{preserveScroll:!0,onFinish:()=>S(!1),onSuccess:()=>p.success("Sidebar saved. Changes will appear on the next page load."),onError:o=>p.error(typeof o=="string"?o:"Failed to save sidebar.")}))},j=n.useCallback((e,r)=>{e!==r&&b(o=>{const a=[...o],[c]=a.splice(e,1);return a.splice(r,0,c),a})},[]),[d,u]=n.useState(null),[D,m]=n.useState(null),E=e=>{u(e)},N=(e,r)=>{e.preventDefault(),e.dataTransfer.dropEffect="move",m(r)},k=()=>{m(null)},O=(e,r)=>{e.preventDefault(),m(null),d!==null&&(u(null),j(d,r))},I=()=>{u(null),m(null)},L=f.map(e=>R.find(r=>r.id===e)).filter(Boolean);return t.jsxs(w,{breadcrumbs:q,children:[t.jsx(z,{title:"Sidebar pages - Organization"}),t.jsx(B,{children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold",children:"Sidebar pages"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:'Choose which pages appear in the sidebar and drag to reorder. Only the "Pages" section is affected; notifications and your profile at the bottom stay the same.'})]}),t.jsxs("form",{onSubmit:y,className:"space-y-4",children:[t.jsx(G,{children:"Order and visibility"}),t.jsx("ul",{className:"space-y-1 rounded-md border border-border bg-muted/30 p-2",children:L.map((e,r)=>t.jsxs("li",{draggable:!0,onDragStart:()=>E(r),onDragOver:o=>N(o,r),onDragLeave:k,onDrop:o=>O(o,r),onDragEnd:I,className:`flex items-center gap-3 rounded-md border px-3 py-2 transition-colors ${D===r?"border-primary bg-primary/10":d===r?"opacity-60":"border-transparent bg-background hover:bg-muted/50"}`,children:[t.jsx("span",{className:"cursor-grab touch-none text-muted-foreground active:cursor-grabbing","aria-label":"Drag to reorder",children:t.jsx($,{className:"h-4 w-4"})}),t.jsx(e.icon,{className:"h-4 w-4 shrink-0 text-muted-foreground"}),t.jsx("span",{className:"flex-1 font-medium",children:e.title}),t.jsx(F,{checked:h[e.id]!==!1,onCheckedChange:o=>v(a=>({...a,[e.id]:o}))})]},e.id))}),t.jsx(P,{type:"submit",disabled:x,children:x?"Savingâ€¦":"Save changes"})]})]})})]})}export{qr as default};
