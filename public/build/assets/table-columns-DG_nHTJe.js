import{j as e,L as n,r as l}from"./app-C6kPN11i.js";import{B as c}from"./button-BpcDdXY5.js";import{D as b,a as f,b as j,c as u,d as k}from"./dropdown-menu-D3Uldfay.js";import{t as i}from"./index-BdMXpxBe.js";import{b as d}from"./utils-DawFQoOT.js";import{C as S}from"./custom-alert-dialog-Ci1IYU57.js";import{u as p}from"./use-tenant-router-DTqtlbGV.js";import{E as w}from"./eye-CCu2q2jA.js";import{E as D}from"./ellipsis-Gj8oDHoc.js";import{S as C}from"./share-2-DZJjVhLt.js";import{T as N}from"./trash-2-CxGNVkTA.js";/* empty css            */import"./index-BgupMaT4.js";import"./index-CNSJNdLA.js";import"./index-B6IO7GeI.js";import"./index-C7NICwH1.js";import"./index-D4LQi-WW.js";import"./index-qNm-4KWi.js";import"./index-DjhqQPoh.js";import"./index-BUDeVy67.js";import"./index-DqvV1WAh.js";import"./index-BAwu540p.js";import"./check-ClCxYYgj.js";import"./createLucideIcon-Btrq-JEB.js";const Y=({onDelete:_})=>[{id:"subject",accessorKey:"subject",header:"Subject",enableSorting:!0,enableHiding:!0,cell:({row:r})=>{const t=r.original,s=p();return e.jsx(n,{href:s.route("admin.tickets.show",{ticket:t.id}),className:"font-medium hover:underline cursor-pointer",children:r.getValue("subject")})}},{id:"status",accessorKey:"status",header:"Status",enableSorting:!0,enableHiding:!0,cell:({row:r})=>{const t=r.getValue("status"),s={open:"bg-blue-100 text-blue-800",in_progress:"bg-yellow-100 text-yellow-800",resolved:"bg-green-100 text-green-800",closed:"bg-gray-100 text-gray-800"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s[t]}`,children:t.replace("_"," ")})}},{id:"priority",accessorKey:"priority",header:"Priority",enableSorting:!0,enableHiding:!0,cell:({row:r})=>{const t=r.getValue("priority"),s={low:"bg-gray-100 text-gray-800",medium:"bg-blue-100 text-blue-800",high:"bg-yellow-100 text-yellow-800",urgent:"bg-red-100 text-red-800"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s[t]}`,children:t})}},{id:"category",accessorKey:"category",header:"Category",enableSorting:!0,enableHiding:!0},{id:"user",accessorKey:"user.name",header:"Created By",enableSorting:!0,enableHiding:!0},{id:"last_reply_at",accessorKey:"last_reply_at",header:"Last Reply",enableSorting:!0,enableHiding:!0,cell:({row:r})=>{const t=r.getValue("last_reply_at");return e.jsx("div",{children:t?d(t):"No replies"})}},{id:"created_at",accessorKey:"created_at",header:"Created At",enableSorting:!0,enableHiding:!0,cell:({row:r})=>e.jsx("div",{children:d(r.getValue("created_at"))})},{id:"actions",cell:({row:r})=>{const t=r.original,s=p(),[m,a]=l.useState(!1),[g,o]=l.useState(!1),h=()=>{const y=s.route("admin.tickets.show",{ticket:t.id});navigator.clipboard.writeText(y),i.success("Ticket URL copied to clipboard")},x=()=>{o(!0),s.delete("tickets.destroy",{ticket:t.id},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{i.success("Ticket deleted successfully"),a(!1),s.reload({only:["tickets","pagination"],onSuccess:()=>{o(!1)},onError:()=>{o(!1),i.error("Failed to refresh data after deletion")}})},onError:()=>{i.error("Failed to delete ticket"),o(!1)}})};return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{href:s.route("admin.tickets.show",{ticket:t.id}),children:e.jsx(c,{variant:"outline",size:"icon",className:"cursor-pointer",children:e.jsx(w,{className:"h-4 w-4"})})}),e.jsxs(b,{children:[e.jsx(f,{asChild:!0,children:e.jsx(c,{variant:"outline",size:"icon",className:"cursor-pointer",children:e.jsx(D,{className:"h-4 w-4"})})}),e.jsxs(j,{align:"end",children:[e.jsxs(u,{onClick:h,className:"cursor-pointer",children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"Share Ticket"]}),e.jsx(k,{}),e.jsxs(u,{onClick:()=>a(!0),className:"text-destructive cursor-pointer",children:[e.jsx(N,{className:"mr-2 h-4 w-4"}),"Delete Ticket"]})]})]}),e.jsx(S,{isOpen:m,onClose:()=>a(!1),onConfirm:x,title:"Are you sure?",description:`This action cannot be undone. This will permanently delete the ticket "${t.subject}".`,isLoading:g})]})}}];export{Y as createColumns};
